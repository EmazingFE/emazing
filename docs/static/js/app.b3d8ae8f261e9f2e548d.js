webpackJsonp([1],{"+i+X":function(s,t){},"08FI":function(s,t){},"1BiV":function(s,t){},"5AqT":function(s,t){},"6ulf":function(s,t){},D4uH:function(s,t,a){"use strict";var e={},n={name:"icon",props:{name:{type:String,validator:function(s){return s?s in e||(console.warn('Invalid prop: prop "name" is referring to an unregistered icon "'+s+'".\nPlease make sure you have imported this icon before using it.'),!1):(console.warn('Invalid prop: prop "name" is required.'),!1)}},scale:[Number,String],spin:Boolean,inverse:Boolean,pulse:Boolean,flip:{validator:function(s){return"horizontal"===s||"vertical"===s}},label:String},data:function(){return{x:!1,y:!1,childrenWidth:0,childrenHeight:0,outerScale:1}},computed:{normalizedScale:function(){var s=this.scale;return s=void 0===s?1:Number(s),isNaN(s)||s<=0?(console.warn('Invalid prop: prop "scale" should be a number over 0.',this),this.outerScale):s*this.outerScale},klass:function(){return{"fa-icon":!0,"fa-spin":this.spin,"fa-flip-horizontal":"horizontal"===this.flip,"fa-flip-vertical":"vertical"===this.flip,"fa-inverse":this.inverse,"fa-pulse":this.pulse}},icon:function(){return this.name?e[this.name]:null},box:function(){return this.icon?"0 0 "+this.icon.width+" "+this.icon.height:"0 0 "+this.width+" "+this.height},ratio:function(){if(!this.icon)return 1;var s=this.icon,t=s.width,a=s.height;return Math.max(t,a)/16},width:function(){return this.childrenWidth||this.icon&&this.icon.width/this.ratio*this.normalizedScale||0},height:function(){return this.childrenHeight||this.icon&&this.icon.height/this.ratio*this.normalizedScale||0},style:function(){return 1!==this.normalizedScale&&{fontSize:this.normalizedScale+"em"}},raw:function(){if(!this.icon||!this.icon.raw)return null;var s=this.icon.raw,t={};return s=s.replace(/\s(?:xml:)?id=(["']?)([^"')\s]+)\1/g,function(s,a,e){var n="fa-"+(i++).toString(16);return t[e]=n,' id="'+n+'"'}),s=s.replace(/#(?:([^'")\s]+)|xpointer\(id\((['"]?)([^')]+)\2\)\))/g,function(s,a,e,n){var i=a||n;return i&&t[i]?"#"+t[i]:s}),s}},mounted:function(){var s=this;if(!this.icon){this.$children.forEach(function(t){t.outerScale=s.normalizedScale});var t=0,a=0;this.$children.forEach(function(s){t=Math.max(t,s.width),a=Math.max(a,s.height)}),this.childrenWidth=t,this.childrenHeight=a,this.$children.forEach(function(s){s.x=(t-s.width)/2,s.y=(a-s.height)/2})}},register:function(s){for(var t in s){var a=s[t];a.paths||(a.paths=[]),a.d&&a.paths.push({d:a.d}),a.polygons||(a.polygons=[]),a.points&&a.polygons.push({points:a.points}),e[t]=a}},icons:e},i=870711;var l={render:function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("svg",{class:s.klass,style:s.style,attrs:{version:"1.1",role:s.label?"img":"presentation","aria-label":s.label,x:s.x,y:s.y,width:s.width,height:s.height,viewBox:s.box}},[s._t("default",[s.icon&&s.icon.paths?s._l(s.icon.paths,function(t,e){return a("path",s._b({key:"path-"+e},"path",t,!1))}):s._e(),s._v(" "),s.icon&&s.icon.polygons?s._l(s.icon.polygons,function(t,e){return a("polygon",s._b({key:"polygon-"+e},"polygon",t,!1))}):s._e(),s._v(" "),s.icon&&s.icon.raw?[a("g",{domProps:{innerHTML:s._s(s.raw)}})]:s._e()])],2)},staticRenderFns:[]};var v=a("VU/8")(n,l,!1,function(s){a("5AqT")},null,null);t.a=v.exports},GCZO:function(s,t){},KK5o:function(s,t){s.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNTQzMTI5NzA5NzI4IiBjbGFzcz0iaWNvbiIgc3R5bGU9IiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjE5NzMiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PGRlZnM+PHN0eWxlIHR5cGU9InRleHQvY3NzIj48L3N0eWxlPjwvZGVmcz48cGF0aCBkPSJNNTE3Ljc0MTI1OSA2NzYuNDU3NTg2Yy02Ny4xMDUzNTEgMy42Mzc4NTQtMTI2LjE0MTkzMi0zNi43NTkyMDUtMTUxLjg3OTEwNi05MS44MzM1NDUtMjguMjg0MTgzLTYwLjUxNzMwNS0yMi45NDg2NjUtMTIwLjI2ODE1NCAxNy40MzMwNDQtMTczLjU5MjY0IDM4LjQ5Njc3OS01MC44Mzc4NTIgOTIuMDA3NTA3LTcxLjAzMzgyMyAxNTUuMzc4ODEzLTYzLjQ2NTQ1IDMxLjQ1NzQ1NiAzLjc1NzU4IDU5LjE5MDA3NyAxNi42NzI3MjggODMuMzY3NzMzIDM3LjE5MzA4NyAxMy4xMTc3NjIgMTEuMTQwNzM1IDEyLjgyNTA5NyAxNi4xMTkxMTktMS43MTgxMzEgMjQuNDY1MjA1LTEyLjYzNjgwOCA3LjI1NTI0MS0yNS4zMzcwNjEgMTQuMzk1ODcyLTM3LjkwODM3OCAyMS43NjU3MjMtMzQuNzU2NTk1IDIwLjM2MTc0Ny02OS43MjgwODQgNDAuMzcwNDUzLTEwNC4wNzk0NSA2MS40MDI0NjUtMTguMzk1OTc2IDExLjI1NjM2OC0yMi4wNzQ3NjEgMjkuMjE0MzY5LTExLjc5MjU4MSA0Ny44NDU3MDUgMTEuMTIzMzM4IDIwLjE0OTkyMiAzMi42ODc0NyAyNC44NDA3NTggNTUuNTM0ODI3IDExLjYzMTkyMiA2Ny44OTAyMjYtMzkuMjYxMTg5IDEzNS41NTMyNzktNzguOTEyMjU3IDIwMy42NTczNzYtMTE3LjgwNDAzMyAxMS4yNjg2NDgtNi40MzM1MjYgMTIuNTA2ODQ4LTEyLjk3OTYxNiA3LjQ5OTgxMS0yMy44ODM5NjctMTcuNjE3MjQtMzguMzYxNzAzLTQzLjU2MjE0NS02OS44NzIzNzEtNzguMzI4OTczLTkzLjQ0NDIyOS03Ni44MjI2NjYtNTIuMDg2Mjg1LTE1OC43OTE1MzktNjAuNDMxMzQ4LTI0Mi43MzMzNDctMjAuODY0MTktODMuNzQwMjE2IDM5LjQ3MzAxMy0xMjkuMjI5MjQ3IDEwOC43ODg3MDUtMTM2Ljc5MTQ3OSAyMDAuMTQ0MzY2LTYuMjY1NzA0IDc1LjczNDg5MiAyMi41NTA1OTkgMTM5Ljg1NzMwNSA3Ny4yMTU2MTYgMTkyLjYyNzE1OSA3Ni4yMTY4NjkgNzMuNTcxNjIyIDIwMy41OTI5MDggODUuMTQ4Mjg1IDI5MS4xMzk4MjMgMjYuMDAyMjExIDIyLjc5NjE5Mi0xNS4zOTU2NDIgMjIuNzk2MTkyLTE1LjM5NTY0MiA4LjY2MjI4Ny0zOC45MTEyMTgtMTUuMjgyMDU1LTI1LjQxODkyNi0zMC40NDY0MjktMzAuMTQzNTMxLTU2Ljk3NTY0My0xNy40MjU4ODFDNTcwLjMyMDc3OSA2NzAuMzQwMjYxIDU0NC4yOTkxMjUgNjc4LjE1NzI5NyA1MTcuNzQxMjU5IDY3Ni40NTc1ODZ6IiBwLWlkPSIxOTc0Ij48L3BhdGg+PHBhdGggZD0iTTc0OC4xNzk1ODIgNTY4LjgzMzQwM2MtMS4yNjI3Ni0xOC4xOTMzNjEtMTEuMTI4NDU1LTMyLjk3MTk0OS0xOS42NDIzNjItNDguMjA4OTc4LTIuNzc5My00Ljk3NjMzOC03LjIzODg2OC0zLjA2MTczMi0xMS4yMTg1MDYtMC43OTEwMTYtMTUuNjA0Mzk2IDguOTMzNDYzLTMxLjE2MDY5NyAxNy45NDM2NzQtNDYuODgzNzk3IDI2LjY2MDE5Ni02LjY4MzIxMyAzLjcwNTM5Mi03Ljg2NTEzMSA4LjE5MjU4OS00LjAwMTEyNyAxNC43MDU5MzMgOC45NTQ5NTMgMTUuMDkzNzY2IDE3Ljg0NDQxMyAzMC4yMjc0NDIgMjYuNDI5OTUyIDQ1LjUyODkzOSAzLjczMDk3NCA2LjY0NzM5NyA4LjIwNTg5MiA4LjE2ODAzIDE0LjY0NDUzNSA0LjA5NzMxOCA5LjQwMjEzNy01Ljk0MjMzOSAxOS4xMDgxOTctMTEuNDUzODY2IDI4LjE4NDkyMy0xNy44NTM2MjNDNzQzLjc2NzA4NiA1ODcuMjcyMzU3IDc0OC41MTExMzMgNTc5LjI2Mzk2MyA3NDguMTc5NTgyIDU2OC44MzM0MDN6IiBwLWlkPSIxOTc1Ij48L3BhdGg+PC9zdmc+"},L7kF:function(s,t){},MYBA:function(s,t){},"OOt+":function(s,t){},SmpE:function(s,t){},TWPY:function(s,t){},TgUF:function(s,t){s.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgdmlld0JveD0iMCAwIDIwIDIwIj4KICAgIDxwYXRoIGZpbGw9IiMzQjQ5NUIiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTIuOCAxMS4zMTNoMTIuNDhsLTQuMjQgNC4zMDZhLjc5NC43OTQgMCAwIDAgMCAxLjEzN2MuMzIuMzI1LjguMzI1IDEuMTIgMGw1LjYtNS42ODdhLjc5NC43OTQgMCAwIDAgMC0xLjEzOGwtNS42LTUuNjg3QS44NTcuODU3IDAgMCAwIDExLjYgNGMtLjI0IDAtLjQuMDgxLS41Ni4yNDRhLjc5NC43OTQgMCAwIDAgMCAxLjEzN2w0LjI0IDQuMzA2SDIuOGMtLjQ4IDAtLjguMzI1LS44LjgxMyAwIC40ODguNC44MTMuOC44MTN6Ii8+Cjwvc3ZnPgo="},XCQl:function(s,t){s.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgdmlld0JveD0iMCAwIDIwIDIwIj4KICAgIDxwYXRoIGZpbGw9IiNGRkYiIGZpbGwtcnVsZT0ibm9uemVybyIgZD0iTTE1LjAxOCAxMS4wMUw5LjU1IDE2LjI1bC42NjcuNzVMMTcgMTAuNSAxMC4yMTcgNGwtLjY2Ny43NSA1LjQ2OCA1LjI0SDN2MS4wMmgxMi4wMTh6Ii8+Cjwvc3ZnPgo="},a3RY:function(s,t){},ce18:function(s,t){},dD3h:function(s,t,a){"use strict";var e={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"emazing-footer"},[t("div",{staticClass:"emazing-footer-content"},[this._v("Copyright © 2018 Emazing. All Rights Reserved.")])])}]};t.a=e},gAJx:function(s,t){},icFP:function(s,t,a){s.exports=a.p+"static/img/blog1.2bd0dcc.png"},kdtD:function(s,t){},lRwf:function(s,t){s.exports=Vue},lVK7:function(s,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var e=a("lRwf"),n=a.n(e),i=a("A5qe"),l=a.n(i),v=(a("H7zp"),a("LcEa"),a("D4uH")),c=a("fZjL"),r=a.n(c),_=[{img:"https://user-images.githubusercontent.com/4401831/50821373-fe45ec80-1369-11e9-9514-58c08f7b88ee.jpg",author:"王超楠",tag:"技术共享",date:"2019.01.08",name:"agent",avatar:"https://cube.elemecdn.com/f/07/2fcdeb637ace4d565d9f8439eedcejpeg.jpeg",title:"谈谈代理",description:"谈谈代理"},{img:"https://user-images.githubusercontent.com/4401831/50513371-5f500380-0ad2-11e9-83e3-38d50c2aebdb.jpg",author:"王超楠",tag:"技术共享",date:"2019.01.02",name:"fe-framework",avatar:"https://cube.elemecdn.com/f/07/2fcdeb637ace4d565d9f8439eedcejpeg.jpeg",title:"浅谈现代前端框架技术思想",description:"浅谈现代前端框架技术思想"},{img:"https://user-images.githubusercontent.com/4401831/45134485-5bb80a00-b1cd-11e8-93fb-8d32f79e6e5b.png",author:"王超楠",tag:"工作杂谈",date:"2018.09.05",name:"time-management",avatar:"https://cube.elemecdn.com/f/07/2fcdeb637ace4d565d9f8439eedcejpeg.jpeg",title:"谈谈时间管理",description:"谈谈时间管理"},{img:"https://user-images.githubusercontent.com/4401831/43843615-8a0385bc-9b5a-11e8-9fd7-16449faf46e5.jpeg",author:"王超楠",tag:"工作杂谈",date:"2018.08.08",name:"pyramid-principle",avatar:"https://cube.elemecdn.com/f/07/2fcdeb637ace4d565d9f8439eedcejpeg.jpeg",title:"金字塔原则",description:"金字塔原则"},{img:"https://user-images.githubusercontent.com/4401831/50874559-6a266480-13ff-11e9-963a-7973236b7ffd.png",author:"王超楠",tag:"技术共享",date:"2017.11.17",name:"aop",avatar:"https://cube.elemecdn.com/f/07/2fcdeb637ace4d565d9f8439eedcejpeg.jpeg",title:"深入浅出 Javascript Decorators 和 AOP 编程",description:"深入浅出 Javascript Decorators 和 AOP 编程"},{img:"https://user-images.githubusercontent.com/4401831/31727812-3845d60a-b3f0-11e7-9889-e2c6525a0619.png",author:"王超楠",tag:"技术共享",date:"2017.10.18",name:"fe-communication",avatar:"https://cube.elemecdn.com/f/07/2fcdeb637ace4d565d9f8439eedcejpeg.jpeg",title:"谈谈前端通信",description:"谈谈前端通信"},{img:"https://user-images.githubusercontent.com/4401831/29860784-c02695a0-8d99-11e7-882c-b1b613c5dde4.png",author:"王超楠",tag:"技术共享",date:"2017.08.30",name:"unified-styling-language",avatar:"https://cube.elemecdn.com/f/07/2fcdeb637ace4d565d9f8439eedcejpeg.jpeg",title:"统一样式语言（A Unified Styling Language）",description:"统一样式语言（A Unified Styling Language）"},{img:"https://cube.elemecdn.com/c/d3/2c5f70ac528fbf691d6f0a89f3447png.png",author:"王超楠",tag:"技术共享",date:"2017.08.09",name:"sri",avatar:"https://cube.elemecdn.com/f/07/2fcdeb637ace4d565d9f8439eedcejpeg.jpeg",title:"前端启用SRI策略",description:"前端启用SRI策略"},{img:"https://camo.githubusercontent.com/949ada5c1c7e5da192528c23cfb22698394c6d88/68747470733a2f2f68746d6c2e737065632e7768617477672e6f72672f696d616765732f6173796e6364656665722e737667",author:"王超楠",tag:"技术共享",date:"2017.08.08",name:"script-label",avatar:"https://cube.elemecdn.com/f/07/2fcdeb637ace4d565d9f8439eedcejpeg.jpeg",title:"关于 script 标签你应该知道的",description:"关于 script 标签你应该知道的"}];function o(s){this.$router.push({name:s.name})}function p(){var s=[];if(_){s.push("全部文章("+_.length+")");var t={};_.forEach(function(s){t[s.tag]=t[s.tag]||[],t[s.tag].push(s)}),r()(t).forEach(function(a){s.push(a+"("+t[a].length+")")})}return s}var h=function(s,t){return 0!==(t=t||"").replace(/\s/g,"").length&&new RegExp(" "+t+" ").test(" "+s.className+" ")},d=function(s,t){h(s,t)||(s.className=""===s.className?t:s.className+" "+t)},u={methods:{initAnimation:function(){var s=l.a.timeline().add({targets:".letter-main",strokeDashoffset:{value:[l.a.setDashoffset,0],delay:200,duration:800,easing:"easeInOutQuad"},stroke:{easing:"easeInQuad"}}).add({targets:".letter-e-1, .letter-a-1, .letter-i-1, .letter-g-1",strokeDashoffset:{value:[l.a.setDashoffset,0],duration:400,easing:"easeInOutQuad"},stroke:{easing:"easeInQuad"}});s.play(),s.complete=this.animateComplete},animateComplete:function(){var s=this;d(this.$el.querySelector(".emazing-wrapper"),"fade-logo"),setTimeout(function(){d(s.$el,"fade-out"),setTimeout(function(){s.$emit("removeWelcome")},100)},250)}},mounted:function(){this.initAnimation()}},m={render:function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"welcome-container"},[a("div",{staticClass:"emazing-container"},[a("div",{staticClass:"emazing-wrapper"},[a("div",{staticClass:"emazing"},[a("svg",{attrs:{viewBox:"0 0 7505.6 1992.9"}},[a("g",{attrs:{fill:"none","fill-rule":"evenodd",stroke:"#1989fa"}},[a("path",{staticClass:"letter-main letter-e",attrs:{"stroke-width":"30",d:"M555.1,1137c-14.6,8.6-32.4,6-43.7-8.6l-26.5-41c-23.2-35.1-14.6-84.7,23.2-108.5c0,0,0,0,2.6,0l333.4-213.7c14.6-8.6,17.9-26.5,8.6-41c-2.6-2.6-2.6-6-6-6C715.3,613,528,598.4,379.2,691.7c-183.9,117.1-236.9,359.9-117.1,541.2s365.9,230.9,549.8,113.8l0,0l0,0c37.7-23.2,88-11.9,111.1,23.2l26.5,37.7l0,0l0,0c8.6,11.9,6,29.1-6,41l0,0c-14.6,11.9-29.1,20.5-43.7,29.1c-260,164.1-605.4,93.3-772.1-160.8S34.5,723.5,291.8,556.7c260-164.1,605.4-93.3,772.1,160.8c8.6,14.6,17.9,29.1,26.5,43.7l0,0c6,14.6,2.6,29.1-11.9,37.7L555.1,1137z"}}),s._v(" "),a("path",{staticClass:"letter-e-1",attrs:{"stroke-width":"30",d:"M1064.6,1222.3c-14.6,8.6-32.4,6-43.7-8.6l-67.5-102.5c-8.6-14.6-6-32.4,8.6-41l0,0l105.2-67.5c14.6-8.6,32.4-6,43.7,8.6l35.1,52.9c26.5,41,17.9,96.6-26.5,125.7c0,0,0,0-2.6,0L1064.6,1222.3z"}}),s._v(" "),a("path",{staticClass:"letter-main letter-m",attrs:{"stroke-width":"30",d:"M1362.3,487.9h43.7c49.6,0,88,37.7,88,88v78.7h14.6c49.6-117.1,154.8-187.2,298.4-187.2s245.5,76.1,295.1,187.2h14.6c58.2-111.1,178.6-187.2,324.8-187.2c216.3,0,339.4,125.7,339.4,348v646.4c0,49.6-37.7,88-88,88h-52.9c-17.9,0-29.1-11.9-29.1-29.1V853.8c0-158.1-73.4-234.2-224.9-234.2c-148.9,0-245.5,111.1-245.5,245.5v596.8c0,49.6-37.7,88-88,88h-52.9c-17.9,0-29.1-11.9-29.1-29.1V827.3c0-125.7-88-207.7-222.3-207.7c-140.3,0-245.5,119.7-245.5,269.3v572.9c0,49.6-37.7,88-88,88h-52.9c-17.9,0-29.1-11.9-29.1-29.1V515.1C1333.2,499.8,1347.7,487.9,1362.3,487.9z"}}),s._v(" "),a("path",{staticClass:"letter-main letter-a",attrs:{"stroke-width":"30",d:"M2947.5,1251.4c0-189.9,140.3-301,389-315.6l307-17.9v-96.6c0-131.7-82-204.4-239.5-204.4c-105.2,0-181.3,32.4-219.6,90.6c-17.9,26.5-43.7,43.7-76.1,43.7h-78.7c-17.9,0-32.4-17.9-29.1-35.1c41-148.9,199.1-245.5,409.5-245.5c260,0,403.6,134.3,403.6,354v637.8c0,49.6-37.7,88-88,88h-43.7c-17.9,0-29.1-11.9-29.1-29.1V1393h-14.6c-70.1,113.8-183.9,175.3-327.5,175.3C3099.6,1570.3,2947.5,1447.2,2947.5,1251.4z"}}),s._v(" "),a("path",{staticClass:"letter-a-1",attrs:{"stroke-width":"30",d:"M3643.5,1154.8v-96.6l-286.5,17.9c-160.8,11.9-234.2,67.5-234.2,172.7c0,108.5,90.6,172.7,216.3,172.7C3511.8,1420.8,3643.5,1307,3643.5,1154.8z"}}),s._v(" "),a("path",{staticClass:"letter-main letter-z",attrs:{"stroke-width":"30",d:"M4283.9,1283.2l436-447.2L4313,415.2c-17.9-17.9-37.7-26.5-64.2-26.5H4135c-26.5,0-37.7,32.4-20.5,49.6l383.1,397.6l-436,447.2l415.5,415.5c17.9,17.9,37.7,26.5,61.5,26.5h113.8c26.5,0,37.7-32.4,20.5-49.6L4283.9,1283.2z"}}),s._v(" "),a("path",{staticClass:"letter-main letter-i",attrs:{"stroke-width":"30",d:"M5114.2,487.9h52.9c17.9,0,29.1,11.9,29.1,29.1v944.8c0,49.6-37.7,88-88,88h-52.9c-17.9,0-29.1-11.9-29.1-29.1V572.6C5026.9,526.3,5067.9,487.9,5114.2,487.9z"}}),s._v(" "),a("path",{staticClass:"letter-i-1",attrs:{"stroke-width":"30",d:"M5123.5,263c-14.6,8.6-32.4,6-43.7-8.6l-67.5-102.5c-8.6-14.6-6-32.4,8.6-41l0,0l105.2-67.5c14.6-8.6,32.4-6,43.7,8.6l35.1,52.9c26.5,41,17.9,96.6-26.5,125.7c0,0,0,0-2.6,0L5123.5,263z"}}),s._v(" "),a("path",{staticClass:"letter-main letter-n",attrs:{"stroke-width":"30",d:"M5468.1,487.9h43.7c49.6,0,88,37.7,88,88v78.7h14.6c52.9-117.1,175.3-187.2,339.4-187.2c239.5,0,371.2,140.3,371.2,395v599.4c0,49.6-37.7,88-88,88H6184c-17.9,0-29.1-11.9-29.1-29.1V903.4c0-193.2-82-283.8-257.4-280.5c-164.1,2.6-292.4,137.6-292.4,301v537.9c0,49.6-37.7,88-88,88h-52.9c-17.9,0-29.1-11.9-29.1-29.1V515.1C5439,499.8,5453.6,487.9,5468.1,487.9z"}}),s._v(" "),a("path",{staticClass:"letter-main letter-g",attrs:{"stroke-width":"30",d:"M6585.6,1666.2h84.7c32.4,0,58.2,17.9,76.1,47c37.7,61.5,123.1,96.6,248.8,96.6c189.9,0,304.3-93.3,304.3-251.4V1348h-14.6c-67.5,117.1-187.2,183.9-333.4,183.9c-274.6,0-444.6-213.7-444.6-531.9c0-318.9,172.7-535.2,444.6-535.2c148.9,0,280.5,73.4,342,187.2h14.6V511.7c0-17.9,11.9-29.1,29.1-29.1h102.5c17.9,0,29.1,11.9,29.1,29.1v1052.6c0,236.9-183.9,389-473.7,389c-236.9,0-397.6-99.2-438.6-254.7C6553.2,1686.7,6567.7,1666.2,6585.6,1666.2z"}}),s._v(" "),a("path",{staticClass:"letter-g-1",attrs:{"stroke-width":"30",d:"M6989.1,622.2c-195.8,0-307,148.9-307,383.1c0,230.9,111.1,383.1,307,383.1s315.6-148.9,315.6-383.1C7304.7,771.8,7185,622.2,6989.1,622.2z"}})])])])])])])},staticRenderFns:[]};var C=a("VU/8")(u,m,!1,function(s){a("MYBA")},null,null).exports,j={render:function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",[a("div",{staticClass:"emazing-header",class:{"is-home":s.isIndexView}},[a("div",{staticClass:"header"},[a("div",{staticClass:"header-left"},[a("img",{attrs:{src:s.emazingLogo}})]),s._v(" "),a("div",{staticClass:"header-right"},s._l(s.modules,function(t,e){return a("div",{key:e,staticClass:"nav",class:{active:s.isActiveRoute(t.route),"is-home":s.isIndexView},attrs:{role:"nav"},on:{click:function(a){s.viewModule(t)}}},[a("span",[s._v(s._s(t.text))])])}))])]),s._v(" "),a("div",{staticClass:"header-blank",class:{"is-home":s.isIndexView}})])},staticRenderFns:[]};var g=a("VU/8")({data:function(){return{emazingLogo:"https://fuss10.elemecdn.com/f/c9/852ed58b43497f58aa60eee6f33dfpng.png",modules:[{text:"首页",route:"home"},{text:"博客",route:"blog"},{text:"关于",route:"about"},{text:"招聘",route:"recruit"}]}},computed:{isIndexView:function(){return"home"===this.$route.name}},methods:{viewModule:function(s){s.route&&this.route(s.route)},route:function(s){this.$router.push({name:s})},isActiveRoute:function(s){var t=!1;return this.$route.matched.forEach(function(a){t||(t=-1!==a.name.indexOf(s))}),t}}},j,!1,function(s){a("gAJx")},null,null).exports,f=a("mzkE"),b={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var s=this.$createElement,t=this._self._c||s;return t("div",[t("div",{staticClass:"starsWrapper"},[t("div",{attrs:{id:"stars1"}}),this._v(" "),t("div",{attrs:{id:"stars2"}}),this._v(" "),t("div",{attrs:{id:"stars3"}})])])}]};var y=a("VU/8")(null,b,!1,function(s){a("TWPY")},"data-v-524e791b",null).exports,w={render:function(){var s=this.$createElement;return(this._self._c||s)("div",{staticClass:"emazing-breadcrumb"},[this._t("default")],2)},staticRenderFns:[]};var k=a("VU/8")({name:"breadcrumb",data:function(){return{children:[]}},methods:{addChild:function(s){var t=this.children.indexOf(s);-1!==t&&this.children.splice(t,1),this.children.push(s)}}},w,!1,function(s){a("L7kF")},"data-v-6da1549c",null).exports,S={render:function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"emazing-breadcrumb-item",class:{"is-current":this.current},on:{click:this.handleClick}},[t("span",{staticClass:"emazing-breadcrumb-text"},[this._t("default")],2),this._v(" "),this.current?this._e():t("span",{staticClass:"emazing-breadcrumb-separator-line"},[this._v(" / ")])])},staticRenderFns:[]};var M=a("VU/8")({name:"BreadcrumbItem",computed:{breadcrumbList:function(){return this.$parent.children},index:function(){return this.breadcrumbList.indexOf(this)},current:function(){return this.index===this.breadcrumbList.length-1}},created:function(){this.$parent.addChild(this)},methods:{handleClick:function(s){this.current||this.$emit("click",s)}}},S,!1,function(s){a("OOt+")},"data-v-43fabe44",null).exports,N={props:{info:{type:Object,required:!0}},methods:{handleClick:function(s){this.current||this.$emit("click",s)}}},T={render:function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"emazing-card",on:{click:s.handleClick}},[a("img",{staticClass:"card-img",attrs:{src:s.info.img}}),s._v(" "),a("div",{staticClass:"card-info"},[a("div",{staticClass:"card-tag"},[a("span",{staticClass:"title-first-color"},[s._v(s._s(s.info.tag))]),s._v(" "),a("span",{staticClass:"title-third-color"},[s._v(s._s(s.info.author))]),s._v(" "),a("span",{staticClass:"title-second-color"},[s._v(s._s(s.info.date))])]),s._v(" "),a("h2",[s._v(s._s(s.info.title))]),s._v(" "),a("p",[s._v(s._s(s.info.description))])])])},staticRenderFns:[]};var I=a("VU/8")(N,T,!1,function(s){a("a3RY")},null,null).exports,x=(a("689D"),a("08FI"),a("pRNm")),D=a.n(x),z=a("XCQl"),E=a.n(z),A=a("TgUF"),O=a.n(A),L=a("icFP"),R=a.n(L),P={title:"饿了么 B 端前端团队",subtitle:"Emazing FE",description:"Self-improving happily every day!"},U={name:"博客",englishName:"Blog",typeName:"文章",btnName:"全部文章",blogs:_},J={isShow:!1,name:"项目",englishName:"Project",typeName:"项目",btnName:"全部项目",total:82,blogs:[{img:R.a,author:"王超楠",tag:"技术共享",date:"2018.01.02",title:"前端数据流管理方案",description:"我们在谈前端数据流管理之前，先来看一下组件化相关的概念，并以此为基础来讨论下基于Vue的开发过程中的数据流管理方案。我们在开发过程中，将后端返回的数据和控制UI状态的数据统称为state。现在我们知道，一个组件的state，有外部传入的，也有自身内部私有的。我们将围绕组件内部和外部state来探讨数据流管理方案。"},{img:R.a,author:"王超楠",tag:"技术共享",date:"2018.11.18",title:"前端数据流管理方案",description:"G3D 是一款基于 WebGL 的 JavaScript 3D 渲染引擎，借助 GCanvas，G3D 可以运行在 Weex，ReactNative 等 hybrid 环境下。G3D 由淘宝…"}]},B={name:"团队",englishName:"Team",img:"https://fuss10.elemecdn.com/8/9a/9d167efcdc8a531853473aef2ddadjpeg.jpeg",btnName:"加入我们",description:"我们是饿了么 B 端前端开发团队（Emazing FE），承担着饿了么 B 端前端基础设施、数十个业务产品的研发。我们有着前沿的技术选型，欢快的工作氛围，多元的团队建设，饱足的成长食粮。在这里有一群年轻有趣的小伙伴，加入我们一起工作一起玩。Self-improving happily every day!Challenge complicated business, design awesome architecture!"},W={data:function(){return{rightLightImg:E.a,rightDarkImg:O.a,introduction:P,blogObj:U,projectObj:J,teamObj:B,gotoBlogDetail:o,isMounted:!1}},mounted:function(){this.$nextTick(function(){this.isMounted=!0})},methods:{viewModule:function(s){s.route&&this.route(s.route),s.link&&this.goto(s.link)},route:function(s){this.$router.push({name:s})},goto:function(s){var t=document.createElement("a");t.setAttribute("href",s),t.setAttribute("target","_blank"),t.click()}}},F={render:function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"emazing-home"},[a("div",{staticClass:"home-banner"},[a("div",{staticClass:"home-banner-content"},[a("div",{staticClass:"home-banner-left"},[a("h1",[s._v(s._s(s.introduction.title))]),s._v(" "),a("h2",[s._v(s._s(s.introduction.subtitle))]),s._v(" "),a("p",[s._v(s._s(s.introduction.description))])]),s._v(" "),s.isMounted?a("div",{staticClass:"home-banner-right"},[a("stars")],1):s._e()])]),s._v(" "),s.blogObj&&s.blogObj.blogs?a("div",{staticClass:"home-body"},[a("div",{staticClass:"home-body-title"},[a("h1",{staticClass:"title-first-color"},[s._v(s._s(s.blogObj.name))]),s._v(" "),a("h1",{staticClass:"title-second-color"},[s._v(" / ")]),s._v(" "),a("h1",{staticClass:"title-third-color"},[s._v(s._s(s.blogObj.englishName))])]),s._v(" "),a("div",{staticClass:"home-body-content"},[s._l(s.blogObj.blogs,function(t,e){return e<2?a("card",{key:e,staticClass:"box-right",attrs:{info:t},on:{click:function(a){s.gotoBlogDetail(t)}}}):s._e()}),s._v(" "),a("div",{staticClass:"home-body-content-global"},[a("div",{staticClass:"global-total"},[s._v(s._s(s.blogObj.blogs.length))]),s._v(" "),a("div",{staticClass:"global-name"},[s._v(s._s(s.blogObj.typeName))]),s._v(" "),a("div",{staticClass:"global-btn",on:{click:function(t){s.route("blog")}}},[a("span",[s._v(s._s(s.blogObj.btnName))]),s._v(" "),a("img",{staticClass:"btn-img",attrs:{src:s.rightLightImg}})])])],2)]):s._e(),s._v(" "),s.projectObj.isShow?a("div",{staticClass:"home-body"},[a("div",{staticClass:"home-body-title"},[a("h1",{staticClass:"title-first-color"},[s._v(s._s(s.projectObj.name))]),s._v(" "),a("h1",{staticClass:"title-second-color"},[s._v(" / ")]),s._v(" "),a("h1",{staticClass:"title-third-color"},[s._v(s._s(s.projectObj.englishName))])]),s._v(" "),a("div",{staticClass:"home-body-content"},[a("div",{staticClass:"home-body-content-global"},[a("div",{staticClass:"global-total"},[s._v(s._s(s.projectObj.total))]),s._v(" "),a("div",{staticClass:"global-name"},[s._v(s._s(s.projectObj.typeName))]),s._v(" "),a("div",{staticClass:"global-btn"},[a("span",[s._v(s._s(s.projectObj.btnName))]),s._v(" "),a("img",{staticClass:"btn-img",attrs:{src:s.rightLightImg}})])]),s._v(" "),s._l(s.projectObj.blogs,function(t,e){return a("div",{key:e,staticClass:"home-body-content-box box-left"},[a("img",{staticClass:"box-img",attrs:{src:t.img}}),s._v(" "),a("div",{staticClass:"box-tag"},[a("span",{staticClass:"title-first-color"},[s._v(s._s(t.tag))]),s._v(" "),a("span",{staticClass:"title-third-color"},[s._v(s._s(t.author))]),s._v(" "),a("span",{staticClass:"title-second-color"},[s._v(s._s(t.date))])]),s._v(" "),a("h2",[s._v(s._s(t.title))]),s._v(" "),a("p",[s._v(s._s(t.description))])])})],2)]):s._e(),s._v(" "),a("div",{staticClass:"home-team"},[a("div",{staticClass:"home-team-content"},[a("div",{staticClass:"home-team-left",on:{click:function(t){s.route("about")}}},[a("img",{staticClass:"box-img",attrs:{src:s.teamObj.img}})]),s._v(" "),a("div",{staticClass:"home-team-right"},[a("div",{staticClass:"home-team-title"},[a("h1",{staticClass:"title-first-color"},[s._v(s._s(s.teamObj.name))]),s._v(" "),a("h1",{staticClass:"title-second-color"},[s._v(" / ")]),s._v(" "),a("h1",{staticClass:"title-third-color"},[s._v(s._s(s.teamObj.englishName))])]),s._v(" "),a("div",{staticClass:"home-team-desc"},[s._v(s._s(s.teamObj.description))]),s._v(" "),a("div",{staticClass:"home-team-btn",on:{click:function(t){s.route("recruit")}}},[a("span",[s._v(s._s(s.teamObj.btnName))]),s._v(" "),a("img",{staticClass:"btn-img",attrs:{src:s.rightDarkImg}})])])])])])},staticRenderFns:[]};var Q=a("VU/8")(W,F,!1,function(s){a("uGex")},"data-v-dcc8178e",null).exports,$={props:{navs:Array},data:function(){return{activeTab:null}},created:function(){this.activeTab=this.navs[0]},methods:{isActive:function(s){return s===this.activeTab},changeActive:function(s){this.activeTab=s,this.$emit("click",s)}}},q={render:function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"nav-wrapper"},s._l(s.navs,function(t){return a("div",{key:t,staticClass:"nav-item",class:{active:s.isActive(t)},on:{click:function(a){s.changeActive(t)}}},[s._v("\n    "+s._s(t)+"  \n  ")])}))},staticRenderFns:[]};var H=a("VU/8")($,q,!1,function(s){a("SmpE")},null,null).exports,Y={components:{listNav:H},data:function(){return{navs:[],blogs:_,gotoBlogDetail:o,activeTab:null}},created:function(){this.navs=p()},methods:{route:function(s){this.$router.push({name:s})},changeNav:function(s){this.activeTab=-1!==s.indexOf("全部文章")?null:s}}},V={render:function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"page-body"},[a("list-nav",{attrs:{navs:s.navs},on:{click:s.changeNav}}),s._v(" "),a("kw-row",{staticClass:"blog-container",attrs:{"gutter-x":"30","content-wrap":""}},s._l(s.blogs,function(t,e){return a("kw-col",{directives:[{name:"show",rawName:"v-show",value:!s.activeTab||-1!==s.activeTab.indexOf(t.tag),expression:"!activeTab || activeTab.indexOf(blog.tag) !== -1"}],key:e,staticClass:"blog-item",attrs:{span:"8"}},[a("card",{attrs:{info:t},on:{click:function(a){s.gotoBlogDetail(t)}}})],1)}))],1)},staticRenderFns:[]};var G=a("VU/8")(Y,V,!1,function(s){a("zANk")},null,null).exports,Z={components:{listNav:H},computed:{blogInfo:function(){return s=this.$route.name,(t=_.filter(function(t){return t.name===s}))&&t.length?t[0]:null;var s,t},navs:function(){return p()}},methods:{route:function(s){this.$router.push({name:s})}}},X={render:function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"page-body"},[a("breadcrumb",[a("breadcrumb-item",{on:{click:function(t){s.route("home")}}},[s._v("首页")]),s._v(" "),a("breadcrumb-item",{on:{click:function(t){s.route("blog")}}},[s._v("博客")]),s._v(" "),a("breadcrumb-item",[s._v(s._s(s.blogInfo.title))])],1),s._v(" "),a("div",{staticClass:"blog-title"},[s._v("\n    "+s._s(s.blogInfo.title)+"\n  ")]),s._v(" "),a("div",{staticClass:"blog-info"},[a("div",{staticClass:"blog-info-left"},[a("img",{staticClass:"blog-info-avatar",attrs:{src:s.blogInfo.avatar}})]),s._v(" "),a("div",{staticClass:"blog-info-right"},[a("div",[a("span",{staticClass:"blog-info-author"},[s._v("作者："+s._s(s.blogInfo.author))]),s._v(" "),a("span",[s._v("发表于："+s._s(s.blogInfo.date))])]),s._v(" "),a("div",[a("span",[s._v(s._s(s.blogInfo.tag))])])])]),s._v(" "),a("router-view")],1)},staticRenderFns:[]};var K=a("VU/8")(Z,X,!1,function(s){a("+i+X")},null,null).exports,ss={props:{member:Object,color:String},computed:{avatar:function(){return this.member.avatar+"?imageView2/2/w/500"},style:function(){return"border-color: "+this.color+"; color: "+this.color}},data:function(){return{}},methods:{}},ts={render:function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"member-item"},[a("div",{staticClass:"avatar"},[s.member.avatar?a("img",{attrs:{src:s.avatar}}):a("span",[s._v(s._s(s.member.name[0]))])]),s._v(" "),a("div",{staticClass:"member-info"},[a("div",{staticClass:"h5 mt1 mb3"},[s._v(s._s(s.member.name))]),s._v(" "),a("div",{staticClass:"member-tag"},s._l(s.member.tags,function(t){return a("span",{staticClass:"tag",style:s.style},[s._v(s._s(t))])})),s._v(" "),a("div",{staticClass:"member-desc mt10"},[s._v(s._s(s.member.desc))])])])},staticRenderFns:[]};var as=a("VU/8")(ss,ts,!1,function(s){a("wsse")},"data-v-abe93a20",null).exports,es=[{name:"仲强",tags:["游戏","旅游","写作","……"],desc:"不到黄河心不死，且单身待解救的攻城狮",avatar:"https://fuss10.elemecdn.com/f/96/063b10a5421a933e03160efed5189jpeg.jpeg"},{name:"卢锋",tags:["BB党"],desc:"我就是海上漂着的钢铁巨兽",avatar:"https://fuss10.elemecdn.com/7/6c/18eb085090e996fafcbf73138829cjpeg.jpeg"},{name:"熊国胜",tags:["爱运动","爱吃鸡","爱程序"],desc:"爱江山更爱美人",avatar:"https://fuss10.elemecdn.com/f/46/ab57247386317e8149a97c7ec073ejpeg.jpeg"},{name:"何新远",tags:["克己","守心","变好"],desc:"老实人你走开",avatar:"https://fuss10.elemecdn.com/b/a5/e102f940f3843eed693a2babd21d9jpeg.jpeg"},{name:"毛强强",tags:["80后","没钱花","啃泡面"],desc:"内心是个暖暖的智障的萌萌的撒娇的皮卡丘 ",avatar:"https://fuss10.elemecdn.com/e/61/efdd437fb7f106ea5797d94c85c9fjpeg.jpeg"},{name:"光强",tags:["吃完就躺"],desc:"love&peace",avatar:"https://fuss10.elemecdn.com/4/8b/a693fd0b4a61bb7fbec2bb07b2b66jpeg.jpeg"},{name:"王可心",tags:["吃货"],desc:"会变瘦的",avatar:"https://fuss10.elemecdn.com/4/37/34f154c1082d2f448a96a906cad58jpeg.jpeg"},{name:"覃柯源",tags:["肥宅我还减个屁","吃鸡"],desc:"我只是想吃一把鸡再睡，怎么就天亮了_(:ᗤ」ㄥ)_ ",avatar:"https://fuss10.elemecdn.com/2/7c/92fd798138c66ace02c04b4287cdajpeg.jpeg"},{name:"付超",tags:["烧胎一族"],desc:"像我这样的只有我一个",avatar:"https://fuss10.elemecdn.com/a/27/0ca45bf6cdd415b6eb080c38e6b33jpeg.jpeg"},{name:"邵忆乐",tags:["全主机制霸","小人物"],desc:"羡慕上下左右都比我会生活，我是老年人(逃...",avatar:"https://fuss10.elemecdn.com/0/14/04f364a737cacc1eeb6767cf6c637jpeg.jpeg"},{name:"毛柳柳",tags:["日常宅"],desc:"还好还好～",avatar:"https://fuss10.elemecdn.com/8/4d/284cf45114472e8ed9f514b47f0fajpeg.jpeg"},{name:"徐昊",tags:["装机党","假性手残"],desc:"来来来，你操作个，我看看！^_^",avatar:"https://fuss10.elemecdn.com/6/4d/be393209c21cd70b1234f1f354aafjpeg.jpeg"},{name:"杨骁伟",tags:["任天堂死忠","桌游爱好者"],desc:"一只安静的小羊",avatar:"https://fuss10.elemecdn.com/a/00/c72384177f86827b44d80f8907fbbjpeg.jpeg"},{name:"刘洋",tags:["故作思索"],desc:"喜欢运动做饭的小青年",avatar:"https://fuss10.elemecdn.com/0/d3/5d719d6cdb703c3c23f7a5a53c31cjpeg.jpeg"},{name:"陈婉玉",tags:["好奇星人","究极吃货"],desc:"穿山甲到底说了什么",avatar:"https://fuss10.elemecdn.com/5/da/9437201965ac5b2b7de882c1636d0jpeg.jpeg"},{name:"任海静",tags:["猫奴","喂蚊子","日拱一卒"],desc:"想养一只皮卡丘的烂仔==",avatar:"https://fuss10.elemecdn.com/1/46/0afe327d4a1f3e57eb4de0b8f6bfdjpeg.jpeg"},{name:"刘依琪",tags:["强迫症","细节控"],desc:"没有镜头的摄影师",avatar:"https://fuss10.elemecdn.com/c/34/a3ebd298376ce08c687ce9a7f3037jpeg.jpeg"},{name:"高辉",tags:["没有标签"],desc:"null == undefined",avatar:"https://fuss10.elemecdn.com/c/a3/001260e550796e59123c985c538c3png.png"},{name:"李元元",tags:["二次元"],desc:"重度吸猫患者～(๑•̀ㅁ•́ฅ✧",avatar:"https://cube.elemecdn.com/2/9d/05eff67bd4807d877b47cfd87cf3cpng.png"},{name:"任军庆",tags:["外表低调"],desc:"如果有一天~~~~，我很有钱",avatar:"https://fuss10.elemecdn.com/4/7d/6714082686ccc9ddef69c5a9d7e25jpeg.jpeg"},{name:"张闯",tags:["话癌晚期","垃圾手游肝帝","程序员界的健身嘴强王者"],desc:"孤独患者和话痨的完美矛盾结合体",avatar:"https://fuss10.elemecdn.com/a/82/7c331aaaee8a44a94f1981bda0ccfjpeg.jpeg"},{name:"雷小龙",tags:["运动","不常跑马"],desc:"你们都不知道的烟火",avatar:"https://fuss10.elemecdn.com/4/73/5900750acbaf92d2dc6eb9db9165djpeg.jpeg"},{name:"巫荣",tags:["电影控","爱怼人"],desc:"污污污",avatar:"https://fuss10.elemecdn.com/0/45/a0396fc7662b5e3cab5e4a0bd1de5png.png"},{name:"李璇",tags:["吃","吃","吃"],desc:"除了怂几乎没什么缺点",avatar:"https://fuss10.elemecdn.com/0/45/a0396fc7662b5e3cab5e4a0bd1de5png.png"},{name:"方松",tags:["主机党","猫奴"],desc:"不说了，铲屎去了",avatar:"https://fuss10.elemecdn.com/f/1f/373f3db01a6bbec9f42e3b229ad51jpeg.jpeg"},{name:"李晓倩",tags:["下月光"],desc:"一不小心就下月光了",avatar:"https://fuss10.elemecdn.com/8/c4/a906041fc0568fc61a55f92cf82f3png.png"},{name:"闫海瑞",tags:["隐居青年","宵夜党"],desc:"今天也要加油鸭🦆",avatar:"https://fuss10.elemecdn.com/2/5a/f879177dfc516b45659b68427a33apng.png"},{name:"魏巍",tags:["游戏","动漫"],desc:"有点强迫症的匡威粉。",avatar:"https://fuss10.elemecdn.com/2/41/99d69f034bce8b5be7a2fb85e5f64jpeg.jpeg"},{name:"张丽晶",tags:["B站","玩乐"],desc:"对不了解的东西都感兴趣",avatar:"https://fuss10.elemecdn.com/9/f8/b10d2560e529527ba81139e8c5099jpeg.jpeg"},{name:"邵丁丁",tags:["King Of Fight"],desc:"让你们半管血",avatar:"https://fuss10.elemecdn.com/9/3c/5a75f742b1d28a7d412b9a3f72464jpeg.jpeg"},{name:"周凯丽",tags:["日剧迷","旅游"],desc:"吃饭 睡觉 看剧",avatar:"https://fuss10.elemecdn.com/6/89/a6f855cac34d40fb874a963918ce3jpeg.jpeg"},{name:"王超楠",tags:["摄影大佬","器材党"],desc:"这家伙很懒, 什么都没写...",avatar:"https://fuss10.elemecdn.com/f/07/2fcdeb637ace4d565d9f8439eedcejpeg.jpeg"}];es.sort(function(){return Math.random()-.5});var ns=es,is={components:{memberItem:as},data:function(){return{marker:null,map:null,memberList:ns,keywords:[{title:{CN:"愿景",EN:"Vision"},desc:"Self-improving happily everyday!"},{title:{CN:"使命",EN:"Mission"},desc:"Challenge complicated business, design awesome architecture!"},{title:{CN:"文化",EN:"Culture"},desc:"激情 · 驱动 · 挑战"}],teamImage1:"https://fuss10.elemecdn.com/8/9a/9d167efcdc8a531853473aef2ddadjpeg.jpeg?imageView2/2/w/1500",teamImage2:"https://fuss10.elemecdn.com/7/6f/3e0ca04e5c2ac530f4d8c57d7df6fjpeg.jpeg",teamImage3:"https://fuss10.elemecdn.com/c/bb/01abb47f77622edb738f6ced0839ejpeg.jpeg",teamImage4:"https://fuss10.elemecdn.com/1/82/d6501425cfb6f17a393f4993932b6jpeg.jpeg",teamImage5:"https://fuss10.elemecdn.com/9/e9/a16f75ad03113c54975218d005d88jpeg.jpeg",emazingImage:"https://fuss10.elemecdn.com/7/97/8d581f257d886c522d394a842a351jpeg.jpeg",logo:"https://fuss10.elemecdn.com/4/80/62848476e2f6ca4cf2049dd479637png.png",colorList:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ff9b3b","#ffc107","#ff9800","#ff0722","#795548","#9e9e9e","#607d8b"],eSvg:a("KK5o")}},methods:{route:function(s){this.$router.push({name:s})},randomColor:function(){var s=this.colorList.length,t=parseInt(Math.random()*s);return this.colorList[t]},initPage:function(s){this.marker=new s({iconTheme:"fresh",showPositionPoint:!1,title:"Emazing FE",position:this.map.getCenter(),offset:new AMap.Pixel(-17,-42),map:this.map})},initWindow:function(){var s=this;AMapUI.defineTpl("ui/overlay/SimpleInfoWindow/tpl/container.html",[],function(){return document.getElementById("my-infowin-tpl").innerHTML}),AMapUI.loadUI(["overlay/SimpleInfoWindow"],function(t){var a=new t({offset:new AMap.Pixel(0,-45)});AMap.event.addListener(s.marker,"click",function(){document.location="Mailto:yuanyuan.lish@ele.me?subject=EmazingFE"}),a.open(s.map,s.marker.getPosition())})}},mounted:function(){this.map=new AMap.Map("container",{resizeEnable:!0,dragEnable:!0,zoom:12,center:[121.38089,31.23173]});var s=this;AMapUI.loadUI(["overlay/SimpleMarker"],function(t){s.initPage(t)}),this.$nextTick(function(){s.initWindow()})}},ls={render:function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"page-body"},[a("p",{staticClass:"title"},[s._v("我们是怎样的团队？")]),s._v(" "),s._m(0),s._v(" "),a("div",{staticClass:"about-keywords"},s._l(s.keywords,function(t,e){return a("div",{key:e,staticClass:"keyword"},[a("p",{staticClass:"keywords-title en"},[s._v(s._s(t.title.EN))]),s._v(" "),a("p",{staticClass:"keywords-title cn"},[s._v(s._s(t.title.CN))]),s._v(" "),a("p",{staticClass:"keywords-desc"},[s._v(s._s(t.desc))])])})),s._v(" "),a("div",{staticClass:"about-container"},[a("p",{staticClass:"title"},[s._v("Emazing 的环境")]),s._v(" "),a("kw-row",{staticClass:"env-image-container",attrs:{gutter:"30","content-wrap":""}},[a("kw-col",{staticClass:"image-wrapper",attrs:{span:"16"}},[a("img",{attrs:{src:s.emazingImage}})]),s._v(" "),a("kw-col",{staticClass:"image-wrapper",attrs:{span:"8"}},[a("img",{attrs:{src:s.teamImage5}})]),s._v(" "),a("kw-col",{staticClass:"image-wrapper",attrs:{span:"8"}},[a("img",{attrs:{src:s.teamImage2}})]),s._v(" "),a("kw-col",{staticClass:"image-wrapper",attrs:{span:"8"}},[a("img",{attrs:{src:s.teamImage3}})]),s._v(" "),a("kw-col",{staticClass:"image-wrapper",attrs:{span:"8"}},[a("img",{attrs:{src:s.teamImage4}})])],1),s._v(" "),s._m(1)],1),s._v(" "),a("div",{staticClass:"about-container"},[a("p",{staticClass:"title"},[s._v("Emazing 的我们")]),s._v(" "),a("div",{staticClass:"member-list"},s._l(s.memberList,function(t,e){return a("member-item",{key:e,attrs:{member:t,color:s.randomColor()}})})),s._v(" "),a("div",{staticClass:"about-us-image"},[a("img",{attrs:{src:s.teamImage1}}),s._v(" "),a("div",{staticClass:"join-us",on:{click:function(t){s.route("recruit")}}},[a("span",[s._v("加入我们")])])])]),s._v(" "),a("div",{staticClass:"about-footer"},[a("div",{attrs:{id:"container"}}),s._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"conect-us-box",attrs:{id:"my-infowin-tpl"}},[a("div",{staticClass:"conect-us-wrapper"},[a("div",[a("div",{staticClass:"conect-us"},[a("img",{attrs:{src:s.logo}})]),s._v(" "),a("p",{staticClass:"address"},[s._v("上海市普陀区真北路788号近铁城市广场商场南座")])])])])])])},staticRenderFns:[function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"about-desc"},[t("p",[this._v("我们是饿了么 B 端前端开发团队（Emazing FE ），承担着饿了么 B 端前端基础设施、数十个业务产品的研发。我们有着前沿的技术选型，欢快的工作氛围，多元的团队建设，饱足的成长食粮。在这里有一群年轻有趣的小伙伴，加入我们一起工作一起玩。")])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"about-desc"},[a("p",[s._v("在这里，公司楼下便是商场，方便你逛吃逛吃团建聚餐；公司楼下便是地铁站，再也不用担心出站后的炎炎烈日狂风暴雨；公司内部的办公设施和各种福利也定会让你满意。")]),s._v(" "),a("p",[s._v("在这里，你可以加入若干兴趣小组：健身、约饭、K歌、桌游、电竞、厨师...除了这些，我们还有一年一次的大团建，国内国外随便选，还有若干不定期小团建，工作之余，一起嗨皮。")]),s._v(" "),a("p",[s._v("在这里，你可以听到大牛分享，不仅仅只有技术，还有生活。定期的技术分享和非技术分享，你总会认识有趣的人、有趣的技术、有趣的事。")]),s._v(" "),a("p",[s._v("在这里，你可以选择最前沿的技术选型，参与到前后端中间件、各种各样的轮子、贴合业务的组件库...的开发。所有你想做的，都可以尝试。")]),s._v(" "),a("p",[s._v("在这里，你不仅仅是工程师，扁平化的管理，你可以拥有足够大的空间，成为你想成为的人，做想做的事。")])])}]};var vs=a("VU/8")(is,ls,!1,function(s){a("1BiV")},"data-v-9460bb68",null).exports,cs={components:{listNav:H},data:function(){return{navs:["全部职位","资深前端工程师"],activeTab:"全部职位",jobs:[{name:"资深前端工程师",details:[{title:"部门",desc:"前端开发组"},{title:"城市",desc:"上海"},{title:"人数",desc:"2 人"},{title:"工作年限",desc:"3-5 年"},{title:"侧重",desc:"基础开发"},{title:"发布时间",desc:"2018-12-21"}],responsibilitys:["负责饿了么B端前端相关基础设施建设，参与到组件库和其他面向开发/设计者的产品研发中","积极协助业务开发小伙伴解决技术问题，提高开发效率，改进历史项目","推动必要的新技术的落地，组织好团队的技术发展和成长"],requests:["三年以上的前端开发经验，熟练掌握前端必要的领域知识","熟悉各种场景下的web业务特点，能抽象出合理的业务模型；对平面设计有一定的理解，关注用户体验","英语水平良好，有良好的沟通、学习能力和解决问题的能力","熟悉前端主流框架、构建方式，对工具集和前端工程化有足够理解","关注web开发技术的各个领域，能理解各种技术和工具的能力和边界","能对已有系统进行合理的补全和规划；能思考怎样帮助团队成员提高开发和维护效率"]},{name:"资深前端工程师",details:[{title:"部门",desc:"前端开发组"},{title:"城市",desc:"上海"},{title:"人数",desc:"2 人"},{title:"工作年限",desc:"3-5 年"},{title:"侧重",desc:"业务开发"},{title:"发布时间",desc:"2018-12-21"}],responsibilitys:["负责饿了么B端相关业务开发，善于理解需求，保障功能稳定","对复杂业务能拆解分析，能独立思考技术方案，能抽象出合理的组件或其他工具","参与前端新技术的调研和实践，参与B端基础建设，帮助提升团队开发效率和能力"],requests:["能承担B端复杂的业务开发，和后端一起实现合理的业务模型；能和设计师一起改进页面，提升用户体验","三年以上的前端开发经验，熟练掌握前端必要的领域知识","熟悉前端主流框架、构建方式，对工具集和前端工程化有足够理解","关注web开发技术的发展，能适时推进技术改进；了解web开发其他领域者更好","英语水平良好，有良好的沟通、学习和解决问题的能力","能高效组织团队承担完整的前端业务；善于思考总结，帮助团队成长"]}]}}},rs={render:function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"page-body"},[a("list-nav",{attrs:{navs:s.navs}}),s._v(" "),a("div",{staticClass:"main-container"},[a("div",{staticClass:"job-container"},s._l(s.jobs,function(t,e){return a("div",{key:e,staticClass:"job-wrapper"},[a("p",{staticClass:"job-name"},[s._v(s._s(t.name))]),s._v(" "),s._l(t.details,function(t){return a("div",{staticClass:"job-detail"},[a("p",[a("span",{staticClass:"detail-title"},[s._v(s._s(t.title)+":")]),s._v(" "),a("span",{staticClass:"detail-desc"},[s._v(s._s(t.desc))])])])}),s._v(" "),a("div",{staticClass:"job-desc"},[a("div",{staticClass:"detail-title"},[s._v("岗位职责")]),s._v(" "),a("div",{staticClass:"detail-desc"},[a("ul",s._l(t.responsibilitys,function(t){return a("li",[s._v(s._s(t))])}))])]),s._v(" "),a("div",{staticClass:"job-desc"},[a("div",{staticClass:"detail-title"},[s._v("岗位要求")]),s._v(" "),a("div",{staticClass:"detail-desc"},[a("ul",s._l(t.requests,function(t){return a("li",[s._v(s._s(t))])}))])])],2)})),s._v(" "),a("div",{staticClass:"connect-wrapper"},[a("p",{staticClass:"how-to-apply"},[s._v("如何应聘?")]),s._v(" "),a("p",[s._v("我们的办公地点在上海，希望加入我们的话，可以通过以下四种方式联系我们，我们期待着一起快乐成长！")]),s._v(" "),a("div",[a("p",[s._v("1. 直接将简历发往饿了么 B 端前端开发团队招聘邮箱：")]),s._v(" "),a("kw-link",{attrs:{type:"primary",href:"mailto:keyuan.qin@ele.me"}},[s._v("keyuan.qin@ele.me")])],1),s._v(" "),a("div",[a("p",[s._v("2. 参加饿了么校园招聘：")]),s._v(" "),a("kw-link",{attrs:{type:"primary",target:"_blank",href:"https://campus.ele.me"}},[s._v("https://campus.ele.me")])],1),s._v(" "),a("div",[a("p",[s._v("3. 参加饿了么社会招聘：")]),s._v(" "),a("kw-link",{attrs:{type:"primary",target:"_blank",href:"https://jobs.ele.me"}},[s._v("https://jobs.ele.me")])],1),s._v(" "),s._m(0)])])],1)},staticRenderFns:[function(){var s=this.$createElement,t=this._self._c||s;return t("div",[t("p",[this._v("4. 通过饿了么在职员工内推。")])])}]};var _s=a("VU/8")(cs,rs,!1,function(s){a("kdtD")},"data-v-45149fba",null).exports,os={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"marked"},[a("p",[s._v("首先分享一个有趣的思维实验：")]),s._v(" "),a("blockquote",[a("p",[a("strong",[s._v("缸中之脑")]),s._v(": 假设你此刻，并不在你认为你存在的地方，事实上，你只是邪恶天才的科学实验的对象。你的大脑已经被切离你的身体，放进了实验室里一个盛有维持大脑存活的营养液的缸中。大脑的神经末梢连接在一部超级计算机上，计算机提供给大脑一切你日常生活中的感觉，这使你感到一切正常")]),s._v(" "),a("p",[s._v("你是真实存在的吗？你还是“你”吗？你所了解的世界是你想象的虚构的东西，还是邪恶的科学家构建出来的幻觉？这听起来也许是噩梦般的场景。但你无法以绝对的确定说它是虚假的")]),s._v(" "),a("p",[s._v("即使我们不能肯定，外部世界是如何出现在我们的感官中的，但至少我们可以肯定的是，因为每一次我们怀疑这件事时，必然存在一个“我”正在做出怀疑，所以我们的确是存在着的")]),s._v(" "),a("p",[s._v("这就是“我思故我在”的著名哲学理论")])]),s._v(" "),a("p",[s._v("虽然无法证明我们活在真实还是虚拟的世界，但是“思考能力”至少可以证明我们是真实存在的，也间接的说明人最具核心价值的能力就是思考")]),s._v(" "),a("p",[s._v("作为前端从业者，我很多次面试都会问面试者一个问题：什么是 Promise ? 面试者给的答案很多：有说如何实现的；有说解决了什么问题的；有介绍使用姿势的；但绝大多数人都没给出一个令人满意的答案，或者说绝大多数人在学习技术知识的时候缺乏主动思考能力")]),s._v(" "),a("p",[s._v("计算机科学的发展和进步是离不开对人类活动的借鉴的，所以当我们在计算机术语里看到一个生活中也出现的词语的时候，要去生活中抽象和寻找本质，拿 Proxy 来说，生活中我们常见的有代理人和代理商：")]),s._v(" "),a("ul",[a("li",[s._v("代理人：打官司要委托律师作为诉讼代理人，主体是原告和被告，但是他们打官司的经验和法律知识不如律师专业，所以需要律师这个代理体；在外地工作，如果需要在老家办理证件需要委托亲人作为代理人，因为本人不在家")]),s._v(" "),a("li",[s._v("代理商：餐饮代理加盟、本地生活公司（饿了么、美团）的区域代理商，游戏代理等，主体提供基础能力，代理商基于这些在自己代理的区域去经营。为什么需要代理商呢？说好听点是其在当地有资源、关系、人脉，说不好听就是地头蛇、政府关系户等，但本质是他们有能力降低运营成本，提升效率")])]),s._v(" "),a("p",[s._v("从上面生活中的代理可以总结出其核心要点：主体、代理体、代理体存在的原因和要去做的事。但是，这里存在的原因描述的有点废话嫌疑，再深入思考，这些原因本质是代理体对主体能力的补充和加强。所以最终核心要点有："),a("strong",[s._v("主体、补充或加强主体能力的代理体和要去做的事")]),s._v("，简单说就是在主体和要做的事情之间加一层，用来补充或加强能力")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://user-images.githubusercontent.com/4401831/50821373-fe45ec80-1369-11e9-9514-58c08f7b88ee.jpg"}},[a("img",{attrs:{src:"https://user-images.githubusercontent.com/4401831/50821373-fe45ec80-1369-11e9-9514-58c08f7b88ee.jpg",alt:"default"}})])]),s._v(" "),a("p",[s._v("拿这个模型来解释”缸中之脑“，我们的躯体只是提供行动能力的代理体，真正的主体我是那个存储着记忆信息、拥有属于个人的思维和思考能力的灵魂。假如未来科技可以将灵魂安放在能力更强大的机器上，人类是否可以成为为所欲为的大力士飞来飞去呢？当我们沉浸在游戏的世界里，此时代理你的不是你的躯体，而是那个游戏角色，而此时你拥有游戏角色的各种技能来完成游戏任务。游戏的本质是提供了一个灵魂可以安放的代理体及代理体所在的环境，让人可以更容易取得成就获得快乐")]),s._v(" "),a("p",[s._v("拿这个模型来理解你在计算机世界里见到的代理：")]),s._v(" "),a("ul",[a("li",[s._v("Promise 是对"),a("strong",[s._v("当前不确定、但未来会确定的值")]),s._v("的代理体，Promise 可以让开发者摆脱嵌套地狱")]),s._v(" "),a("li",[s._v("VPN（正向代理） 是一个"),a("strong",[s._v("网络访问者")]),s._v("的代理体，通过其访问网络可以隐藏访问者，更安全。或者有能力访问到正常访问不了的内部网络（翻墙也属于此类）")]),s._v(" "),a("li",[s._v("CDN（反向代理） 是"),a("strong",[s._v("静态资源服务器")]),s._v("的代理体，通过其获取资源可以降低主体服务器压力，提升性能")]),s._v(" "),a("li",[s._v("负载均衡服务器（反向代理）是"),a("strong",[s._v("业务服务器")]),s._v("的代理体，通过其可以将请求均衡分发给处理业务的服务器，这样通过对业务服务器进行扩容就能处理更多高并发请求")])]),s._v(" "),a("p",[a("strong",[s._v("代理模式")]),s._v("：为一个对象提供一个代理对象，并由代理对象控制对原对象的访问。这种控制访问能力能细化到：对象属性的获取、赋值，是否可遍历；对象方法的调用，可以在这个方法调用前后做前后置处理等")]),s._v(" "),a("p",[s._v("例如：")]),s._v(" "),a("pre",[a("code",[a("span",{staticClass:"hljs-keyword"},[s._v("let")]),s._v(" validator = {\n  set: "),a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("(obj, prop, value) {\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("if")]),s._v(" (prop"),a("span",{staticClass:"hljs-operator"},[s._v(" === ")]),s._v("'age') {\n      "),a("span",{staticClass:"hljs-keyword"},[s._v("if")]),s._v(" (!"),a("span",{staticClass:"hljs-module-access"},[a("span",{staticClass:"hljs-module"},[a("span",{staticClass:"hljs-identifier"},[s._v("Number")]),s._v(".")])]),s._v("is"),a("span",{staticClass:"hljs-constructor"},[s._v("Integer("),a("span",{staticClass:"hljs-params"},[s._v("value")]),s._v(")")]),s._v(") {\n        throw "),a("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" "),a("span",{staticClass:"hljs-constructor"},[s._v("TypeError('The "),a("span",{staticClass:"hljs-params"},[s._v("age")]),s._v(" "),a("span",{staticClass:"hljs-params"},[s._v("is")]),s._v(" "),a("span",{staticClass:"hljs-params"},[s._v("not")]),s._v(" "),a("span",{staticClass:"hljs-params"},[s._v("an")]),s._v(" "),a("span",{staticClass:"hljs-params"},[s._v("integer")]),s._v("')")]),s._v(";\n      }\n      "),a("span",{staticClass:"hljs-keyword"},[s._v("if")]),s._v(" (value > "),a("span",{staticClass:"hljs-number"},[s._v("200")]),s._v(") {\n        throw "),a("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" "),a("span",{staticClass:"hljs-constructor"},[s._v("RangeError('The "),a("span",{staticClass:"hljs-params"},[s._v("age")]),s._v(" "),a("span",{staticClass:"hljs-params"},[s._v("seems")]),s._v(" "),a("span",{staticClass:"hljs-params"},[s._v("invalid")]),s._v("')")]),s._v(";\n      }\n    }\n    "),a("span",{staticClass:"hljs-comment"},[s._v("// The default behavior to store the value")]),s._v("\n    obj"),a("span",{staticClass:"hljs-literal"},[s._v("["),a("span",{staticClass:"hljs-identifier"},[s._v("prop")]),s._v("]")]),s._v(" = value;\n    "),a("span",{staticClass:"hljs-comment"},[s._v("// Indicate success")]),s._v("\n    return "),a("span",{staticClass:"hljs-literal"},[s._v("true")]),s._v(";\n  }\n};\n\n"),a("span",{staticClass:"hljs-keyword"},[s._v("let")]),s._v(" person = "),a("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" "),a("span",{staticClass:"hljs-constructor"},[s._v("Proxy({}, "),a("span",{staticClass:"hljs-params"},[s._v("validator")]),s._v(")")]),s._v(";\nperson.age = "),a("span",{staticClass:"hljs-number"},[s._v("100")]),s._v(";\nconsole.log(person.age); "),a("span",{staticClass:"hljs-comment"},[s._v("// 100")]),s._v("\nperson.age = 'young'; "),a("span",{staticClass:"hljs-comment"},[s._v("// Throws an exception")]),s._v("\nperson.age = "),a("span",{staticClass:"hljs-number"},[s._v("300")]),s._v("; "),a("span",{staticClass:"hljs-comment"},[s._v("// Throws an exception")])])]),a("p",[s._v("代理模式的核心是通过代理对象扩展对主体对象访问时的控制能力，Vue 和 Mobx 实现对数据变更监听的原理本质就是代理模式")]),s._v(" "),a("p",[a("strong",[s._v("关于 AOP")]),s._v("\n在 "),a("a",{attrs:{href:"https://github.com/rainjay/blog/issues/5"}},[s._v("深入浅出 Javascript Decorators 和 AOP 编程")]),s._v(" 一文中有对 AOP 编程做了介绍，也详细讲解了 Javascript Decorators 提供的 AOP 能力，Proxy 也可以提供 AOP 能力，区别是：Proxy 具有被代理对象的控制权，AOP 切入功能也是基于这种控制能力的。而 Decorator 只能为类属性增加一层装饰，以加强被装饰属性的功能，最终作用于实例化出来的对象上")])])}]},ps={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"marked"},[a("p",[s._v("编程的世界有许多套路，可以让我们的程序设计更加优雅")]),s._v(" "),a("h2",{attrs:{id:"monkey-patch"}},[a("a",{attrs:{href:"https://en.wikipedia.org/wiki/Monkey_patch"}},[s._v("Monkey patch")])]),s._v(" "),a("p",[s._v("形象比喻一下，假如你的代码里有一个猴子对象，猴子走路，呲牙和叫等都跟你预期中的猴子行为一致。但是突然有一天你需要这个猴子会像鸭子一样叫，该怎么办？")]),s._v(" "),a("p",[s._v("映射到前端代码，最先能想到的就是你正常的业务代码，突然有一天产品经理告诉你需要加30个埋点，而且这些埋点的逻辑还很多，你不想这些非业务逻辑代码出现在业务代码中，该怎么办？")]),s._v(" "),a("p",[s._v("这里我先讲一个笑话：")]),s._v(" "),a("blockquote",[a("p",[s._v("为了测试美国、日本、中国三地警察的实力，联合国将三只兔子放在三个森林中，看三地警察谁先找出兔子。任务：找出兔子。美国和日本警察都兴师动众地在森林里找，结果都是到了晚上无功而返。最后是中国警察，先是玩了一天王者荣耀，黄昏时一个拿着一根警棍进入森林，没五分钟，听到森林里传来一阵动物的惨叫，中国警察抽着烟有说有笑的出来，后面拖着一只鼻青脸肿的熊，熊奄奄一息的用兔子的叫声说：“不要再打了，我就是兔子！”")])]),s._v(" "),a("p",[s._v("我们在写代码的时候经常采用和这个笑话一样的套路。你代码里的一只熊，哪天被动态改了一个属性后就可能变成像熊一样走且像兔子一样跳的熊兔了")]),s._v(" "),a("p",[s._v("JavaScript 这种动态语言天生有在运行时对属性进行动态替换或修改的能力，这就叫做猴子补丁。比如数组缺少一个有用的方法，你自己就可以增加它")]),s._v(" "),a("pre",[a("code",[a("span",{staticClass:"hljs-built_in"},[s._v("Array")]),s._v(".prototype.split = "),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),a("span",{staticClass:"hljs-params"},[s._v("i")]),s._v(") ")]),s._v("{\n  "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" [ "),a("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(".slice("),a("span",{staticClass:"hljs-number"},[s._v("0")]),s._v(", i), "),a("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(".slice(i) ]\n}")])]),a("p",[s._v("你也可以修改原有属性，扩展功能。比如一个常见的需求：为了追求前端项目的稳定性，我们往往需要对运行时的代码进行监控并向服务器上报异常信息。浏览器中 Javascript 的运行时包含两种：")]),s._v(" "),a("ol",[a("li",[s._v("浏览器加载并执行 JavaScript 代码")]),s._v(" "),a("li",[s._v("各种方式触发的回调执行，比如 "),a("code",[s._v("addEventListener")]),s._v(", "),a("code",[s._v("setTimeout")]),s._v(", "),a("code",[s._v("ajax/fetch")]),s._v(", "),a("code",[s._v("Promise")]),s._v(" 等 WebApis 触发或你自己实现的 "),a("code",[s._v("EventEmitter")]),s._v("触发")])]),s._v(" "),a("blockquote",[a("p",[s._v("关于 JavaScript 运行时可以参考 "),a("a",{attrs:{href:"https://github.com/latentflip/loupe"}},[s._v("loupe")]),s._v(" , "),a("code",[s._v("It is amazing!")])])]),s._v(" "),a("p",[s._v("1 是 JavaScirpt 脚本里存在语法错误，比较容易被发现。问题基本都出在 2 中，我们可以通过window.onerror来获取错误信息，但这些错误信息不一定能够满足需求，所以会有人这样操作：")]),s._v(" "),a("pre",[a("code",[a("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" _setTimeout = "),a("span",{staticClass:"hljs-built_in"},[s._v("window")]),s._v(".setTimeout\n"),a("span",{staticClass:"hljs-built_in"},[s._v("window")]),s._v(".setTimeout = "),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),a("span",{staticClass:"hljs-params"},[s._v("cb, timeout")]),s._v(") ")]),s._v("{\n  "),a("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" args = "),a("span",{staticClass:"hljs-built_in"},[s._v("Array")]),s._v(".prototype.slice.call("),a("span",{staticClass:"hljs-built_in"},[s._v("arguments")]),s._v(", "),a("span",{staticClass:"hljs-number"},[s._v("2")]),s._v(")\n  "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" _setTimeout("),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),a("span",{staticClass:"hljs-params"}),s._v(") ")]),s._v("{\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("try")]),s._v(" {\n      cb(...args)\n    } "),a("span",{staticClass:"hljs-keyword"},[s._v("catch")]),s._v(" (error) {\n      "),a("span",{staticClass:"hljs-comment"},[s._v("// 对 error 进行加工后上报给服务器")]),s._v("\n      reportError(e)\n      "),a("span",{staticClass:"hljs-keyword"},[s._v("throw")]),s._v(" error\n    }\n  }, timeout)\n}")])]),a("p",[s._v("更改后的 setTimeout 对于使用者来说并没有任何区别，但我们已经悄悄地扩展了 setTimeout 的功能。在JavaScript 的世界里 Decorator 和 AOP 编程都是基于这种可以动态修改原有属性的能力实现的")]),s._v(" "),a("h2",{attrs:{id:"higher-order-function"}},[a("a",{attrs:{href:"https://en.wikipedia.org/wiki/Higher-order_function"}},[s._v("Higher Order Function")])]),s._v(" "),a("p",[s._v("高阶函数接受一个或多个函数，并返回一个函数。我们经常用到的高阶函数有："),a("code",[s._v("once")]),s._v(", "),a("code",[s._v("debounce")]),s._v(", "),a("code",[s._v("memoize")]),s._v(", "),a("code",[s._v("fluent")]),s._v("等，下面通过 fluent 来说明")]),s._v(" "),a("pre",[a("code",[a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" "),a("span",{staticClass:"hljs-title"},[s._v("fluent")]),a("span",{staticClass:"hljs-params"},[s._v("(fn)")]),s._v(" ")]),s._v("{\n  "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-keyword"},[s._v("function")]),a("span",{staticClass:"hljs-params"},[s._v("("),a("span",{staticClass:"hljs-rest_arg"},[s._v("...args")]),s._v(")")]),s._v(" ")]),s._v("{\n    fn.apply("),a("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(", args)\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v("\n  }\n}\n\n"),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" "),a("span",{staticClass:"hljs-title"},[s._v("Person")]),a("span",{staticClass:"hljs-params"},[s._v("()")]),s._v(" ")]),s._v("{}\n\nPerson.prototype.setName = fluent("),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-keyword"},[s._v("function")]),a("span",{staticClass:"hljs-params"},[s._v("(first, last)")]),s._v(" ")]),s._v("{\n  "),a("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(".first = first\n  "),a("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(".last = last\n})\n\nPerson.prototype.sayName = fluent("),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-keyword"},[s._v("function")]),a("span",{staticClass:"hljs-params"},[s._v("()")]),s._v(" ")]),s._v("{\n  console.log("),a("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(".first, "),a("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(".last)\n})\n\n"),a("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" person = "),a("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" Person()\n\nperson\n  .setName("),a("span",{staticClass:"hljs-string"},[s._v("'Jone'")]),s._v(", "),a("span",{staticClass:"hljs-string"},[s._v("'Doe'")]),s._v(")\n  .sayName()\n  .setName("),a("span",{staticClass:"hljs-string"},[s._v("'John'")]),s._v(", "),a("span",{staticClass:"hljs-string"},[s._v("'Doe'")]),s._v(")\n  .sayName()")])]),a("p",[s._v("高阶函数和我们在上面 "),a("code",[s._v("Monkey patch")]),s._v(" 中修改 window.setTimout 思路是一样的，或者说这就是我们标准非侵入地动态扩展属性的方法：在执行原有代码的基础上再扩展所需要的功能。上面提到的埋点问题，就可以通过这种方式做到悄悄地埋点，而不会影响任何主业务代码")]),s._v(" "),a("h2",{attrs:{id:"decorator-pattern"}},[a("a",{attrs:{href:"https://en.wikipedia.org/wiki/Decorator_pattern"}},[s._v("Decorator pattern")])]),s._v(" "),a("p",[s._v("Decorator模式：动态将职责附加到对象上。如果要扩展功能，装饰者提供了比继承更具弹性的代替方案。装饰者模式遵循了两个设计原则：")]),s._v(" "),a("blockquote",[a("ol",[a("li",[s._v("Favor composition over inheritance")]),s._v(" "),a("li",[s._v("The Open-Closed Principle: Classes should be open for extension, but closed for modification")])])]),s._v(" "),a("p",[s._v("装饰者模式的要点:")]),s._v(" "),a("ol",[a("li",[s._v("装饰者和被装饰对象有相同的超类型")]),s._v(" "),a("li",[s._v("可以用一个或多个装饰者包装一个对象")]),s._v(" "),a("li",[s._v("装饰者可以在被装饰者所委托的行为之前或之后，加上自己的行为，以达到特定的目的")]),s._v(" "),a("li",[s._v("对象可以在任何时候被装饰，所以可以在运行时动态的，不限量的用你喜欢的装饰者来装饰对象")]),s._v(" "),a("li",[s._v("装饰模式的用意是保持接口并增加对象的职责")])]),s._v(" "),a("p",[s._v("下面看一个例子来说明：")]),s._v(" "),a("pre",[a("code",[a("span",{staticClass:"hljs-comment"},[s._v("// What we're going to decorate")]),s._v("\n"),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" "),a("span",{staticClass:"hljs-title"},[s._v("MacBook")]),s._v("("),a("span",{staticClass:"hljs-params"}),s._v(") ")]),s._v("{\n  "),a("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(".cost = "),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),a("span",{staticClass:"hljs-params"}),s._v(") ")]),s._v("{ "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),a("span",{staticClass:"hljs-number"},[s._v("997")]),s._v(" }\n  "),a("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(".screenSize = "),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),a("span",{staticClass:"hljs-params"}),s._v(") ")]),s._v("{ "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),a("span",{staticClass:"hljs-number"},[s._v("13.3")]),s._v(" }\n}\n\n"),a("span",{staticClass:"hljs-comment"},[s._v("/* Decorator 1 */")]),s._v("\n"),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" "),a("span",{staticClass:"hljs-title"},[s._v("Memory")]),s._v("("),a("span",{staticClass:"hljs-params"},[s._v("macbook")]),s._v(") ")]),s._v("{\n  "),a("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" v = macbook.cost()\n  macbook.cost = "),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),a("span",{staticClass:"hljs-params"}),s._v(") ")]),s._v("{\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" v + "),a("span",{staticClass:"hljs-number"},[s._v("75")]),s._v("\n  }\n}\n "),a("span",{staticClass:"hljs-comment"},[s._v("/* Decorator 2 */")]),s._v("\n"),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" "),a("span",{staticClass:"hljs-title"},[s._v("Engraving")]),s._v("("),a("span",{staticClass:"hljs-params"},[s._v(" macbook ")]),s._v(") ")]),s._v("{\n   "),a("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" v = macbook.cost()\n   macbook.cost = "),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),a("span",{staticClass:"hljs-params"}),s._v(") ")]),s._v("{\n     "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v("  v + "),a("span",{staticClass:"hljs-number"},[s._v("200")]),s._v("\n  }\n}\n\n"),a("span",{staticClass:"hljs-comment"},[s._v("/* Decorator 3 */")]),s._v("\n"),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" "),a("span",{staticClass:"hljs-title"},[s._v("Insurance")]),s._v("("),a("span",{staticClass:"hljs-params"},[s._v(" macbook ")]),s._v(") ")]),s._v("{\n   "),a("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" v = macbook.cost()\n   macbook.cost = "),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),a("span",{staticClass:"hljs-params"}),s._v(") ")]),s._v("{\n     "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v("  v + "),a("span",{staticClass:"hljs-number"},[s._v("250")]),s._v("\n  }\n}\n\n"),a("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" mb = "),a("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" MacBook()\nMemory(mb)\nEngraving(mb)\nInsurance(mb)\n"),a("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log(mb.cost()) "),a("span",{staticClass:"hljs-comment"},[s._v("//1522")]),s._v("\n"),a("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log(mb.screenSize()) "),a("span",{staticClass:"hljs-comment"},[s._v("//13.3")])])]),a("p",[s._v("在这个例子中：")]),s._v(" "),a("ol",[a("li",[s._v("MacBook 对象以及所有的 decorator 返回的对象都拥有共同的 cost 方法")]),s._v(" "),a("li",[s._v("上面例子中一共有三个 decorator, 如果有需要，可以继续增添任意数量的 Decorator")]),s._v(" "),a("li",[s._v("每个 decorator 都会在执行所被委托的 cost 方法之后，加上自己的行为")]),s._v(" "),a("li",[s._v("我们最终并没有修改原有的 MacBook 的行为，基础 MacBook 的 cost 方法依旧会正常执行，添加内存、加雕刻并上了保险后我们每 decorate 一次就会增添对应的 cost")])]),s._v(" "),a("p",[s._v("调用过程如下：\n"),a("a",{attrs:{href:"https://user-images.githubusercontent.com/4401831/50874559-6a266480-13ff-11e9-963a-7973236b7ffd.png"}},[a("img",{attrs:{src:"https://user-images.githubusercontent.com/4401831/50874559-6a266480-13ff-11e9-963a-7973236b7ffd.png",alt:"eb7ed76c6129ecf285ed9b48f6043png"}})])]),s._v(" "),a("blockquote",[a("p",[s._v("Decorator 模式和通过高阶函数里动态修改原有属性本质是一样的，都是在执行了被委托的行为的基础上加了自己的行为。高级函数被委托的行为是传入的函数，Decorator 被委托的行为是被包装对象里相同名字的函数")])]),s._v(" "),a("p",[s._v("在我们日常开发过程中，Decorator 模式常见的使用场景有： "),a("code",[s._v("logging")]),s._v(", "),a("code",[s._v("Add Burying Point")]),s._v(", "),a("code",[s._v("Apply Formatting")]),s._v(", "),a("code",[s._v("Apply Permission Checks")]),s._v(", "),a("code",[s._v("Form validating")]),s._v(", "),a("code",[s._v("Block Overriding of methods")]),s._v(", "),a("code",[s._v("Timing Functions")]),s._v(", "),a("code",[s._v("Rate-Limiting")]),s._v(" 和任何你不想放在核心业务代码中的行为")]),s._v(" "),a("p",[s._v("到这里会有人抱怨这种方式写代码体验很差，的确如此。好在 JavaScript 发展迅速， JavaScript Decorators 目前已经处于 "),a("a",{attrs:{href:"https://tc39.github.io/proposal-decorators/"}},[s._v("Stage 2 Draft")]),s._v(" , 借助 "),a("a",{attrs:{href:"http://babeljs.io/"}},[s._v("Babel")]),s._v(" 以及 "),a("a",{attrs:{href:"http://babeljs.io/docs/plugins/transform-decorators/"}},[s._v("babel-plugin-transform-decorators")]),s._v(" 我们已经可以在项目中使用 Decorators 来改善我们的代码")]),s._v(" "),a("h2",{attrs:{id:"javascript-decorators"}},[a("a",{attrs:{href:"https://github.com/tc39/proposal-decorators"}},[s._v("JavaScript Decorators")])]),s._v(" "),a("p",[s._v("JavaScript Decorators 和高阶函数并没有什么区别，只是提供了一种更优雅的方式，举个例子：")]),s._v(" "),a("pre",[a("code",[a("span",{staticClass:"hljs-variable"},[s._v("@log")]),s._v("()\nclass Example {\n  "),a("span",{staticClass:"hljs-variable"},[s._v("@time")]),s._v("("),a("span",{staticClass:"hljs-string"},[s._v("'tag'")]),s._v(")\n  "),a("span",{staticClass:"hljs-variable"},[s._v("@readonly")]),s._v("\n  doSomething() {}\n}")])]),a("p",[s._v("上面的例子中有两种类型的 Decorator: "),a("code",[s._v("Class decorators")]),s._v(" 和 "),a("code",[s._v("Class property decorators")]),s._v(", 其中：")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://github.com/log"}},[s._v("@log")]),s._v(" 是 Class decorator, 可以记录每一次对 Example 类的 access")]),s._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/time"}},[s._v("@time")]),s._v(" 是 Class property decorator, 可以记录 doSomething 方法执行需要的时间并打上一个唯一的 tag")]),s._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/readonly"}},[s._v("@readonly")]),s._v(" 是 Class property decorator, 用来将 doSomething 设置为只读属性")])]),s._v(" "),a("p",[s._v("你只需要将以 "),a("code",[s._v("@")]),s._v(" 为前缀的符号置于被装饰的代码之前即可。这些 decorator 方法在运行时有能力按照需求动态修改原有属性，不会侵入核心代码，且可读性非常高，非常优雅！下面是这些 decorator 的实现：")]),s._v(" "),a("pre",[a("code",[a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" "),a("span",{staticClass:"hljs-title"},[s._v("log")]),s._v("("),a("span",{staticClass:"hljs-params"},[s._v("Class")]),s._v(") ")]),s._v("{\n  "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),a("span",{staticClass:"hljs-function"},[s._v("("),a("span",{staticClass:"hljs-params"},[s._v("...args")]),s._v(") =>")]),s._v(" {\n    "),a("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log(args)\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" Class(...args)\n  }\n}\n\n"),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" "),a("span",{staticClass:"hljs-title"},[s._v("time")]),s._v("("),a("span",{staticClass:"hljs-params"},[s._v("target, name, descriptor")]),s._v(") ")]),s._v("{\n  "),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" fn = descriptor.value\n  "),a("span",{staticClass:"hljs-keyword"},[s._v("if")]),s._v(" ("),a("span",{staticClass:"hljs-keyword"},[s._v("typeof")]),s._v(" fn === "),a("span",{staticClass:"hljs-string"},[s._v("'function'")]),s._v(") {\n    descriptor.value = "),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),a("span",{staticClass:"hljs-params"},[s._v("...args")]),s._v(") ")]),s._v("{\n      "),a("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log("),a("span",{staticClass:"hljs-string"},[s._v("`Time begin: "),a("span",{staticClass:"hljs-subst"},[s._v("${"),a("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" "),a("span",{staticClass:"hljs-built_in"},[s._v("Date")]),s._v("()}")]),s._v("`")]),s._v(")\n      "),a("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" result = fn.apply("),a("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(", args)\n      "),a("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log("),a("span",{staticClass:"hljs-string"},[s._v("`Time end: "),a("span",{staticClass:"hljs-subst"},[s._v("${"),a("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" "),a("span",{staticClass:"hljs-built_in"},[s._v("Date")]),s._v("()}")]),s._v("`")]),s._v(")\n      "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" result\n    }\n  }\n  "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" descriptor\n}\n\n"),a("span",{staticClass:"hljs-comment"},[s._v("// time with unique tag")]),s._v("\n"),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" "),a("span",{staticClass:"hljs-title"},[s._v("time")]),s._v("("),a("span",{staticClass:"hljs-params"},[s._v("tag")]),s._v(") ")]),s._v("{\n  "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),a("span",{staticClass:"hljs-params"},[s._v("target, name, descriptor")]),s._v(") ")]),s._v("{\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" fn = descriptor.value\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("if")]),s._v(" ("),a("span",{staticClass:"hljs-keyword"},[s._v("typeof")]),s._v(" fn === "),a("span",{staticClass:"hljs-string"},[s._v("'function'")]),s._v(") {\n      descriptor.value = "),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),a("span",{staticClass:"hljs-params"},[s._v("...args")]),s._v(") ")]),s._v("{\n        "),a("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log("),a("span",{staticClass:"hljs-string"},[s._v("`"),a("span",{staticClass:"hljs-subst"},[s._v("${tag}")]),s._v(" time begin: "),a("span",{staticClass:"hljs-subst"},[s._v("${"),a("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" "),a("span",{staticClass:"hljs-built_in"},[s._v("Date")]),s._v("()}")]),s._v("`")]),s._v(")\n        "),a("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" result = fn.apply("),a("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(", args)\n        "),a("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log("),a("span",{staticClass:"hljs-string"},[s._v("`"),a("span",{staticClass:"hljs-subst"},[s._v("${tag}")]),s._v(" time end: "),a("span",{staticClass:"hljs-subst"},[s._v("${"),a("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" "),a("span",{staticClass:"hljs-built_in"},[s._v("Date")]),s._v("()}")]),s._v("`")]),s._v(")\n        "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" result\n      }\n    }\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" descriptor\n  }\n}\n\n"),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" "),a("span",{staticClass:"hljs-title"},[s._v("readonly")]),s._v("("),a("span",{staticClass:"hljs-params"},[s._v("target, name, descriptor")]),s._v(") ")]),s._v("{\n  descriptor.writable = "),a("span",{staticClass:"hljs-literal"},[s._v("false")]),s._v("\n  "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" descriptor\n}")])]),a("h3",{attrs:{id:"class-property-decorators"}},[s._v("Class property decorators")]),s._v(" "),a("p",[s._v("Property decorators 应用于 class 中一个成员，无论成员是 properties, methods, getters 还是 setters。这种 decorator 函数有三个参数：")]),s._v(" "),a("ul",[a("li",[s._v("target - 被 decorate 成员所在的类")]),s._v(" "),a("li",[s._v("name – 被 decorate 成员的名字")]),s._v(" "),a("li",[s._v("descriptor - 被 decorate 成员的 descriptor, 这里的 descriptor 其实就是传给 "),a("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty"}},[s._v("Object.defineProperty")]),s._v("的那个 descriptor")])]),s._v(" "),a("p",[s._v("可以修改 descriptor 意味着我们有能力修改一个属性的一切，然后将修改后的 descriptor 返回即可。 readonly 通过将 descriptor 的 writable 设为 false 从而将属性设置为只读。 time 将原有的行为 (descriptor.value) 包在自己的函数里执行，并在执行前后记录了时间，从而悄悄地扩展了原有函数的功能，且不影响原有函数的正常使用")]),s._v(" "),a("h3",{attrs:{id:"class-decorators"}},[s._v("Class decorators")]),s._v(" "),a("p",[s._v("Class decorators 的参数只有一个，就是当前被装饰的类，返回一个新的构造函数来替换原来的类。Class decorators 用的并不是很多，上文中的 "),a("a",{attrs:{href:"https://github.com/log"}},[s._v("@log")]),s._v(" 使用的效果如下：")]),s._v(" "),a("pre",[a("code",[a("span",{staticClass:"hljs-meta"},[s._v("@log")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("class")]),s._v(" Example {\n  "),a("span",{staticClass:"hljs-keyword"},[s._v("constructor")]),s._v("("),a("span",{staticClass:"hljs-params"},[s._v("name, age")]),s._v(") {\n  }\n}\n\n"),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" e = "),a("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" Example("),a("span",{staticClass:"hljs-string"},[s._v("'Graham'")]),s._v(", "),a("span",{staticClass:"hljs-number"},[s._v("34")]),s._v(");\n"),a("span",{staticClass:"hljs-comment"},[s._v("// [ 'Graham', 34 ]")]),s._v("\n"),a("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log(e);\n"),a("span",{staticClass:"hljs-comment"},[s._v("// Example {}")])])]),a("p",[s._v("下面我们用 decorator 来改写高阶函数中的 fluent")]),s._v(" "),a("pre",[a("code",[a("span",{staticClass:"hljs-comment"},[s._v("// @decorator")]),s._v("\n"),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" "),a("span",{staticClass:"hljs-title"},[s._v("decorate")]),a("span",{staticClass:"hljs-params"},[s._v("(target, name, descriptor)")]),s._v(" ")]),s._v("{\n  "),a("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" fn = descriptor.value\n  "),a("span",{staticClass:"hljs-keyword"},[s._v("if")]),s._v(" ("),a("span",{staticClass:"hljs-keyword"},[s._v("typeof")]),s._v(" fn === "),a("span",{staticClass:"hljs-string"},[s._v("'function'")]),s._v(") {\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" fn = descriptor.value\n    descriptor.value = "),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-keyword"},[s._v("function")]),a("span",{staticClass:"hljs-params"},[s._v("("),a("span",{staticClass:"hljs-rest_arg"},[s._v("...args")]),s._v(")")]),s._v(" ")]),s._v("{\n      fn.apply("),a("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(", args)\n      "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v("\n    }\n  }\n  "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" descriptor\n}\n\n"),a("span",{staticClass:"hljs-class"},[a("span",{staticClass:"hljs-keyword"},[s._v("class")]),s._v(" "),a("span",{staticClass:"hljs-title"},[s._v("Person")]),s._v(" ")]),s._v("{\n  @decorate\n  setName(first, last) {\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(".first = first\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(".last = last\n  }\n\n  @decorate\n  sayName() {\n    console.log("),a("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(".first, "),a("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(".last)\n  }\n}\n\n"),a("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" person = "),a("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" Person()\nperson\n  .setName("),a("span",{staticClass:"hljs-string"},[s._v("'Jone'")]),s._v(", "),a("span",{staticClass:"hljs-string"},[s._v("'Doe'")]),s._v(")\n  .sayName()\n  .setName("),a("span",{staticClass:"hljs-string"},[s._v("'John'")]),s._v(", "),a("span",{staticClass:"hljs-string"},[s._v("'Doe'")]),s._v(")\n  .sayName()")])]),a("blockquote",[a("p",[s._v("补充一点，如果有多个 decorators 按照从上到下的顺序同时作用的话，实际执行过程也是按照从上到下顺序执行的")])]),s._v(" "),a("h2",{attrs:{id:"aop"}},[a("a",{attrs:{href:"https://en.wikipedia.org/wiki/AOP"}},[s._v("AOP")])]),s._v(" "),a("p",[s._v("AOP(Aspect-Oriented Programming)：面向切面的编程，是对面向对象编程（OOP）的补充。面向对象是纵向编程，继承、封装和多态，而面向切面编程通过提供另外一种思考程序结构的途径来补充面向对象的不足。在OOP中模块化的关键单元是类（class），而在AOP中模块化的单元则是切面，切面能对关注点进行模块化扩展")]),s._v(" "),a("p",[s._v("通俗地讲，就是上文中我们做的事情都属于切面的横向扩展。一次表单提交，有正常的业务提交过程，但我们想在这个提交过程的横向加一个表单验证。或者一个正常的业务中，我们希望横向添加一些埋点功能，同时再横向添加运行时错误信息收集的功能，同时还能够验证一下是否有操作权限等，这些都是面向切面编程")]),s._v(" "),a("p",[s._v("面向切面编程是 "),a("code",[s._v("Separation of concerns")]),s._v(", "),a("code",[s._v("Favor composition over inheritance")]),s._v(" 和 "),a("code",[s._v("The Open-Closed Principle")]),s._v(" 等设计原则的良好实践，是我们在编写代码的过程经常要用到的一种开发技术。如果你遇到了需要从外部增加一些行为，进而合并或修改既有行为，或者把业务逻辑代码和处理琐碎事务的代码分离开，以便能够分离复杂度等的业务场景，请一定要用好这种编程设计思想")]),s._v(" "),a("p",[s._v("现在，你可以使用 JavaScript Decorators 来更优雅地实践AOP编程，还有什么理由不行动起来呢？")]),s._v(" "),a("p",[s._v("最后，用 JavaScript Decorators 实现一个我们开发经常要用到的表单验证过程，真实的业务场景会比这里复杂许多，但这些代码用来解释并加深你对 AOP 编程的理解已经足够了")]),s._v(" "),a("pre",[a("code",[s._v("var validateRules = {\n  expectNumber("),a("span",{staticClass:"hljs-keyword"},[s._v("value")]),s._v(") {\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("Object")]),s._v(".prototype.toString."),a("span",{staticClass:"hljs-keyword"},[s._v("call")]),s._v("("),a("span",{staticClass:"hljs-keyword"},[s._v("value")]),s._v(") === "),a("span",{staticClass:"hljs-string"},[s._v("'[object Number]'")]),s._v("\n  },\n  maxLength("),a("span",{staticClass:"hljs-keyword"},[s._v("value")]),s._v(") {\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("value")]),s._v(" <= "),a("span",{staticClass:"hljs-number"},[s._v("30")]),s._v("\n  }\n}\n\n"),a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("validate")]),s._v("("),a("span",{staticClass:"hljs-keyword"},[s._v("value")]),s._v(") {\n  "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("Object")]),s._v(".keys(validateRules)\n    .every(key => validateRules[key]("),a("span",{staticClass:"hljs-keyword"},[s._v("value")]),s._v("))\n}\n\n"),a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" enableValidate(target, "),a("span",{staticClass:"hljs-type"},[s._v("name")]),s._v(", descriptor) {\n  const fn = descriptor."),a("span",{staticClass:"hljs-keyword"},[s._v("value")]),s._v("\n  "),a("span",{staticClass:"hljs-keyword"},[s._v("if")]),s._v(" (typeof fn === "),a("span",{staticClass:"hljs-string"},[s._v("'function'")]),s._v(") {\n    descriptor."),a("span",{staticClass:"hljs-keyword"},[s._v("value")]),s._v(" = "),a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),a("span",{staticClass:"hljs-keyword"},[s._v("value")]),s._v(") {\n      "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("validate")]),s._v("("),a("span",{staticClass:"hljs-keyword"},[s._v("value")]),s._v(")\n        ? fn.apply(this, ["),a("span",{staticClass:"hljs-keyword"},[s._v("value")]),s._v("])\n        : console.error("),a("span",{staticClass:"hljs-string"},[s._v("'Form validate failed!'")]),s._v(")\n    }\n  }\n  "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" descriptor\n}\n\n"),a("span",{staticClass:"hljs-keyword"},[s._v("class")]),s._v(" Form {\n  @enableValidate\n  send("),a("span",{staticClass:"hljs-keyword"},[s._v("value")]),s._v(") {\n    console.log("),a("span",{staticClass:"hljs-string"},[s._v("'This is send action'")]),s._v(", "),a("span",{staticClass:"hljs-keyword"},[s._v("value")]),s._v(")\n  }\n}\n\nvar form = "),a("span",{staticClass:"hljs-built_in"},[s._v("new")]),s._v(" Form()\nform.send("),a("span",{staticClass:"hljs-number"},[s._v("44")]),s._v(') // "Form validate failed!"\nform.send('),a("span",{staticClass:"hljs-string"},[s._v("'12'")]),s._v(') // "Form validate failed!"\nform.send('),a("span",{staticClass:"hljs-number"},[s._v("12")]),s._v(')  // "This is send action" '),a("span",{staticClass:"hljs-number"},[s._v("12")])])])])}]},hs={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"marked"},[a("p",[s._v("前端开发者一般很少能从一个更高的角度来看待通信这件事情，希望本文可以引领大家深入探究一下通信，并找到解决前端通信问题的通用思路")]),s._v(" "),a("h3",{attrs:{id:"什么是通信？"}},[s._v("什么是通信？")]),s._v(" "),a("p",[s._v("要点："),a("strong",[s._v("1. 发送者和接收者 2. 传输媒介 3. 传输的数据 4. 传输格式（协议）")]),s._v("\n目的："),a("strong",[s._v("1. 同步数据 2. 传递指令(执行的方法)")])]),s._v(" "),a("p",[s._v("浏览器向服务器发送一次 "),a("code",[s._v("GET")]),s._v(" 请求，会将请求的数据同步给服务器，服务器会根据请求数据执行一些操作后，再决定将哪些数据同步给浏览器。这是为了在浏览器里同步服务器上的数据")]),s._v(" "),a("p",[s._v("遥控器与无人机通信，会将一些指令（本质就是无人机自身可以执行的方法）发送给无人机，无人机去执行，然后做出相应的动作。这是为了传递指令")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://user-images.githubusercontent.com/4401831/31727812-3845d60a-b3f0-11e7-9889-e2c6525a0619.png"}},[a("img",{attrs:{src:"https://user-images.githubusercontent.com/4401831/31727812-3845d60a-b3f0-11e7-9889-e2c6525a0619.png",alt:"shared-storage-communication"}})])]),s._v(" "),a("p",[s._v("上图是通过shared-storage来实现通信的过程，如果两个页面同域名且端口号相同，他们可以访问相同的localStorage。如果Tab1想给Tab2发送数据产生通信，只要做到以下几点即可：")]),s._v(" "),a("ol",[a("li",[s._v("Tab1通过localStorage.setItem('_data1', data)来改变localStorage中_data1的值")]),s._v(" "),a("li",[s._v("Tab2监听storage事件，一旦localStorage事件发生变化，且变化是_data1，就读取_data1的最新值")])]),s._v(" "),a("p",[s._v("上面的通信过程中，Tab1和Tab2分别是发送者和接收者，传输媒介是共享的localStorage，传输的格式可以在data中进行标准化")]),s._v(" "),a("p",[s._v("到目前为止，如果你在项目中遇到一个通信相关的问题，首先要想到发送者和接收者分别是什么，以及有哪些传输媒介可以实现通信")]),s._v(" "),a("h3",{attrs:{id:"前端领域遇到的通信有哪些？"}},[s._v("前端领域遇到的通信有哪些？")]),s._v(" "),a("ul",[a("li",[s._v("前端与后端之间的通信")]),s._v(" "),a("li",[s._v("webview与移动客户端通信 ／ 前端与PC客户端通信")]),s._v(" "),a("li",[s._v("页面与iframe间的通信")]),s._v(" "),a("li",[s._v("web workers 线程通信")]),s._v(" "),a("li",[s._v("路由间的通信")]),s._v(" "),a("li",[s._v("组件之间的通信")]),s._v(" "),a("li",[s._v("跨浏览器tab通信")])]),s._v(" "),a("p",[s._v("常见的通信媒介")]),s._v(" "),a("ul",[a("li",[s._v("xhr / fetch / websocket / SSE")]),s._v(" "),a("li",[s._v("postMessage")]),s._v(" "),a("li",[s._v("shared variable")]),s._v(" "),a("li",[s._v("shared storage")]),s._v(" "),a("li",[s._v("shared worker")]),s._v(" "),a("li",[s._v("constructor assignment (props)")]),s._v(" "),a("li",[s._v("EventEmitter")])]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("前端通信")]),s._v(" "),a("th",[s._v("使用的媒介")]),s._v(" "),a("th",[s._v("说明")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("前端与后端之间的通信")]),s._v(" "),a("td",[s._v("xhr / fetch / websocket / SSE")]),s._v(" "),a("td",[s._v("--")])]),s._v(" "),a("tr",[a("td",[s._v("webview与移动客户端通信 ／ 前端与PC客户端通信")]),s._v(" "),a("td",[s._v("shared variable")]),s._v(" "),a("td",[s._v("共享的变量其实是方法，该方法是客户端的方法，在客户端里执行，但却是前端主动调用，通过参数传输数据")])]),s._v(" "),a("tr",[a("td",[s._v("页面与iframe间的通信")]),s._v(" "),a("td",[s._v("postMessage")]),s._v(" "),a("td",[s._v("--")])]),s._v(" "),a("tr",[a("td",[s._v("web workers 线程通信")]),s._v(" "),a("td",[s._v("postMessage")]),s._v(" "),a("td",[s._v("--")])]),s._v(" "),a("tr",[a("td",[s._v("路由间的通信")]),s._v(" "),a("td",[s._v("shared storage")]),s._v(" "),a("td",[s._v("url里的query或者params本质是存在浏览器输入框里的共享存储")])]),s._v(" "),a("tr",[a("td",[s._v("组件之间的通信")]),s._v(" "),a("td",[s._v("eventEmitter, constructor assignment (props)")]),s._v(" "),a("td",[s._v("vuex, redux都是使用观察者模式，和$emit并无实质区别。可以认为root component和子孙组件通过媒介store进行通信")])]),s._v(" "),a("tr",[a("td",[s._v("跨浏览器tab通信")]),s._v(" "),a("td",[s._v("shared storage, shared worker")]),s._v(" "),a("td",[s._v("--")])])])]),s._v(" "),a("blockquote",[a("p",[s._v("将vuex或redux中的store视为组件通信的媒介，也可以帮助我们思考何时该使用vuex或redux。store作为媒介使root component和子孙组件进行通信，目的是为了同步公共state给这些子孙组件。所以假如你的项目里没有大量公共state需要维护，使用vuex或者redux只会徒增项目的复杂度。另外一个需要思考的问题是，这些公共的state真的需要用vuex或者redux来维护么？")])]),s._v(" "),a("h3",{attrs:{id:"通信分类"}},[s._v("通信分类")]),s._v(" "),a("p",[s._v("One-Way communication （单向通信）")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://user-images.githubusercontent.com/4401831/31715377-35b278b6-b3c9-11e7-98f1-1fa750e9f017.png"}},[a("img",{attrs:{src:"https://user-images.githubusercontent.com/4401831/31715377-35b278b6-b3c9-11e7-98f1-1fa750e9f017.png",alt:"one-way_communication_model"}})])]),s._v(" "),a("p",[s._v("Two-Way communication （双向通信）")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://user-images.githubusercontent.com/4401831/31715380-3b2cba86-b3c9-11e7-8806-a648b17b6e65.jpg"}},[a("img",{attrs:{src:"https://user-images.githubusercontent.com/4401831/31715380-3b2cba86-b3c9-11e7-8806-a648b17b6e65.jpg",alt:"img"}})])]),s._v(" "),a("p",[s._v("单向通信比较简单，使用场景也相对少，所以接下来会重点讲一下项目中经常要用到的双向通信")]),s._v(" "),a("p",[s._v("双向通信一定有client和server，一次通信的sender就是client，receiver就是server")]),s._v(" "),a("blockquote",[a("p",[s._v("注：你能分别说明前端领域遇到的通信是单向通信还是双向通信，以及他们通信的目的么？")])]),s._v(" "),a("h3",{attrs:{id:"双向通信-two-way-communication"}},[s._v("双向通信 (Two-Way communication)")]),s._v(" "),a("p",[s._v("前面着重讲了通信的两个要点："),a("code",[s._v("发送者和接收者")]),s._v("、"),a("code",[s._v("传输媒介")]),s._v("。接下来将着重介绍以下传输的数据格式的重要性")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://user-images.githubusercontent.com/4401831/31754150-3f886288-b4c8-11e7-95b9-fe5df30aa499.png"}},[a("img",{attrs:{src:"https://user-images.githubusercontent.com/4401831/31754150-3f886288-b4c8-11e7-95b9-fe5df30aa499.png",alt:"two-way-communicte"}})])]),s._v(" "),a("p",[s._v("上图是常见的一个双向通信的过程，通过上面已经掌握的知识，我们可以轻松地实现整个通信过程。但是有几个问题展现在眼前：")]),s._v(" "),a("ol",[a("li",[s._v("应该知道一次返回是哪次请求结果，请求以及返回身份应该唯一")]),s._v(" "),a("li",[s._v("一次请求的server端执行操作出错，返回的并不是预期的正常数据，client应该有能力知道返回是否异常")]),s._v(" "),a("li",[s._v("发送请求传递的数据，应该遵循一定的格式标准，方便server端进行统一解析处理")]),s._v(" "),a("li",[s._v("如果通信失败，或者耗时过长需要timeout机制，该怎么方便实现")])]),s._v(" "),a("p",[s._v("解决以上问题，需要用到通信第三个要点：传输格式（协议）")]),s._v(" "),a("pre",[a("code",[a("span",{staticClass:"hljs-comment"},[s._v("/** request data packet */")]),s._v("\n{\n  "),a("span",{staticClass:"hljs-attribute"},[s._v("id")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("'910b56f8-622b-4cdd-9ab7-8dcd758dc2dc'")]),s._v(",\n  "),a("span",{staticClass:"hljs-attribute"},[s._v("type")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("'request'")]),s._v(",\n  "),a("span",{staticClass:"hljs-attribute"},[s._v("method")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("'method1'")]),s._v(",\n  "),a("span",{staticClass:"hljs-attribute"},[s._v("params")]),s._v(": {}\n}\n"),a("span",{staticClass:"hljs-comment"},[s._v("/** response data packet */")]),s._v("\n{\n  "),a("span",{staticClass:"hljs-attribute"},[s._v("id")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("'910b56f8-622b-4cdd-9ab7-8dcd758dc2dc'")]),s._v(",\n  "),a("span",{staticClass:"hljs-attribute"},[s._v("type")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("'response'")]),s._v(",\n  "),a("span",{staticClass:"hljs-attribute"},[s._v("result")]),s._v(": null,\n  "),a("span",{staticClass:"hljs-attribute"},[s._v("error")]),s._v(": {\n    "),a("span",{staticClass:"hljs-attribute"},[s._v("message")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("'error message'")]),s._v(",\n    "),a("span",{staticClass:"hljs-attribute"},[s._v("code")]),s._v(": "),a("span",{staticClass:"hljs-number"},[s._v("2")]),s._v("\n  }\n}")])]),a("p",[s._v("我们来看一下是否可以解决上面提到过的问题：")]),s._v(" "),a("ol",[a("li",[s._v("通过ID可以确认一次返回对应哪一次请求")]),s._v(" "),a("li",[s._v("server处理正常处理一次请求，返回的数据result为结果，error为null；如果server端执行出错，error为错误结果，result为null；这样返回的data packet中如果error不为null，就意味着server没有按照预期返回正常数据，应该异常处理")]),s._v(" "),a("li",[s._v("请求传递的数据，需要server执行的方法为method，方法执行的参数在params里按照约定好的顺序传递，可以方便server统一解析处理")]),s._v(" "),a("li",[s._v("通信失败或者时间过长，只需要client端自己 reject 一个异常的 response data packet 即可")])]),s._v(" "),a("p",[s._v("恭喜，之前提出的问题，通过使用这种统一的数据格式就能得到完美解决")]),s._v(" "),a("p",[s._v("其实，这就是一个简单的RPC协议")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://user-images.githubusercontent.com/4401831/31754133-197c0ffe-b4c8-11e7-8259-3933eef033da.png"}},[a("img",{attrs:{src:"https://user-images.githubusercontent.com/4401831/31754133-197c0ffe-b4c8-11e7-8259-3933eef033da.png",alt:"screen shot 2017-10-19 at 12 19 21"}})])]),s._v(" "),a("h3",{attrs:{id:"远程过程调用-remote-procedure-call"}},[s._v("远程过程调用 (Remote Procedure Call)")]),s._v(" "),a("blockquote",[a("p",[s._v("Remote Procedure Call (RPC) is a protocol that one program can use to request a service from a program located in another computer on a network without having to understand the network's details. A procedure call is also sometimes known as a function call or a subroutine call.")])]),s._v(" "),a("p",[s._v("这里RPC的定义强调了两个计算机通过网络通信实现相互调用彼此服务，对于前端来说除了和后端通信，其他的通信几乎都是在一个计算机里。所以我们可以认为这是比较狭义的定义，前端的世界里广义的RPC不限制发送者和接收者要在两台计算机里，也不限制传输媒介是网络，只要能按照约定的RPC数据格式实现双向通信即可")]),s._v(" "),a("p",[s._v("远程过程调用的几个要点")]),s._v(" "),a("ul",[a("li",[s._v("传输的数据格式要约定好")]),s._v(" "),a("li",[s._v("server要提供一些服务方法")]),s._v(" "),a("li",[s._v("client记录发送的请求，server返回时delete掉对应的请求记录")]),s._v(" "),a("li",[s._v("要有传输媒介")])]),s._v(" "),a("p",[a("strong",[s._v("下面我们以页面和iframe通信来看一下具体的通信实现，其中iframe为server，外壳页面为client")])]),s._v(" "),a("ol",[a("li",[s._v("传输的数据格式")])]),s._v(" "),a("pre",[a("code",[a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" uuid from "),a("span",{staticClass:"hljs-string"},[s._v("'./uuid-v4'")]),s._v("\n\nexport "),a("span",{staticClass:"hljs-class"},[a("span",{staticClass:"hljs-keyword"},[s._v("class")]),s._v(" "),a("span",{staticClass:"hljs-title"},[s._v("RequestPacket")]),s._v(" ")]),s._v("{\n  "),a("span",{staticClass:"hljs-keyword"},[s._v("constructor")]),s._v("(method, params) {\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(".id = uuid()\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(".method = method\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(".params = params\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(".type = "),a("span",{staticClass:"hljs-string"},[s._v("'request'")]),s._v("\n  }\n}\n\nexport "),a("span",{staticClass:"hljs-class"},[a("span",{staticClass:"hljs-keyword"},[s._v("class")]),s._v(" "),a("span",{staticClass:"hljs-title"},[s._v("ResponsePacket")]),s._v(" ")]),s._v("{\n  "),a("span",{staticClass:"hljs-keyword"},[s._v("constructor")]),s._v("(id, result, error) {\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(".id = id\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(".result = result\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(".error = error\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(".type = "),a("span",{staticClass:"hljs-string"},[s._v("'response'")]),s._v("\n  }\n}")])]),a("ol",[a("li",[s._v("server要提供一些服务方法")])]),s._v(" "),a("pre",[a("code",[a("span",{staticClass:"hljs-comment"},[s._v("/**\n * store datas by closure\n */")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" _data = {\n  "),a("span",{staticClass:"hljs-attr"},[s._v("token")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("'91349b0c45a99fc36cf2'")]),s._v(",\n  "),a("span",{staticClass:"hljs-attr"},[s._v("num")]),s._v(": "),a("span",{staticClass:"hljs-number"},[s._v("0")]),s._v("\n}\n"),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" $container = "),a("span",{staticClass:"hljs-built_in"},[s._v("document")]),s._v(".querySelector("),a("span",{staticClass:"hljs-string"},[s._v("'#container'")]),s._v(")\n\n"),a("span",{staticClass:"hljs-comment"},[s._v("/** server procedures  */")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" procedures = {\n  getToken(key) {\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" _data.token\n  },\n  setData(key, value) {\n    _data[key] = value\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("'set data success!'")]),s._v("\n  },\n  addNum() {\n    _data.num = _data.num + "),a("span",{staticClass:"hljs-number"},[s._v("1")]),s._v("\n    $container.innerHTML = "),a("span",{staticClass:"hljs-string"},[s._v("`Current Number: "),a("span",{staticClass:"hljs-subst"},[s._v("${_data.num}")]),s._v("`")]),s._v("\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" _data.num\n  },\n  reduceNum() {\n    _data.num = _data.num - "),a("span",{staticClass:"hljs-number"},[s._v("1")]),s._v("\n    $container.innerHTML = "),a("span",{staticClass:"hljs-string"},[s._v("`Current Number: "),a("span",{staticClass:"hljs-subst"},[s._v("${_data.num}")]),s._v("`")]),s._v("\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" _data.num\n  }\n }\n\n"),a("span",{staticClass:"hljs-keyword"},[s._v("export")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("default")]),s._v(" procedures\n\n"),a("span",{staticClass:"hljs-comment"},[s._v("/** ------------ RPC Class ------------------ **/")]),s._v("\n\n"),a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" { isObject, isArray } "),a("span",{staticClass:"hljs-keyword"},[s._v("from")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("'./help'")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" { ResponsePacket } "),a("span",{staticClass:"hljs-keyword"},[s._v("from")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("'./packet'")]),s._v("\n\n"),a("span",{staticClass:"hljs-keyword"},[s._v("export")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("default")]),s._v(" "),a("span",{staticClass:"hljs-class"},[a("span",{staticClass:"hljs-keyword"},[s._v("class")]),s._v(" "),a("span",{staticClass:"hljs-title"},[s._v("Rpc")]),s._v(" ")]),s._v("{\n  "),a("span",{staticClass:"hljs-keyword"},[s._v("constructor")]),s._v("() {\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(".procedures = {}\n  }\n\n  add(key, cb) {\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(".procedures[key] = cb\n  }\n\n  call(packet) {\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" { method, params, id } = packet\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" _params = parse(params)\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" _method = "),a("span",{staticClass:"hljs-keyword"},[s._v("this")]),s._v(".procedures[method]\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" _method\n      ? "),a("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" ResponsePacket(id, _method(..._params), "),a("span",{staticClass:"hljs-literal"},[s._v("null")]),s._v(")\n      : "),a("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" ResponsePacket(id, "),a("span",{staticClass:"hljs-literal"},[s._v("null")]),s._v(", "),a("span",{staticClass:"hljs-string"},[s._v("`Cannot find method "),a("span",{staticClass:"hljs-subst"},[s._v("${method}")]),s._v(" in server procedures!`")]),s._v(")\n  }\n\n}\n\n"),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" "),a("span",{staticClass:"hljs-title"},[s._v("parse")]),s._v("("),a("span",{staticClass:"hljs-params"},[s._v("params")]),s._v(") ")]),s._v("{\n  "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" isObject(params)\n    ? "),a("span",{staticClass:"hljs-built_in"},[s._v("Object")]),s._v(".values(params)\n    : isArray(params)\n      ? params\n      : [ params ]\n}")])]),a("ol",[a("li",[s._v("client记录发送的请求，server返回时delete掉对应的请求记录")])]),s._v(" "),a("pre",[a("code",[s._v("client process response\n"),a("span",{staticClass:"hljs-comment"},[s._v("/**\n * iframe client\n */")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" { RequestPacket } "),a("span",{staticClass:"hljs-keyword"},[s._v("from")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("'../utils/packet'")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" _requests = {}\n"),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" iframeWindow = "),a("span",{staticClass:"hljs-built_in"},[s._v("document")]),s._v(".querySelector("),a("span",{staticClass:"hljs-string"},[s._v("'#iframe'")]),s._v(").contentWindow\n\n"),a("span",{staticClass:"hljs-built_in"},[s._v("window")]),s._v(".addEventListener("),a("span",{staticClass:"hljs-string"},[s._v("'message'")]),s._v(", "),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),a("span",{staticClass:"hljs-params"},[s._v("event")]),s._v(") ")]),s._v("{\n  "),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" { result, error, id } = event.data\n  "),a("span",{staticClass:"hljs-keyword"},[s._v("if")]),s._v(" (error) {\n    _requests[id].reject(error)\n  } "),a("span",{staticClass:"hljs-keyword"},[s._v("else")]),s._v(" {\n    _requests[id].resolve(result)\n  }\n  "),a("span",{staticClass:"hljs-keyword"},[s._v("delete")]),s._v(" _requests[id]\n}, "),a("span",{staticClass:"hljs-literal"},[s._v("true")]),s._v(")\n\n"),a("span",{staticClass:"hljs-keyword"},[s._v("export")]),s._v(" "),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" "),a("span",{staticClass:"hljs-title"},[s._v("sendRequest")]),s._v("("),a("span",{staticClass:"hljs-params"},[s._v("method, params")]),s._v(") ")]),s._v("{\n  "),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" packet = "),a("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" RequestPacket(method, params)\n  "),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" { id } = packet\n  "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" "),a("span",{staticClass:"hljs-built_in"},[s._v("Promise")]),s._v("("),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),a("span",{staticClass:"hljs-params"},[s._v("resolve, reject")]),s._v(") ")]),s._v("{\n    iframeWindow.postMessage(packet, "),a("span",{staticClass:"hljs-string"},[s._v("'*'")]),s._v(")\n    _requests[id] = { resolve, reject }\n  })\n}\n\n"),a("span",{staticClass:"hljs-comment"},[s._v("/** -----   client request action ----- */")]),s._v("\n\n"),a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" { sendRequest } "),a("span",{staticClass:"hljs-keyword"},[s._v("from")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("'./client'")]),s._v("\n\n"),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" $addControl = "),a("span",{staticClass:"hljs-built_in"},[s._v("document")]),s._v(".querySelector("),a("span",{staticClass:"hljs-string"},[s._v("'#control > .add'")]),s._v(")\n"),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" $reduceControl = "),a("span",{staticClass:"hljs-built_in"},[s._v("document")]),s._v(".querySelector("),a("span",{staticClass:"hljs-string"},[s._v("'#control > .reduce'")]),s._v(")\n\n"),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" "),a("span",{staticClass:"hljs-title"},[s._v("init")]),s._v("("),a("span",{staticClass:"hljs-params"}),s._v(") ")]),s._v("{\n  $addControl.addEventListener("),a("span",{staticClass:"hljs-string"},[s._v("'click'")]),s._v(", "),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),a("span",{staticClass:"hljs-params"}),s._v(") ")]),s._v("{\n    sendRequest("),a("span",{staticClass:"hljs-string"},[s._v("'addNum'")]),s._v(").then("),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-params"},[s._v("res")]),s._v(" =>")]),s._v(" {\n      "),a("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".info(res)\n    })\n  })\n\n  $reduceControl.addEventListener("),a("span",{staticClass:"hljs-string"},[s._v("'click'")]),s._v(", () => {\n    sendRequest("),a("span",{staticClass:"hljs-string"},[s._v("'reduceNum'")]),s._v(").then("),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-params"},[s._v("res")]),s._v(" =>")]),s._v(" {\n      "),a("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".info(res)\n    })\n  })\n}\n\n"),a("span",{staticClass:"hljs-comment"},[s._v("/**\n * entry point\n */")]),s._v("\ninit()")])]),a("ol",[a("li",[s._v("要有传输媒介，就是通过postMessage")])]),s._v(" "),a("pre",[a("code",[a("span",{staticClass:"hljs-comment"},[s._v("/**\n * iframe server\n */")]),s._v("\n\n"),a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" Rpc "),a("span",{staticClass:"hljs-keyword"},[s._v("from")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("'../utils/rpc'")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("procedures")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("from")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("'../utils/procedures'")]),s._v("\n\n"),a("span",{staticClass:"hljs-keyword"},[s._v("class")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("Server")]),s._v(" extends Rpc {\n  constructor() {\n    super()\n  }\n\n  init("),a("span",{staticClass:"hljs-keyword"},[s._v("procedures")]),s._v(") {\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("Object")]),s._v(".keys("),a("span",{staticClass:"hljs-keyword"},[s._v("procedures")]),s._v(")."),a("span",{staticClass:"hljs-keyword"},[s._v("forEach")]),s._v("(key => {\n      this."),a("span",{staticClass:"hljs-keyword"},[s._v("add")]),s._v("(key, "),a("span",{staticClass:"hljs-keyword"},[s._v("procedures")]),s._v("[key])\n    })\n\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("window")]),s._v(".addEventListener("),a("span",{staticClass:"hljs-string"},[s._v("'message'")]),s._v(", event => {\n      var packet = event.data\n      event.source.postMessage("),a("span",{staticClass:"hljs-keyword"},[s._v("server")]),s._v("."),a("span",{staticClass:"hljs-keyword"},[s._v("call")]),s._v("(packet), event.origin)\n    })\n  }\n}\n\nexport const "),a("span",{staticClass:"hljs-keyword"},[s._v("server")]),s._v(" = "),a("span",{staticClass:"hljs-built_in"},[s._v("new")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("Server")]),s._v("()\n"),a("span",{staticClass:"hljs-keyword"},[s._v("server")]),s._v(".init("),a("span",{staticClass:"hljs-keyword"},[s._v("procedures")]),s._v(")")])]),a("p",[s._v("这样就可以实现一次RPC双向通信了")]),s._v(" "),a("p",[s._v("上面的完整代码在"),a("a",{attrs:{href:"https://github.com/rainjay/rpc-demo"}},[s._v("rpc-demo")]),s._v(" 里，这里的例子包括h5与移动客户端通信原理、iframe与外壳通信原理和跨tab页面通信原理。如果觉得对你有帮助，star是对我的小小鼓励～")]),s._v(" "),a("h3",{attrs:{id:"后端可扩展的跨语言服务"}},[s._v("后端可扩展的跨语言服务")]),s._v(" "),a("p",[s._v("有一定规模的互联网公司内部肯定是针对不同的业务场景使用了不同的开发语言以及技术栈的。也不可避免会遇到要跨语言调用彼此服务这种需求。")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://thrift.apache.org/"}},[s._v("thrift")]),s._v("这类框架提供了解决方案，底层原理也是RPC。使用TCP协议进行通信，底层有约定好的数据格式")]),s._v(" "),a("h3",{attrs:{id:"总结"}},[s._v("总结")]),s._v(" "),a("p",[s._v("单向通信：A: 你瞅啥 B: 溜\n双向通信： A: 你瞅啥 B: 瞅你咋的")])])}]},ds={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"marked"},[a("p",[s._v("本文浅谈一下前端技术的发展背后的动机、解决问题的思路和借鉴的一些思想等，更适合有使用过 React 或 Vue 等现代前端框架的开发者阅读。如果你没接触过这些技术，本文也可以帮你扩展一下视野，提升思维高度")]),s._v(" "),a("blockquote",[a("p",[s._v("抽象，本质上是一种泛化与概括的思维方式")])]),s._v(" "),a("p",[s._v("科学的发展其实就是人类不断尝试抽象和解释世界的过程。基于已有的现象或数据去努力发现共性、规律，抽象出一个模型或者公式（定律定理），然后再验证是否可以解释所有满足条件的现象。一个正确的科研成果基本都是在一定前提下可以被重复验证和解释一类现象的，该成果进而可以被加以利用到实际生产活动当中，促进生产效率提升和社会的发展")]),s._v(" "),a("p",[s._v("在计算机科学中，抽象与分层是一种降低计算机系统复杂度的基本思想和有效方法。分层是建立在抽象的基础上，分散关注、松散耦合、逻辑复用，在此基础上可以产生行业标准的定义")]),s._v(" "),a("p",[s._v("自从 Ajax 出现以来，前端终于可以自成体系的独立开发部署了。前端通过 Ajax 请求获取到数据后，可以有能力自行维护数据，并通过 DOM 操作来展示数据。处理用户操作所触发的 DOM 事件，对数据进行一定处理后与服务器进行同步，同时更新局部内容或借助前端路由进行页面跳转，而不用刷新页面。自此前端有能力跟后端完全分离，也就是我们常说的 SPA")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://user-images.githubusercontent.com/4401831/50513371-5f500380-0ad2-11e9-83e3-38d50c2aebdb.jpg"}},[a("img",{attrs:{src:"https://user-images.githubusercontent.com/4401831/50513371-5f500380-0ad2-11e9-83e3-38d50c2aebdb.jpg",alt:"前后端分离"}})])]),s._v(" "),a("p",[s._v("概括来说，前端在此阶段主要做的事情有这些：")]),s._v(" "),a("ul",[a("li",[s._v("控制页面渲染"),a("ul",[a("li",[s._v("编写模板和样式")]),s._v(" "),a("li",[s._v("通过 DOM 操作渲染初始数据")]),s._v(" "),a("li",[s._v("处理 DOM 事件控制组件样式")]),s._v(" "),a("li",[s._v("数据变更后通过 DOM 操作更新局部页面内容")])])]),s._v(" "),a("li",[s._v("维护本地内存中的数据"),a("ul",[a("li",[s._v("发送请求与服务器同步数据")]),s._v(" "),a("li",[s._v("数据加工适配和校验")]),s._v(" "),a("li",[s._v("更新用户操作时相对应的数据")])])])]),s._v(" "),a("p",[s._v("这些事情同时做起来是非常繁琐的，而我们所要开发的系统却越来越复杂，导致这种开发模式变得越加困难。拥有所有底层能力，意味着前端开发者写代码时可以为所欲为。而前端入门门槛低，开发者的水平参差不齐，这给系统的稳定性和可维护性带来了巨大挑战。同时，需求与生产力越发的不匹配，变革的诉求越来越强")]),s._v(" "),a("p",[s._v("前端技术在 2010 年前后发展迅猛，2013 年 React.js 诞生提出了基于单向数据流的 Flux 架构后，前端技术大方向基本定型，基本可以产生行业标准了。接下来的技术发展基本是在原有方向上不断的优化和完善，提升性能，改善开发体验。")]),s._v(" "),a("p",[s._v("现代前端框架的发展过程本质还是抽象与分层的基本思想的落地：有一些重复或相似的工作是可以抽象出来做针对性处理的，最好能够让我们可以不再操心。就像 Java 的 Garbage Collection 一样，GC 关注于内存回收并不断完善和提升性能，开发者不用再关注内存管理这一层，同时也能降低内存泄露风险。抽象来说，前端所做的事情有两个，而现代前端框架技术也是围绕这两点不断进化的：")]),s._v(" "),a("ol",[a("li",[s._v("将数据和变化后的数据渲染成UI，保持同步")]),s._v(" "),a("li",[s._v("维护本地数据并和服务器数据保持同步")])]),s._v(" "),a("p",[a("strong",[s._v("现代前端框架将页面渲染的能力抽象和封装出来")])]),s._v(" "),a("p",[s._v("如今前端新人已经很少接触 DOM 编程了，甚至对浏览器原生事件的了解都不够深入。这是因为现代框架将页面渲染能力抽象和封装起来，开发者只需要按照文档配置好模板即可，现代框架会自行将初始数据渲染成页面。如果数据有变更，现代框架也提供能力渲染页面保持与数据的同步：React 用户只需调用 setState 方法，而 Vue 和 Angular 的用户什么都不用做，框架内部机制可以检测到变更而自动更新页面")]),s._v(" "),a("p",[s._v("将页面渲染能力封装出来以后，就可以关注于这一块不断进行优化。一方面提升性能：虚拟 DOM 和 DIFF 算法尝试最大程度降低 DOM 操作从而提升渲染性能。另一方面改善开发体验：组件化思想基于此得到广泛认可和并不断发展，如今 React 提出的 Hooks 概念也是努力将管理状态（数据）的组件与实现渲染逻辑的组件分开，降低嵌套组件的复杂度并提升复用性，也提供了更人性化的 API")]),s._v(" "),a("p",[s._v("如今一个前端新人可以快速上手并基于开源组件库低成本开发出一定功能的系统，都是得益于现代前端框架对页面渲染能力的封装")]),s._v(" "),a("p",[a("strong",[s._v("现代前端框架提供了可选的状态（数据）管理能力")])]),s._v(" "),a("p",[s._v("之所以说是可选的，是因为你可能并不需要！这取决于你所面对系统的复杂度和现代框架所提供的状态管理能力所带来的优缺点。那么现代前端框架状态管理能力的设计借鉴了哪些思想呢？我们先来看看状态机")]),s._v(" "),a("p",[s._v("状态机模型可以描述一切运转中的事物。拿宇宙来说，如果我们有一个可以记录宇宙所有状态的相机，那么按下一次快门所记录的就是宇宙的一个 State，下一刻就是一个 Transition，宇宙的运转就是一个无限状态机，除非哪一刻宇宙毁灭了：")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://user-images.githubusercontent.com/4401831/50536901-7d7e3800-0b94-11e9-83c6-1e08c126c857.jpg"}},[a("img",{attrs:{src:"https://user-images.githubusercontent.com/4401831/50536901-7d7e3800-0b94-11e9-83c6-1e08c126c857.jpg",alt:"宇宙无限状态机"}})])]),s._v(" "),a("p",[s._v("一个 SPA 也可以用状态机模型来描述：State 代表了当前 SPA 本地内存中的数据 (由于页面渲染能力已经被抽象和封装了，这里不再关注数据所单向映射的 UI ) ，而网络事件、浏览器事件、setTimeout 等和他们触发的对本地内存中数据的更改可以抽象为 Transition")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://user-images.githubusercontent.com/4401831/50578843-20c39b80-0e7a-11e9-80c6-960fdc7a0d97.jpg"}},[a("img",{attrs:{src:"https://user-images.githubusercontent.com/4401831/50578843-20c39b80-0e7a-11e9-80c6-960fdc7a0d97.jpg",alt:"spa"}})])]),s._v(" "),a("p",[s._v("现代前端框架提供的状态管理能力其实是一个更关注“操作”的状态机模型，但是实现的手段借鉴了 Event Sourcing 和 CQRS 。首先介绍一下Event Sourcing ，两个要点：")]),s._v(" "),a("ol",[a("li",[s._v("关注每一次引发 Transition 的 Event，并做持久化")]),s._v(" "),a("li",[s._v("State 是只读的，每一次 Transition 后都基于变更生成一个新的 State ，并与引发的 Event 做映射后做持久化（Immutable Data）")])]),s._v(" "),a("p",[a("a",{attrs:{href:"https://user-images.githubusercontent.com/4401831/50582921-fb965380-0ea0-11e9-8dcb-ad14be9346a2.jpg"}},[a("img",{attrs:{src:"https://user-images.githubusercontent.com/4401831/50582921-fb965380-0ea0-11e9-8dcb-ad14be9346a2.jpg",alt:"event sourcing"}})])]),s._v(" "),a("p",[s._v("这种 Event First（Event-Driven vs Data-Driven） 的思想好处很多，对于前端而言最大的益处是 Snapshoot 的能力，Event 描述了 SPA 内所发生的一切事情，在目前越来越复杂的系统中遇到问题时可以溯源，重现错误，准确发现 "),a("strong",[s._v("State 在什么时候，是由于什么原因，如何变化的")]),s._v("，方便 debug 。同时，Event first 还给予我们很大的想象空间：如果有一个事件标准体系被前端和各种其他系统（比如 Log, Metric, BDI）实现了呢？是不是可以丰富数据采集，有利于大数据分析呢？")]),s._v(" "),a("p",[s._v("而CQRS又是什么呢？ Command Query Responsibility Segregation，命令查询职责分离，一种读写分离的模式。以 Redux 为例：")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://user-images.githubusercontent.com/4401831/50586478-90567c80-0eb4-11e9-8dd0-afdfa96f0b0f.jpg"}},[a("img",{attrs:{src:"https://user-images.githubusercontent.com/4401831/50586478-90567c80-0eb4-11e9-8dd0-afdfa96f0b0f.jpg",alt:"redux"}})])]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("Commands:")]),s._v(" 不返回任何结果，但更改一个对象或整个系统的状态。在上图中指 dispatch 一个 action 而调用的 reducer 对 store 的处理产生一个新的 store")]),s._v(" "),a("li",[a("strong",[s._v("Query :")]),s._v(" 返回结果但不会改变对象的状态，在上图中指 subscribe store 以及注册的 listener 里调用 getState 方法")])]),s._v(" "),a("p",[s._v("拿 Redux 的示例 "),a("a",{attrs:{href:"https://codesandbox.io/s/github/reduxjs/redux/tree/master/examples/shopping-cart"}},[s._v("Shopping Cart Example")]),s._v(" 来说明一下，这里只分析 Add to cart 一个 action，详细代码请到 sandbox 里查阅：")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://user-images.githubusercontent.com/4401831/51031035-45381a00-15d6-11e9-899b-600e14e0f289.png"}},[a("img",{attrs:{src:"https://user-images.githubusercontent.com/4401831/51031035-45381a00-15d6-11e9-899b-600e14e0f289.png",alt:"shopping cart"}})])]),s._v(" "),a("p",[s._v("当用户点击 Add to cart 按钮时，对应 action 会 dispatch ADD_TO_CART，触发 Products 和 Cart 里对应的 reducer 去更改 state，即 command，操作过程是将 Products 里对应 product 的库存减 1，Cart 里对应 product 数量加 1")]),s._v(" "),a("pre",[a("code",[s._v("// products reducer\n// products 里对应 product 存货数量减 "),a("span",{staticClass:"hljs-number"},[s._v("1")]),s._v("\nconst products = ("),a("span",{staticClass:"hljs-keyword"},[s._v("state")]),s._v(", action) => {\n  switch (action.type) {\n    case ADD_TO_CART:\n      return {\n        ..."),a("span",{staticClass:"hljs-keyword"},[s._v("state")]),s._v(",\n        inventory: "),a("span",{staticClass:"hljs-keyword"},[s._v("state")]),s._v(".inventory - "),a("span",{staticClass:"hljs-number"},[s._v("1")]),s._v("\n      }\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("default")]),s._v(":\n      return "),a("span",{staticClass:"hljs-keyword"},[s._v("state")]),s._v("\n  }\n}\n\n// cart reducer\n// 如果 cart 里没有对应的 product，添加新的 product\nconst addedIds = ("),a("span",{staticClass:"hljs-keyword"},[s._v("state")]),s._v(" = initialState.addedIds, action) => {\n  switch (action.type) {\n    case ADD_TO_CART:\n      if ("),a("span",{staticClass:"hljs-keyword"},[s._v("state")]),s._v(".indexOf(action.productId) !== -"),a("span",{staticClass:"hljs-number"},[s._v("1")]),s._v(") {\n        return "),a("span",{staticClass:"hljs-keyword"},[s._v("state")]),s._v("\n      }\n      return [ ..."),a("span",{staticClass:"hljs-keyword"},[s._v("state")]),s._v(", action.productId ]\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("default")]),s._v(":\n      return "),a("span",{staticClass:"hljs-keyword"},[s._v("state")]),s._v("\n  }\n}\n\n// cart 里对应的 product 数量加 "),a("span",{staticClass:"hljs-number"},[s._v("1")]),s._v("\nconst quantityById = ("),a("span",{staticClass:"hljs-keyword"},[s._v("state")]),s._v(" = initialState.quantityById, action) => {\n  switch (action.type) {\n    case ADD_TO_CART:\n      const { productId } = action\n      return { ..."),a("span",{staticClass:"hljs-keyword"},[s._v("state")]),s._v(",\n        [productId]: ("),a("span",{staticClass:"hljs-keyword"},[s._v("state")]),s._v("[productId] || "),a("span",{staticClass:"hljs-number"},[s._v("0")]),s._v(") + "),a("span",{staticClass:"hljs-number"},[s._v("1")]),s._v("\n      }\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("default")]),s._v(":\n      return "),a("span",{staticClass:"hljs-keyword"},[s._v("state")]),s._v("\n  }\n}")])]),a("p",[s._v("reducer 更改了 Store 里对应 state 后，会触发变更通知 view 去获取最新 state 并重新渲染，即 query")]),s._v(" "),a("pre",[a("code",[s._v("const getAddedIds = "),a("span",{staticClass:"hljs-keyword"},[s._v("state")]),s._v(" => "),a("span",{staticClass:"hljs-keyword"},[s._v("from")]),s._v("Cart.getAddedIds("),a("span",{staticClass:"hljs-keyword"},[s._v("state")]),s._v(".cart)\nconst getQuantity = ("),a("span",{staticClass:"hljs-keyword"},[s._v("state")]),s._v(", id) => "),a("span",{staticClass:"hljs-keyword"},[s._v("from")]),s._v("Cart.getQuantity("),a("span",{staticClass:"hljs-keyword"},[s._v("state")]),s._v(".cart, id)\nconst getProduct = ("),a("span",{staticClass:"hljs-keyword"},[s._v("state")]),s._v(", id) => "),a("span",{staticClass:"hljs-keyword"},[s._v("from")]),s._v("Products.getProduct("),a("span",{staticClass:"hljs-keyword"},[s._v("state")]),s._v(".products, id)\n\nexport const getTotal = "),a("span",{staticClass:"hljs-keyword"},[s._v("state")]),s._v(" =>\n  getAddedIds("),a("span",{staticClass:"hljs-keyword"},[s._v("state")]),s._v(")\n    .reduce((total, id) =>\n      total + getProduct("),a("span",{staticClass:"hljs-keyword"},[s._v("state")]),s._v(", id).price * getQuantity("),a("span",{staticClass:"hljs-keyword"},[s._v("state")]),s._v(", id),\n      "),a("span",{staticClass:"hljs-number"},[s._v("0")]),s._v("\n    )\n    ."),a("span",{staticClass:"hljs-keyword"},[s._v("to")]),s._v("Fixed("),a("span",{staticClass:"hljs-number"},[s._v("2")]),s._v(")\n\nexport const getCartProducts = "),a("span",{staticClass:"hljs-keyword"},[s._v("state")]),s._v(" =>\n  getAddedIds("),a("span",{staticClass:"hljs-keyword"},[s._v("state")]),s._v(").map(id => ({\n    ...getProduct("),a("span",{staticClass:"hljs-keyword"},[s._v("state")]),s._v(", id),\n    quantity: getQuantity("),a("span",{staticClass:"hljs-keyword"},[s._v("state")]),s._v(", id)\n  }))")])]),a("p",[s._v("这样最新的商品列表、购物车商品列表和总价都会渲染刷新。此购物车例子比较简单，再复杂点可以减少购物车商品数量，购物车某个商品全选等，而我们只需要编写对应的 action 和 reducer 即可。从这个例子可以看出，对于前端而言，命令和查询职责分离所带来的优点主要有：")]),s._v(" "),a("ol",[a("li",[s._v("逻辑更加清晰，能够看到哪些行为或者操作导致了 state 的变化")]),s._v(" "),a("li",[s._v("处理状态的方法更加原子化，提高复用性")]),s._v(" "),a("li",[s._v("提供了一个标准的管理状态的模式，保证代码输出风格的一致性")]),s._v(" "),a("li",[s._v("可扩展性强，合理添加 action 和对应的 reducer 即可")]),s._v(" "),a("li",[s._v("关注于状态管理后，可以做针对性的优化，提高性能")]),s._v(" "),a("li",[s._v("完美结合Eventing Source模式，可以记录下所有的事件，必要时用来对系统进行回退或者重放")]),s._v(" "),a("li",[s._v("为不同层级的组件提供良好的获取共享 State 的能力")])]),s._v(" "),a("p",[s._v("但是这些优点是需要付出代价的："),a("strong",[s._v("你需要写更多的代码，对于简单系统而言会降低开发效率！")]),s._v("，所以要根据系统复杂度酌情选择使用。另外，嵌套层级深的组件之间获取共享 State 也有其他方案可选")]),s._v(" "),a("p",[s._v("总结：现代前端框架技术的发展正是抽象和分层思想的实践。将前端问题分为数据状态管理和与数据状态保持同步的页面渲染能力封装。关注分离、松散耦合便可以分别针对性的优化，改善开发体验。封装好解决方案后，前端开发者就可以忽略其底层实现细节，把精力放在业务逻辑上")]),s._v(" "),a("p",[a("strong",[s._v("资料参考")])]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://www.codeproject.com/Articles/555855/Introduction-to-CQRS"}},[s._v("Introduction to CQRS")])])])])}]},us={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"marked"},[a("p",[s._v("《金字塔原理》这本书核心内容不多，但是讲的却非常啰嗦，本文对最核心的内容做了总结，希望对你能有帮助")]),s._v(" "),a("p",[s._v("金字塔原则（Pyramid Principle） 是一种结构化思维方式，掌握它可以改变你的人生！")]),s._v(" "),a("p",[s._v("什么是结构化思维")]),s._v(" "),a("p",[s._v("我们的大脑在处理信息的时候会将信息归类分组以便于理解和记忆，这说明大脑的两个缺陷：")]),s._v(" "),a("p",[s._v("同时不能处理太多信息（极限7个项目），否则大脑会信息过载，负荷过大，一片空白")]),s._v(" "),a("p",[s._v("不擅长处理没有规律的信息")]),s._v(" "),a("p",[s._v("例如，你觉得是这个容易记忆？")]),s._v(" "),a("p",[s._v("4，64，8，16，1，128，32，2，256\n还是下面这个容易记忆呢？")]),s._v(" "),a("p",[s._v("1， 2， 4， 8， 16， 32， 64， 128，256\n如果我们在思考、写作、解决问题或与人沟通的时候能够找到一个结构，将零碎且繁多的信息放进去，便可以极大地减轻大脑的负担，进而更清晰高效地达到你想要的目的，这就是所谓的“结构化思维”，而金字塔原则是公认最棒的结构化思维框架")]),s._v(" "),a("p",[s._v("结构化思维带来的好处")]),s._v(" "),a("p",[s._v("简化复杂问题，提升解决问题的能力")]),s._v(" "),a("p",[s._v("提升逻辑思考能力")]),s._v(" "),a("p",[s._v("思维清晰，提升有效交流能力")]),s._v(" "),a("p",[s._v("提升写作表达能力")]),s._v(" "),a("p",[s._v("金字塔原则")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://user-images.githubusercontent.com/4401831/43843615-8a0385bc-9b5a-11e8-9fd7-16449faf46e5.jpeg",alt:"0_hx8ozunn74noppy7"}})]),s._v(" "),a("p",[s._v("一、结论先行，以上统下、归类分组、逻辑递进")]),s._v(" "),a("p",[s._v("要想表达清楚，最有效的方式就是先展示结论或中心思想，然后再建立金字塔架构：任意一层的想法都必须是其下一层所有想法的概括，同一个分组里的所有想法都必须是同类，同一个分组里的想法必须按照一定逻辑顺序排列：时间顺序、结构顺序、程度顺序、逻辑演绎与推理")]),s._v(" "),a("p",[s._v("比如丈夫让妻子去买食物，要记住的食物如下")]),s._v(" "),a("p",[s._v("胡萝卜、葡萄、黄油、苹果、土豆、橙子、牛奶、鸡蛋、酸奶油\n按照金字塔架构表达，以上统下，归类分组：")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://user-images.githubusercontent.com/4401831/43845819-6fb8d1a8-9b5f-11e8-8e34-ce81a4ef7929.png",alt:"default"}})]),s._v(" "),a("p",[s._v("比如要思考分析一个内容型运营的开展，按照时间顺序：")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://user-images.githubusercontent.com/4401831/43888171-784eec14-9bf3-11e8-8dc3-13c64d3aa61b.png",alt:"default"}})]),s._v(" "),a("p",[s._v("首先要分析产品的定位，然后确认目标用户，再分析用户需求，然后思考才用什么运营策略产出内容，再思考如何让内容推送到更匹配的用户，接着思考变现方式，最后要根据数据做分析，不断修正运营策略")]),s._v(" "),a("p",[s._v("比如遇到线上故障，分析问题按照重要度顺序")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://user-images.githubusercontent.com/4401831/43877592-5e4312bc-9bcd-11e8-9f17-4e03f741ebdd.png",alt:"default"}})]),s._v(" "),a("p",[s._v("二、金字塔结构中，纵向要按照“疑问和解答”的逻辑层层递进，深度剖析；横向要遵循MECE原则（相互独立，完全穷尽），通过归纳和演绎等方式回答上层疑问")]),s._v(" "),a("p",[s._v("纵向才用问答的逻辑递进方式，例如：")]),s._v(" "),a("p",[s._v("横向通过归纳和演绎的方式来回答上层疑问")]),s._v(" "),a("p",[s._v("演绎（deduction） 是一种线性推理过程，后面的结论是由前面的大小前提推导出来的，例如：鸟类会飞 -> 我是一只小鸟 -> 所以我会飞。下面是会议应该改进的金字塔原则：\n"),a("img",{attrs:{src:"https://user-images.githubusercontent.com/4401831/43883992-7e9590c0-9be7-11e8-84c5-ac8cc702acf9.png",alt:"default"}})]),s._v(" "),a("p",[s._v("归纳（induction） 是从特殊到一般的逻辑推理，例如：法国坦克集结在波兰边境，德国坦克集结在波兰边境，俄国坦克集结在波兰边境，归纳出波兰要被入侵\n"),a("img",{attrs:{src:"https://user-images.githubusercontent.com/4401831/43884352-796c98c2-9be8-11e8-9a21-2588223931d4.png",alt:"default"}})]),s._v(" "),a("p",[s._v("三、构建金字塔的方法")]),s._v(" "),a("p",[s._v("自上而下，已经知道主题然后再向下逐步构建不同层次。这需要比较强的抽象和逻辑能力")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://user-images.githubusercontent.com/4401831/43884962-21b428f0-9bea-11e8-8d49-1f19c21b61f3.png",alt:"default"}})]),s._v(" "),a("p",[s._v("自下而上，并不清楚要表达的主题，通过分析对已知要点归类分组，提炼每组的主题，然后完善整个思考过程，比如卖旧车的准备：")]),s._v(" "),a("p",[s._v("准备要做的事情有：修理车顶破洞，买新的车内地毯，后窗售车广告，买新的顶灯，喷新漆，将车内吸尘，在闲鱼发布信息，在弹个车发布信息")]),s._v(" "),a("p",[s._v("分组以后：\n修理车：修理车顶破洞，买新的顶灯，喷新漆\n清理车：将车内吸尘，买新的车内地毯\n打广告：在闲鱼发布信息，在谈个车发布信息\n结果如下")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://user-images.githubusercontent.com/4401831/43889494-e53d32f6-9bf6-11e8-839a-5243cd4ea444.png",alt:"default"}})]),s._v(" "),a("p",[s._v("四、演示的 SCQA 架构")]),s._v(" "),a("p",[s._v("Situation: 提供一个熟悉的情景\nComplication: 描述情景的冲突点\nQuestion：指出问题所在\nAnswer: 提供可行的解决方案\n例如某洗衣粉广告：（Situation）开始是一群小孩子在玩，（Complication）各种泥浆、草渍、颜料等沾染到孩子的衣服上，一般的洗衣粉洗不干净，（Question）妈妈们故作愁眉状，该怎么办呢？（Answer）某某牌洗衣粉，什么都能洗干净（答案A）")]),s._v(" "),a("p",[s._v("由情景和冲突引发听众思考，然后引出问题点，最终给出解决方案。这种表达方式效率高，且表达效果强！")]),s._v(" "),a("p",[s._v("下图图来自秋叶《秋叶：如何高效读懂一本书》\n"),a("a",{attrs:{href:"https://user-images.githubusercontent.com/4401831/43890715-0a0c7562-9bfa-11e8-9be9-ede2b13f2b65.jpg"}},[a("img",{attrs:{src:"https://user-images.githubusercontent.com/4401831/43890715-0a0c7562-9bfa-11e8-9be9-ede2b13f2b65.jpg",alt:"v2-6dee28dc101fb912fd01687909afecad_hd"}})])])])}]},ms={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"marked"},[a("p",[s._v("script标签用来在网页中执行JavaScript，它可以直接包含JavaScript代码，也可以直接通过src指向一个同域或者不同域的外链。")]),s._v(" "),a("h3",{attrs:{id:"1-script标签默认会阻塞页面解析，并按照它们出现的顺序执行"}},[s._v("1. script标签默认会阻塞页面解析，并按照它们出现的顺序执行")]),s._v(" "),a("pre",[a("code",[a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("script")]),s._v(" "),a("span",{staticClass:"hljs-attr"},[s._v("src")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v('"a.js"')]),s._v(">")]),a("span",{staticClass:"undefined"}),a("span",{staticClass:"hljs-tag"},[s._v("</"),a("span",{staticClass:"hljs-name"},[s._v("script")]),s._v(">")]),s._v("\n"),a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("script")]),s._v(">")]),a("span",{staticClass:"javascript"},[s._v("\n  "),a("span",{staticClass:"hljs-built_in"},[s._v("console")]),s._v(".log("),a("span",{staticClass:"hljs-string"},[s._v("'b'")]),s._v(")\n")]),a("span",{staticClass:"hljs-tag"},[s._v("</"),a("span",{staticClass:"hljs-name"},[s._v("script")]),s._v(">")]),s._v("\n"),a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("script")]),s._v(" "),a("span",{staticClass:"hljs-attr"},[s._v("src")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v('"b.js"')]),s._v(">")]),a("span",{staticClass:"undefined"}),a("span",{staticClass:"hljs-tag"},[s._v("</"),a("span",{staticClass:"hljs-name"},[s._v("script")]),s._v(">")])])]),a("p",[s._v("浏览器在解析到上面的script标签时会阻止页面解析，并平行下载a.js, b.js，依次执行a.js, "),a("code",[s._v("console.log('b')")]),s._v(", b.js 后，再继续解析渲染页面。这也是为什么你会经常看到一些建议将需要DOM操作的js要放在body的最后，不阻塞页面html的解析。")]),s._v(" "),a("h3",{attrs:{id:"2-script标签的async和defer-属性"}},[s._v("2. script标签的"),a("code",[s._v("async")]),s._v("和"),a("code",[s._v("defer")]),s._v(" 属性")]),s._v(" "),a("ul",[a("li",[a("pre",[a("code",[a("span",{staticClass:"hljs-keyword"},[s._v("async")])])])])]),s._v(" "),a("p",[s._v("  仅适用于外链，规定脚本异步执行")]),s._v(" "),a("ul",[a("li",[s._v("下载不会阻塞页面解析")]),s._v(" "),a("li",[s._v("不会按照出现的顺序执行，先下载完成哪个就先执行哪个")]),s._v(" "),a("li",[s._v("执行的时候，有可能页面还没解析完成")])]),s._v(" "),a("p",[s._v("###### ")]),s._v(" "),a("ul",[a("li",[a("pre",[a("code",[a("span",{staticClass:"hljs-attribute"},[s._v("defer")])])]),a("p",[s._v("仅适用于外链，规定脚本延迟执行")]),s._v(" "),a("ul",[a("li",[s._v("不会阻塞页面解析")]),s._v(" "),a("li",[s._v("在html解析完成后, DOMContentLoaded之前执行")]),s._v(" "),a("li",[s._v("会按照出现的顺序执行")])])])]),s._v(" "),a("h3",{attrs:{id:"3-type为module的script标签"}},[s._v("3. type为module的script标签")]),s._v(" "),a("p",[s._v("相比传统script，"),a("code",[s._v('<script type="module"><\/script>')]),s._v("将被当作一个JavaScript模块对待，被称为"),a("code",[s._v("module script")]),s._v("，且不受"),a("code",[s._v("charset")]),s._v("和"),a("code",[s._v("defer")]),s._v("属性影响。")]),s._v(" "),a("pre",[a("code",[s._v("// app.js\n"),a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" { assign } "),a("span",{staticClass:"hljs-keyword"},[s._v("from")]),s._v(' "./utils.js"\n\nvar obj = '),a("span",{staticClass:"hljs-keyword"},[s._v("Object")]),s._v("."),a("span",{staticClass:"hljs-keyword"},[s._v("create")]),s._v("(\n  { foo: "),a("span",{staticClass:"hljs-number"},[s._v("1")]),s._v(" }, \n  {\n    bar: { "),a("span",{staticClass:"hljs-keyword"},[s._v("value")]),s._v(": "),a("span",{staticClass:"hljs-number"},[s._v("2")]),s._v(" },\n    baz: { "),a("span",{staticClass:"hljs-keyword"},[s._v("value")]),s._v(": "),a("span",{staticClass:"hljs-number"},[s._v("3")]),s._v(", enumerable: "),a("span",{staticClass:"hljs-keyword"},[s._v("true")]),s._v(" }\n  },\n)\nvar copy = assign({}, obj)\nconsole.log("),a("span",{staticClass:"hljs-keyword"},[s._v("copy")]),s._v(")\n<script "),a("span",{staticClass:"hljs-keyword"},[s._v("type")]),s._v('="module" src="app.js"><\/script>\n<script nomodule src="classic-app-bundle.js"><\/script>')])]),a("p",[s._v("上面的代码，可以这么理解：")]),s._v(" "),a("ol",[a("li",[s._v("支持"),a("code",[s._v("module script")]),s._v("的浏览器，不会执行拥有"),a("code",[s._v("nomodule")]),s._v("属性的script")]),s._v(" "),a("li",[s._v("不支持"),a("code",[s._v("module script")]),s._v("的浏览器，会忽略未知的"),a("code",[s._v('type="module"')]),s._v("的script，同时也会忽略传统script中不认识的"),a("code",[s._v("nomodule")]),s._v("属性，进而执行传统的bundle.js代码")]),s._v(" "),a("li",[a("code",[s._v("module script")]),s._v("以及其依赖所有文件（源文件中通过import声明导入的文件）都会被下载，一旦整个依赖的模块树都被导入，页面文档也完成解析，app.js将会被执行")])]),s._v(" "),a("p",[s._v("但是如果"),a("code",[s._v("module script")]),s._v("里有async属性，比如"),a("code",[s._v('<script type="module" src="util.js" async><\/script>')]),s._v("，"),a("code",[s._v("module script")]),s._v("及其所有依赖都会异步下载，待整个依赖的模块树都被导入时会立即执行，而此时页面有可能还没有完成解析渲染。")]),s._v(" "),a("p",[s._v("传统script和"),a("code",[s._v("module script")]),s._v("如何被下载执行可以用下图来概括：")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://camo.githubusercontent.com/949ada5c1c7e5da192528c23cfb22698394c6d88/68747470733a2f2f68746d6c2e737065632e7768617477672e6f72672f696d616765732f6173796e6364656665722e737667"}},[a("img",{attrs:{src:"https://camo.githubusercontent.com/949ada5c1c7e5da192528c23cfb22698394c6d88/68747470733a2f2f68746d6c2e737065632e7768617477672e6f72672f696d616765732f6173796e6364656665722e737667",alt:"img"}})])]),s._v(" "),a("h3",{attrs:{id:"4script标签的integrity属性"}},[s._v("4.script标签的integrity属性")]),s._v(" "),a("pre",[a("code",[s._v("<script "),a("span",{staticClass:"hljs-attribute"},[s._v("crossorigin")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v('"anonymous"')]),s._v(" "),a("span",{staticClass:"hljs-attribute"},[s._v("integrity")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v('"sha256-PJJrxrJLzT6CCz1jDfQXTRWOO9zmemDQbmLtSlFQluc="')]),s._v(" "),a("span",{staticClass:"hljs-attribute"},[s._v("src")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v('"https://assets-cdn.github.com/assets/frameworks-3c926bc6b24bcd3e820b3d630df4174d158e3bdce67a60d06e62ed4a515096e7.js"')]),s._v("><\/script>")])]),a("p",[a("code",[s._v("integrity")]),s._v("属性是资源完整性规范的一部分，它允许你为script提供一个hash，用来进行验签，检验加载的JavaScript文件是否完整。")]),s._v(" "),a("p",[s._v("上面的代码来自github源码，"),a("code",[s._v('integrity="sha256-PJJrxrJLzT6CCz1jDfQXTRWOO9zmemDQbmLtSlFQluc="')]),s._v("告诉浏览器，使用sha256签名算法对下载的js文件进行计算，并与"),a("code",[s._v("intergrity")]),s._v("提供的摘要签名对比，如果二者不一致，就不会执行这个资源。")]),s._v(" "),a("p",[a("code",[s._v("intergrity")]),s._v("的作用有：")]),s._v(" "),a("ul",[a("li",[s._v("减少由【托管在CDN的资源被篡改】而引入的XSS 风险")]),s._v(" "),a("li",[s._v("减少通信过程资源被篡改而引入的XSS风险（同时使用https会更保险）")]),s._v(" "),a("li",[s._v("可以通过一些技术手段，不执行有脏数据的CDN资源，同时去源站下载对应资源")])]),s._v(" "),a("blockquote",[a("p",[a("em",[s._v("注意：启用 SRI 策略后，浏览器会对资源进行 CORS 校验，这就要求被请求的资源必须同域，或者配置了 Access-Control-Allow-Origin 响应头")])])]),s._v(" "),a("h3",{attrs:{id:"5script标签的crossorigin属性"}},[s._v("5.script标签的crossorigin属性")]),s._v(" "),a("p",[s._v("crossorigin的属性值可以是"),a("code",[s._v("anonymous")]),s._v("、"),a("code",[s._v("use-credentials")]),s._v("，如果没有属性值或者非法属性值，会被浏览器默认做"),a("code",[s._v("anonymous")]),s._v("。crossorigin的作用有三个：")]),s._v(" "),a("ol",[a("li",[s._v("crossorigin会让浏览器启用CORS访问检查，检查http相应头的Access-Control-Allow-Origin")]),s._v(" "),a("li",[s._v("对于传统script需要跨域获取的js资源，控制暴露出其报错的详细信息")]),s._v(" "),a("li",[s._v("对于"),a("code",[s._v("module script")]),s._v("，控制用于跨域请求的"),a("a",{attrs:{href:"https://fetch.spec.whatwg.org/#concept-request-credentials-mode"}},[s._v("凭据模式")])])]),s._v(" "),a("p",[s._v("我们在收集错误日志的时候，通常会在window上注册一个方法来监测所有代码抛出的异常：")]),s._v(" "),a("pre",[a("code",[s._v("window.add"),a("span",{staticClass:"hljs-constructor"},[s._v("EventListener('"),a("span",{staticClass:"hljs-params"},[s._v("error")]),s._v("', "),a("span",{staticClass:"hljs-params"},[s._v("function")]),s._v("("),a("span",{staticClass:"hljs-params"},[s._v("msg")]),s._v(", "),a("span",{staticClass:"hljs-params"},[s._v("url")]),s._v(", "),a("span",{staticClass:"hljs-params"},[s._v("lineno")]),s._v(", "),a("span",{staticClass:"hljs-params"},[s._v("colno")]),s._v(", "),a("span",{staticClass:"hljs-params"},[s._v("error")]),s._v(")")]),s._v(" {\n  var "),a("span",{staticClass:"hljs-built_in"},[s._v("string")]),s._v(" = msg."),a("span",{staticClass:"hljs-keyword"},[s._v("to")]),a("span",{staticClass:"hljs-constructor"},[s._v("LowerCase()")]),s._v("\n  var substring = "),a("span",{staticClass:"hljs-string"},[s._v('"script error"')]),s._v("\n  "),a("span",{staticClass:"hljs-keyword"},[s._v("if")]),s._v(" ("),a("span",{staticClass:"hljs-built_in"},[s._v("string")]),s._v(".index"),a("span",{staticClass:"hljs-constructor"},[s._v("Of("),a("span",{staticClass:"hljs-params"},[s._v("substring")]),s._v(")")]),s._v(" > -"),a("span",{staticClass:"hljs-number"},[s._v("1")]),s._v("){\n    alert('Script Error: See Browser Console for Detail')\n  } "),a("span",{staticClass:"hljs-keyword"},[s._v("else")]),s._v(" {\n    var message = {\n      Message: msg,\n      URL:  url,\n      Line: lineNo,\n      Column: columnNo,\n      'Error object': "),a("span",{staticClass:"hljs-module-access"},[a("span",{staticClass:"hljs-module"},[a("span",{staticClass:"hljs-identifier"},[s._v("JSON")]),s._v(".")])]),s._v("stringify(error)\n    }\n    "),a("span",{staticClass:"hljs-comment"},[s._v("// send error log to server")]),s._v("\n    record(message)\n  }\n  return "),a("span",{staticClass:"hljs-literal"},[s._v("false")]),s._v("\n})")])]),a("p",[s._v("但是对于跨域js来说，只会给出很少的报错信息：'error: script error'，通过使用"),a("code",[s._v("crossorigin")]),s._v("属性可以使跨域js暴露出跟同域js同样的报错信息。但是，资源服务器必须返回一个Access-Control-Allow-Origin的header，否则资源无法访问。")]),s._v(" "),a("h3",{attrs:{id:"6-动态导入scriptdynamically-importing-scripts"}},[s._v("6. 动态导入script(Dynamically importing scripts)")]),s._v(" "),a("pre",[a("code",[s._v("function loadError (error) {\n  throw new URIError(`The script ${error"),a("span",{staticClass:"hljs-selector-class"},[s._v(".target")]),a("span",{staticClass:"hljs-selector-class"},[s._v(".src")]),s._v("}  is not accessible.`)\n}\n\nfunction importScript (src, onLoad) {\n  "),a("span",{staticClass:"hljs-selector-tag"},[s._v("var")]),s._v(" script = document.createElement("),a("span",{staticClass:"hljs-string"},[s._v("'script'")]),s._v(")\n  script"),a("span",{staticClass:"hljs-selector-class"},[s._v(".onerror")]),s._v(" = loadError\n  script"),a("span",{staticClass:"hljs-selector-class"},[s._v(".async")]),s._v(" = false\n  "),a("span",{staticClass:"hljs-keyword"},[s._v("if")]),s._v(" (onLoad) { script"),a("span",{staticClass:"hljs-selector-class"},[s._v(".onload")]),s._v(" = onLoad }\n  document"),a("span",{staticClass:"hljs-selector-class"},[s._v(".header")]),a("span",{staticClass:"hljs-selector-class"},[s._v(".appendChild")]),s._v("(script)\n  script"),a("span",{staticClass:"hljs-selector-class"},[s._v(".src")]),s._v(" = src\n}")])]),a("blockquote",[a("p",[a("em",[s._v("可以上面的方法动态加载js资源，但是要注意的是，默认append到文档中的script会异步执行（可以理解为默认拥有async属性，如果需要加载的js按顺序执行，需要设置async为false）")])])]),s._v(" "),a("h3",{attrs:{id:"7-script标签的onerror"}},[s._v("7. script标签的onerror")]),s._v(" "),a("ol",[a("li",[s._v("JavaScript运行时的错误（抛出的语法错误和异常）发生时，实现了ErrorEvent接口的error事件在window上触发，并且调用window.onerror(或者window.addEventListener('error, cb))的回调函数")]),s._v(" "),a("li",[s._v("当资源（如 "),a("code",[s._v("<img>")]),s._v(" 或 "),a("code",[s._v("<script>")]),s._v("）无法加载，或者启用SRI策略资源不完整时，使用Event接口的error事件在会在该资源元素处触发，元素上的onerror回调函数被调用")])]),s._v(" "),a("h3",{attrs:{id:"8-script标签与innerhtml"}},[s._v("8. script标签与innerHTML")]),s._v(" "),a("blockquote",[a("p",[s._v("通过 "),a("code",[s._v("innerHTML")]),s._v(" 动态添加到页面上的 script 标签则不会被执行")])]),s._v(" "),a("pre",[a("code",[s._v("document.head.innerHTML += `"),a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("script")]),s._v(">")]),a("span",{staticClass:"actionscript"},[s._v("alert("),a("span",{staticClass:"hljs-string"},[s._v("'不会执行'")]),s._v(")")]),a("span",{staticClass:"hljs-tag"},[s._v("</"),a("span",{staticClass:"hljs-name"},[s._v("script")]),s._v(">")]),s._v("`")])]),a("p",[s._v("可以用这个恶搞一下同事～")]),s._v(" "),a("h3",{attrs:{id:"参考资料："}},[s._v("参考资料：")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://html.spec.whatwg.org/multipage/scripting.html"}},[s._v("whatwg scripting")])]),s._v(" "),a("li",[a("a",{attrs:{href:"https://blog.whatwg.org/js-modules"}},[s._v("js-modules")])]),s._v(" "),a("li",[a("a",{attrs:{href:"https://segmentfault.com/a/1190000004940294"}},[s._v("为何ES Module如此姗姗来迟")])]),s._v(" "),a("li",[a("a",{attrs:{href:"https://imququ.com/post/subresource-integrity.html"}},[s._v("subResource intergrity")])]),s._v(" "),a("li",[a("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_settings_attributes"}},[s._v("CORS settings attributes")])]),s._v(" "),a("li",[a("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/API/ErrorEvent"}},[s._v("ErrorEvent")])])])])}]},Cs={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"marked"},[a("h3",{attrs:{id:"sri是什么？"}},[s._v("SRI是什么？")]),s._v(" "),a("p",[s._v("SRI是Subresource Integrity的缩写，一般按照字面意义翻译为：子资源完整性。详情请参考："),a("a",{attrs:{href:"https://www.w3.org/TR/SRI/"}},[s._v("https://www.w3.org/TR/SRI/")])]),s._v(" "),a("p",[s._v("点击查看github的页面源码，可以看到这些代码：")]),s._v(" "),a("pre",[a("code",[s._v("<link "),a("span",{staticClass:"hljs-attribute"},[s._v("crossorigin")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v('"anonymous"')]),s._v(" "),a("span",{staticClass:"hljs-attribute"},[s._v("href")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v('"https://assets-cdn.github.com/assets/frameworks-77c3b874f32e71b14cded5a120f42f5c7288fa52e0a37f2d5919fbd8bcfca63c.css"')]),s._v(" "),a("span",{staticClass:"hljs-attribute"},[s._v("integrity")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v('"sha256-d8O4dPMucbFM3tWhIPQvXHKI+lLgo38tWRn72Lz8pjw="')]),s._v(" "),a("span",{staticClass:"hljs-attribute"},[s._v("media")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v('"all"')]),s._v(" "),a("span",{staticClass:"hljs-attribute"},[s._v("rel")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v('"stylesheet"')]),s._v(" />\n<script "),a("span",{staticClass:"hljs-attribute"},[s._v("async")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v('"async"')]),s._v(" "),a("span",{staticClass:"hljs-attribute"},[s._v("crossorigin")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v('"anonymous"')]),s._v(" "),a("span",{staticClass:"hljs-attribute"},[s._v("integrity")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v('"sha256-O0RXCN8H5xVoHnaRW5G3YbcevQUfBlFdDvDgom+xgG0="')]),s._v(" "),a("span",{staticClass:"hljs-attribute"},[s._v("src")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v('"https://assets-cdn.github.com/assets/github-3b445708df07e715681e76915b91b761b71ebd051f06515d0ef0e0a26fb1806d.js"')]),s._v(">")])]),a("p",[s._v("上面标签里都有intergrity属性，比如："),a("code",[s._v('integrity="sha256-d8O4dPMucbFM3tWhIPQvXHKI+lLgo38tWRn72Lz8pjw="')]),s._v("。\n这里的hash值是根据资源内容通过特定的签名算法（支持 sha256、sha384 和 sha512）生成的签名。")]),s._v(" "),a("p",[s._v("浏览器拿到资源内容以后，会根据integrity所指定的签名算法计算结果与integrity值进行对比。如果二者不一致，就不会执行这个资源，这个过程称为验签。（了解数字签名情查看"),a("a",{attrs:{href:"http://www.ruanyifeng.com/blog/2011/08/what_is_a_digital_signature.html"}},[s._v("数字签名是什么")]),s._v("）")]),s._v(" "),a("h3",{attrs:{id:"sri的用途"}},[s._v("SRI的用途")]),s._v(" "),a("p",[s._v("SRI可以确保页面引入资源的完整性，这样我们可以做到：")]),s._v(" "),a("ol",[a("li",[s._v("确保安全：假如CDN服务被入侵，文件内容被写入恶意代码的时候，如果启用了SRI策略，有恶意代码的文件无法执行，防止XSS攻击。虽然https也可以确保传输过程中不被劫持并写入恶意代码，但是对于CDN服务被入侵时，https也无济于事。")]),s._v(" "),a("li",[s._v("确保资源无脏数据：假如CDN在同步过程中有脏数据，JS代码与源站代码不一致，便不会运行。这样可以防止运行脏代码导致报错，检测到错误的同时可以向源站下载对应的正常代码。")])]),s._v(" "),a("h3",{attrs:{id:"1通过sri确保下载正确完整js资源"}},[s._v("1.通过SRI确保下载正确完整JS资源")]),s._v(" "),a("p",[s._v("传统的方法，是在JS正常运行的最后，加一个全局的变量来判断其是否正常运行。比如：")]),s._v(" "),a("pre",[a("code",[a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("script")]),s._v(">")]),a("span",{staticClass:"javascript"},[s._v("\n  "),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" "),a("span",{staticClass:"hljs-title"},[s._v("_loadScript")]),s._v("("),a("span",{staticClass:"hljs-params"},[s._v("src")]),s._v(") ")]),s._v("{\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" script = "),a("span",{staticClass:"hljs-built_in"},[s._v("document")]),s._v(".createElement("),a("span",{staticClass:"hljs-string"},[s._v("'script'")]),s._v(")\n    script.src = src\n    script.async = "),a("span",{staticClass:"hljs-literal"},[s._v("false")]),s._v("\n    "),a("span",{staticClass:"hljs-built_in"},[s._v("document")]),s._v(".querySelector("),a("span",{staticClass:"hljs-string"},[s._v("'head'")]),s._v(").appendChild(script)\n  }\n")]),a("span",{staticClass:"hljs-tag"},[s._v("</"),a("span",{staticClass:"hljs-name"},[s._v("script")]),s._v(">")]),s._v("\n\n"),a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("script")]),s._v(" "),a("span",{staticClass:"hljs-attr"},[s._v("src")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v('"//ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"')]),s._v(">")]),a("span",{staticClass:"undefined"}),a("span",{staticClass:"hljs-tag"},[s._v("</"),a("span",{staticClass:"hljs-name"},[s._v("script")]),s._v(">")]),s._v("\n"),a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("script")]),s._v(">")]),a("span",{staticClass:"javascript"},[a("span",{staticClass:"hljs-built_in"},[s._v("window")]),s._v(".jQuery || _loadScript("),a("span",{staticClass:"hljs-string"},[s._v('"./js/libs/jquery-1.5.1.min.js"')]),s._v(")")]),a("span",{staticClass:"hljs-tag"},[s._v("</"),a("span",{staticClass:"hljs-name"},[s._v("script")]),s._v(">")])])]),a("p",[s._v("但使用这种办法，在遇到有问题的JS资源执行过程中，会抛出异常。但是我们通过启用SRI策略就可以避免这种问题。")]),s._v(" "),a("p",[s._v("我们通过使用webpack的html-webpack-plugin和webpack-subresource-integrity两个插件，我们可以轻松地生成包含integrity属性script的index.html")]),s._v(" "),a("pre",[a("code",[a("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" path = "),a("span",{staticClass:"hljs-built_in"},[s._v("require")]),s._v("("),a("span",{staticClass:"hljs-string"},[s._v("'path'")]),s._v(")\n"),a("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" webpack = "),a("span",{staticClass:"hljs-built_in"},[s._v("require")]),s._v("("),a("span",{staticClass:"hljs-string"},[s._v("'webpack'")]),s._v(")\n"),a("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" ExtractTextPlugin = "),a("span",{staticClass:"hljs-built_in"},[s._v("require")]),s._v("("),a("span",{staticClass:"hljs-string"},[s._v("'extract-text-webpack-plugin'")]),s._v(")\n"),a("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" HtmlWebpackPlugin = "),a("span",{staticClass:"hljs-built_in"},[s._v("require")]),s._v("("),a("span",{staticClass:"hljs-string"},[s._v("'html-webpack-plugin'")]),s._v(");\n"),a("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" SriPlugin = "),a("span",{staticClass:"hljs-built_in"},[s._v("require")]),s._v("("),a("span",{staticClass:"hljs-string"},[s._v("'webpack-subresource-integrity'")]),s._v(");\n\n"),a("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" webpackConfig = {\n  entry: {\n    app: ["),a("span",{staticClass:"hljs-string"},[s._v("'./src/app.js'")]),s._v("]\n  },\n  output: {\n    path: path.join(__dirname, "),a("span",{staticClass:"hljs-string"},[s._v("'dist'")]),s._v("),\n    filename: "),a("span",{staticClass:"hljs-string"},[s._v("'[name].[chunkhash:8].js'")]),s._v(",\n    crossOriginLoading: "),a("span",{staticClass:"hljs-string"},[s._v("'anonymous'")]),s._v(",\n    publicPath: "),a("span",{staticClass:"hljs-string"},[s._v("'//www.cndjs.com/'")]),s._v(" "),a("span",{staticClass:"hljs-comment"},[s._v("//这里配置的是CDN地址，在下面通过script写入的方法去loadScript的时候，应该去掉该配置")]),s._v("\n  },\n  "),a("span",{staticClass:"hljs-keyword"},[s._v("module")]),s._v(": {\n    rules: [{\n      test: "),a("span",{staticClass:"hljs-regexp"},[s._v("/\\.(css)$/")]),s._v(",\n      use: ExtractTextPlugin.extract({\n        fallback: "),a("span",{staticClass:"hljs-string"},[s._v("'style-loader'")]),s._v(",\n        use: [{\n          loader: "),a("span",{staticClass:"hljs-string"},[s._v("'css-loader'")]),s._v(",\n          options: {\n            sourceMap: "),a("span",{staticClass:"hljs-literal"},[s._v("true")]),s._v("\n          }\n        }]\n      })\n    }]\n  },\n  plugins: [\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" webpack.optimize.CommonsChunkPlugin({\n      name: "),a("span",{staticClass:"hljs-string"},[s._v('"vendor"')]),s._v(",\n      minChunks: "),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),a("span",{staticClass:"hljs-params"},[a("span",{staticClass:"hljs-built_in"},[s._v("module")])]),s._v(") ")]),s._v("{\n        "),a("span",{staticClass:"hljs-comment"},[s._v("// this assumes your vendor imports exist in the node_modules directory")]),s._v("\n        "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),a("span",{staticClass:"hljs-built_in"},[s._v("module")]),s._v(".context && "),a("span",{staticClass:"hljs-built_in"},[s._v("module")]),s._v(".context.indexOf("),a("span",{staticClass:"hljs-string"},[s._v('"node_modules"')]),s._v(") !== "),a("span",{staticClass:"hljs-number"},[s._v("-1")]),s._v(";\n      }\n    }),\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" webpack.optimize.CommonsChunkPlugin({\n      name: "),a("span",{staticClass:"hljs-string"},[s._v("'manifest'")]),s._v("\n    }),\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" webpack.HashedModuleIdsPlugin(),\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" ExtractTextPlugin({\n      filename: "),a("span",{staticClass:"hljs-string"},[s._v("'[name].[contenthash:6].css'")]),s._v(",\n      allChunks: "),a("span",{staticClass:"hljs-literal"},[s._v("true")]),s._v("\n    }),\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" HtmlWebpackPlugin({\n      filename: "),a("span",{staticClass:"hljs-string"},[s._v("'index.html'")]),s._v(",\n      template: "),a("span",{staticClass:"hljs-string"},[s._v("'src/template.html'")]),s._v(",\n      inject: "),a("span",{staticClass:"hljs-literal"},[s._v("false")]),s._v(", "),a("span",{staticClass:"hljs-comment"},[s._v("//这里应该填false，手动插入script标签")]),s._v("\n      chunksSortMode: "),a("span",{staticClass:"hljs-string"},[s._v("'dependency'")]),s._v("\n    }),\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" SriPlugin({\n      hashFuncNames: ["),a("span",{staticClass:"hljs-string"},[s._v("'sha256'")]),s._v("],\n      enabled: "),a("span",{staticClass:"hljs-literal"},[s._v("true")]),s._v("\n    })\n  ]\n}")])]),a("p",[s._v("下面是template.html：")]),s._v(" "),a("pre",[a("code",[a("span",{staticClass:"xml"},[a("span",{staticClass:"hljs-meta"},[s._v("<!DOCTYPE html>")]),s._v("\n"),a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("html")]),s._v(" "),a("span",{staticClass:"hljs-attr"},[s._v("lang")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v('"en"')]),s._v(">")]),s._v("\n"),a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("head")]),s._v(">")]),s._v("\n  "),a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("meta")]),s._v(" "),a("span",{staticClass:"hljs-attr"},[s._v("charset")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v('"UTF-8"')]),s._v(">")]),s._v("\n  "),a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("meta")]),s._v(" "),a("span",{staticClass:"hljs-attr"},[s._v("name")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v('"viewport"')]),s._v(" "),a("span",{staticClass:"hljs-attr"},[s._v("content")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v('"width=device-width, initial-scale=1.0"')]),s._v(">")]),s._v("\n  "),a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("meta")]),s._v(" "),a("span",{staticClass:"hljs-attr"},[s._v("http-equiv")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v('"X-UA-Compatible"')]),s._v(" "),a("span",{staticClass:"hljs-attr"},[s._v("content")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v('"ie=edge"')]),s._v(">")]),s._v("\n  "),a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("title")]),s._v(">")]),s._v("Document"),a("span",{staticClass:"hljs-tag"},[s._v("</"),a("span",{staticClass:"hljs-name"},[s._v("title")]),s._v(">")]),s._v("\n  "),a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("%")])])]),a("span",{staticClass:"ruby"},[s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("for")]),s._v(" (var css "),a("span",{staticClass:"hljs-keyword"},[s._v("in")]),s._v(" htmlWebpackPlugin.files.css) { ")]),a("span",{staticClass:"xml"},[a("span",{staticClass:"hljs-tag"},[s._v("%>")]),s._v("\n  "),a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("link")]),s._v(" "),a("span",{staticClass:"hljs-attr"},[s._v("href")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v('"<%=')])])]),a("span",{staticClass:"ruby"},[s._v(" htmlWebpackPlugin.files.css[css] ")]),a("span",{staticClass:"xml"},[a("span",{staticClass:"hljs-tag"},[a("span",{staticClass:"hljs-string"},[s._v('%>"')]),s._v(" "),a("span",{staticClass:"hljs-attr"},[s._v("integrity")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v('"<%=')])])]),a("span",{staticClass:"ruby"},[s._v(" htmlWebpackPlugin.files.cssIntegrity[css] ")]),a("span",{staticClass:"xml"},[a("span",{staticClass:"hljs-tag"},[a("span",{staticClass:"hljs-string"},[s._v('%>"')]),s._v(" "),a("span",{staticClass:"hljs-attr"},[s._v("crossorigin")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v('"anonymous"')]),s._v("\n    "),a("span",{staticClass:"hljs-attr"},[s._v("rel")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v('"stylesheet"')]),s._v(">")]),s._v("\n  "),a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("%")])])]),a("span",{staticClass:"ruby"},[s._v(" } ")]),a("span",{staticClass:"xml"},[a("span",{staticClass:"hljs-tag"},[s._v("%>")]),s._v("\n"),a("span",{staticClass:"hljs-tag"},[s._v("</"),a("span",{staticClass:"hljs-name"},[s._v("head")]),s._v(">")]),s._v("\n"),a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("body")]),s._v(">")]),s._v("\n"),a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("%")])])]),a("span",{staticClass:"ruby"},[s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("for")]),s._v(" (var chunk "),a("span",{staticClass:"hljs-keyword"},[s._v("in")]),s._v(" htmlWebpackPlugin.files.js) { ")]),a("span",{staticClass:"xml"},[a("span",{staticClass:"hljs-tag"},[s._v("%>")]),s._v("\n  "),a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("script")]),s._v(" "),a("span",{staticClass:"hljs-attr"},[s._v("src")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v('"<%=')])])]),a("span",{staticClass:"ruby"},[s._v(" htmlWebpackPlugin.files.js[chunk] ")]),a("span",{staticClass:"xml"},[a("span",{staticClass:"hljs-tag"},[a("span",{staticClass:"hljs-string"},[s._v('%>"')]),s._v(" "),a("span",{staticClass:"hljs-attr"},[s._v("integrity")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v('"<%=')])])]),a("span",{staticClass:"ruby"},[s._v(" htmlWebpackPlugin.files.jsIntegrity[chunk] ")]),a("span",{staticClass:"xml"},[a("span",{staticClass:"hljs-tag"},[a("span",{staticClass:"hljs-string"},[s._v('%>"')]),s._v("\n    "),a("span",{staticClass:"hljs-attr"},[s._v("crossorigin")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v('"anonymous"')]),s._v(">")]),a("span",{staticClass:"undefined"}),a("span",{staticClass:"hljs-tag"},[s._v("</"),a("span",{staticClass:"hljs-name"},[s._v("script")]),s._v(">")]),s._v("\n  "),a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("%")])])]),a("span",{staticClass:"ruby"},[s._v(" } ")]),a("span",{staticClass:"xml"},[a("span",{staticClass:"hljs-tag"},[s._v("%>")]),s._v("\n"),a("span",{staticClass:"hljs-tag"},[s._v("</"),a("span",{staticClass:"hljs-name"},[s._v("body")]),s._v(">")]),s._v("\n"),a("span",{staticClass:"hljs-tag"},[s._v("</"),a("span",{staticClass:"hljs-name"},[s._v("html")]),s._v(">")])])])]),a("blockquote",[a("p",[s._v("注意：SRI只是保证在验签失败的时候不执行对应的资源！而我们希望对应的资源加载不正确的时候去源站下载对应的代码。并且，我们还希望JS代码可以按照预期的加载顺序来执行（如果manifest.js加载失败，依赖它的vendor.js却加载成功了，vendor.js在执行的过程中就会报错）。")])]),s._v(" "),a("h3",{attrs:{id:"2sri检测到cdn资源不完整时，去下载源站代码"}},[s._v("2.SRI检测到CDN资源不完整时，去下载源站代码")]),s._v(" "),a("p",[s._v("我们知道，通过script标签加载到的JS默认会严格按照标签顺序去执行的，但是通过createElement('script')并append到body中的JS资源，执行却是先下载完成先执行！")]),s._v(" "),a("p",[s._v("为了让代码可以按照顺序执行，我们必须要控制JS代码的加载顺序，保证在一个JS加载运行成功后再加载下一个，所以代码可以这么改：")]),s._v(" "),a("pre",[a("code",[a("span",{staticClass:"hljs-meta"},[s._v("<!DOCTYPE html>")]),s._v("\n"),a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("html")]),s._v(" "),a("span",{staticClass:"hljs-attr"},[s._v("lang")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v('"en"')]),s._v(">")]),s._v("\n\n"),a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("head")]),s._v(">")]),s._v("\n  "),a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("meta")]),s._v(" "),a("span",{staticClass:"hljs-attr"},[s._v("charset")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v('"UTF-8"')]),s._v(">")]),s._v("\n  "),a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("meta")]),s._v(" "),a("span",{staticClass:"hljs-attr"},[s._v("name")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v('"viewport"')]),s._v(" "),a("span",{staticClass:"hljs-attr"},[s._v("content")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v('"width=device-width, initial-scale=1.0"')]),s._v(">")]),s._v("\n  "),a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("meta")]),s._v(" "),a("span",{staticClass:"hljs-attr"},[s._v("http-equiv")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v('"X-UA-Compatible"')]),s._v(" "),a("span",{staticClass:"hljs-attr"},[s._v("content")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v('"ie=edge"')]),s._v(">")]),s._v("\n  "),a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("title")]),s._v(">")]),s._v("Document"),a("span",{staticClass:"hljs-tag"},[s._v("</"),a("span",{staticClass:"hljs-name"},[s._v("title")]),s._v(">")]),s._v("\n"),a("span",{staticClass:"hljs-tag"},[s._v("</"),a("span",{staticClass:"hljs-name"},[s._v("head")]),s._v(">")]),s._v("\n\n"),a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("body")]),s._v(">")]),s._v("\n  "),a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("script")]),s._v(">")]),a("span",{staticClass:"javascript"},[s._v("\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" CDN_URI = "),a("span",{staticClass:"hljs-string"},[s._v("'//cdnjs.com/'")]),s._v("\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" styles = {}\n    <% "),a("span",{staticClass:"hljs-keyword"},[s._v("for")]),s._v(" ("),a("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" css "),a("span",{staticClass:"hljs-keyword"},[s._v("in")]),s._v(" htmlWebpackPlugin.files.css) { %>\n      styles["),a("span",{staticClass:"hljs-string"},[s._v('"<%= htmlWebpackPlugin.files.css[css] %>"')]),s._v("] = "),a("span",{staticClass:"hljs-string"},[s._v('"<%= htmlWebpackPlugin.files.cssIntegrity[css] %>"')]),s._v("\n    <% } %>\n\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" chunks = {}\n    <% "),a("span",{staticClass:"hljs-keyword"},[s._v("for")]),s._v(" ("),a("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" chunk "),a("span",{staticClass:"hljs-keyword"},[s._v("in")]),s._v(" htmlWebpackPlugin.files.js) { %>\n      chunks["),a("span",{staticClass:"hljs-string"},[s._v('"<%= htmlWebpackPlugin.files.js[chunk] %>"')]),s._v("] = "),a("span",{staticClass:"hljs-string"},[s._v('"<%= htmlWebpackPlugin.files.jsIntegrity[chunk] %>"')]),s._v("\n    <% } %>\n\n    "),a("span",{staticClass:"hljs-built_in"},[s._v("Object")]),s._v(".keys(styles).forEach("),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),a("span",{staticClass:"hljs-params"},[s._v("key")]),s._v(") ")]),s._v("{\n      _loadStyle(CDN_URI + key, styles[key])\n        .catch("),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),a("span",{staticClass:"hljs-params"}),s._v(") ")]),s._v("{\n          "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" _loadStyle(key, styles[key])\n        })\n    })\n\n    "),a("span",{staticClass:"hljs-built_in"},[s._v("Object")]),s._v(".keys(chunks).reduce("),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),a("span",{staticClass:"hljs-params"},[s._v("pre, cur")]),s._v(") ")]),s._v("{\n      "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" pre.then("),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),a("span",{staticClass:"hljs-params"}),s._v(") ")]),s._v("{\n        "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" _wrapLoadScript(cur)\n      })\n    }, "),a("span",{staticClass:"hljs-built_in"},[s._v("Promise")]),s._v(".resolve())\n\n    "),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" "),a("span",{staticClass:"hljs-title"},[s._v("_wrapLoadScript")]),s._v("("),a("span",{staticClass:"hljs-params"},[s._v("key")]),s._v(") ")]),s._v("{\n      "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" _loadScript(CDN_URI + key, chunks[key])\n        .catch("),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),a("span",{staticClass:"hljs-params"}),s._v(") ")]),s._v("{\n          "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" _loadScript(key, chunks[key])\n        })\n    }\n\n    "),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" "),a("span",{staticClass:"hljs-title"},[s._v("_loadScript")]),s._v("("),a("span",{staticClass:"hljs-params"},[s._v("src, intergrity")]),s._v(") ")]),s._v("{\n      "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" "),a("span",{staticClass:"hljs-built_in"},[s._v("Promise")]),s._v("("),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),a("span",{staticClass:"hljs-params"},[s._v("resolve, reject")]),s._v(") ")]),s._v("{\n        "),a("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" script = "),a("span",{staticClass:"hljs-built_in"},[s._v("document")]),s._v(".createElement("),a("span",{staticClass:"hljs-string"},[s._v("'script'")]),s._v(")\n        script.src = src\n        script.onload = resolve\n        script.onerror = reject\n        "),a("span",{staticClass:"hljs-keyword"},[s._v("if")]),s._v(" (intergrity) {\n          script.intergrity = intergrity\n          script.crossoirgin = "),a("span",{staticClass:"hljs-string"},[s._v("'anonymous'")]),s._v("\n        }\n        "),a("span",{staticClass:"hljs-built_in"},[s._v("document")]),s._v(".querySelector("),a("span",{staticClass:"hljs-string"},[s._v("'head'")]),s._v(").appendChild(script)\n      })\n    }\n\n    "),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" "),a("span",{staticClass:"hljs-title"},[s._v("_loadStyle")]),s._v("("),a("span",{staticClass:"hljs-params"},[s._v("href, intergrity")]),s._v(") ")]),s._v("{\n      "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" "),a("span",{staticClass:"hljs-built_in"},[s._v("Promise")]),s._v("("),a("span",{staticClass:"hljs-function"},[s._v("("),a("span",{staticClass:"hljs-params"},[s._v("resolve, reject")]),s._v(") =>")]),s._v(" {\n        "),a("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" link = "),a("span",{staticClass:"hljs-built_in"},[s._v("document")]),s._v(".createElement("),a("span",{staticClass:"hljs-string"},[s._v("'link'")]),s._v(")\n        link.rel = "),a("span",{staticClass:"hljs-string"},[s._v("'stylesheet'")]),s._v("\n        link.crossoirgin = "),a("span",{staticClass:"hljs-string"},[s._v("'anonymous'")]),s._v("\n        link.onload = resolve\n        link.onerror = reject\n        "),a("span",{staticClass:"hljs-keyword"},[s._v("if")]),s._v(" (intergrity) {\n          link.href = href\n          link.intergrity = intergrity\n        }\n        "),a("span",{staticClass:"hljs-built_in"},[s._v("document")]),s._v(".querySelector("),a("span",{staticClass:"hljs-string"},[s._v("'head'")]),s._v(").appendChild(link)\n      })\n    }\n  ")]),a("span",{staticClass:"hljs-tag"},[s._v("</"),a("span",{staticClass:"hljs-name"},[s._v("script")]),s._v(">")]),s._v("\n"),a("span",{staticClass:"hljs-tag"},[s._v("</"),a("span",{staticClass:"hljs-name"},[s._v("body")]),s._v(">")]),s._v("\n"),a("span",{staticClass:"hljs-tag"},[s._v("</"),a("span",{staticClass:"hljs-name"},[s._v("html")]),s._v(">")])])]),a("blockquote",[a("p",[s._v("以上方案可以完整解决CDN资源不完整问题，但有一个致命的问题：JS资源运行完一个才能去下载下一个，而不是并发下载，首页渲染时间会受到严重影响！")])]),s._v(" "),a("p",[s._v("所以，在CDN能够保证百分之99.99不出问题的时候，我们可以不使用以上方法。但是，我们依旧可以做一些事情，比如: 接入报错监控系统, 在极少部分用户下载到CDN资源有问题，不能正常运行时，可以将script加载的error信息抛出，比如可以对1中的template.html进行如下修改：")]),s._v(" "),a("pre",[a("code",[a("span",{staticClass:"xml"},[a("span",{staticClass:"hljs-meta"},[s._v("<!DOCTYPE html>")]),s._v("\n"),a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("html")]),s._v(" "),a("span",{staticClass:"hljs-attr"},[s._v("lang")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v('"en"')]),s._v(">")]),s._v("\n"),a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("head")]),s._v(">")]),s._v("\n  "),a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("meta")]),s._v(" "),a("span",{staticClass:"hljs-attr"},[s._v("charset")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v('"UTF-8"')]),s._v(">")]),s._v("\n  "),a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("meta")]),s._v(" "),a("span",{staticClass:"hljs-attr"},[s._v("name")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v('"viewport"')]),s._v(" "),a("span",{staticClass:"hljs-attr"},[s._v("content")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v('"width=device-width, initial-scale=1.0"')]),s._v(">")]),s._v("\n  "),a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("meta")]),s._v(" "),a("span",{staticClass:"hljs-attr"},[s._v("http-equiv")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v('"X-UA-Compatible"')]),s._v(" "),a("span",{staticClass:"hljs-attr"},[s._v("content")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v('"ie=edge"')]),s._v(">")]),s._v("\n  "),a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("title")]),s._v(">")]),s._v("Document"),a("span",{staticClass:"hljs-tag"},[s._v("</"),a("span",{staticClass:"hljs-name"},[s._v("title")]),s._v(">")]),s._v("\n  "),a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("%")])])]),a("span",{staticClass:"ruby"},[s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("for")]),s._v(" (var css "),a("span",{staticClass:"hljs-keyword"},[s._v("in")]),s._v(" htmlWebpackPlugin.files.css) { ")]),a("span",{staticClass:"xml"},[a("span",{staticClass:"hljs-tag"},[s._v("%>")]),s._v("\n  "),a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("link")]),s._v(" "),a("span",{staticClass:"hljs-attr"},[s._v("href")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v('"<%=')])])]),a("span",{staticClass:"ruby"},[s._v(" htmlWebpackPlugin.files.css[css] ")]),a("span",{staticClass:"xml"},[a("span",{staticClass:"hljs-tag"},[a("span",{staticClass:"hljs-string"},[s._v('%>"')]),s._v(" "),a("span",{staticClass:"hljs-attr"},[s._v("integrity")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v('"<%=')])])]),a("span",{staticClass:"ruby"},[s._v(" htmlWebpackPlugin.files.cssIntegrity[css] ")]),a("span",{staticClass:"xml"},[a("span",{staticClass:"hljs-tag"},[a("span",{staticClass:"hljs-string"},[s._v('%>"')]),s._v(" "),a("span",{staticClass:"hljs-attr"},[s._v("crossorigin")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v('"anonymous"')]),s._v("\n    "),a("span",{staticClass:"hljs-attr"},[s._v("rel")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v('"stylesheet"')]),s._v(">")]),s._v("\n  "),a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("%")])])]),a("span",{staticClass:"ruby"},[s._v(" } ")]),a("span",{staticClass:"xml"},[a("span",{staticClass:"hljs-tag"},[s._v("%>")]),s._v("\n"),a("span",{staticClass:"hljs-tag"},[s._v("</"),a("span",{staticClass:"hljs-name"},[s._v("head")]),s._v(">")]),s._v("\n"),a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("body")]),s._v(">")]),s._v("\n"),a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("%")])])]),a("span",{staticClass:"ruby"},[s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("for")]),s._v(" (var chunk "),a("span",{staticClass:"hljs-keyword"},[s._v("in")]),s._v(" htmlWebpackPlugin.files.js) { ")]),a("span",{staticClass:"xml"},[a("span",{staticClass:"hljs-tag"},[s._v("%>")]),s._v("\n  "),a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("script")]),s._v(" "),a("span",{staticClass:"hljs-attr"},[s._v("src")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v('"<%=')])])]),a("span",{staticClass:"ruby"},[s._v(" htmlWebpackPlugin.files.js[chunk] ")]),a("span",{staticClass:"xml"},[a("span",{staticClass:"hljs-tag"},[a("span",{staticClass:"hljs-string"},[s._v('%>"')]),s._v("\n    "),a("span",{staticClass:"hljs-attr"},[s._v("integrity")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v('"<%=')])])]),a("span",{staticClass:"ruby"},[s._v(" htmlWebpackPlugin.files.jsIntegrity[chunk] ")]),a("span",{staticClass:"xml"},[a("span",{staticClass:"hljs-tag"},[a("span",{staticClass:"hljs-string"},[s._v('%>"')]),s._v("\n    "),a("span",{staticClass:"hljs-attr"},[s._v("crossorigin")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v('"anonymous"')]),s._v("\n    "),a("span",{staticClass:"hljs-attr"},[s._v("onerror")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v("\"throw 'SRI ERROR'\"")]),s._v(">")]),a("span",{staticClass:"actionscript"},[s._v(" "),a("span",{staticClass:"hljs-comment"},[s._v("// 这里抛出的error信息‘SRI ERROR'会被perf的全局window.addEventListener('error', callback)检测到并统计在God中")]),s._v("\n  ")]),a("span",{staticClass:"hljs-tag"},[s._v("</"),a("span",{staticClass:"hljs-name"},[s._v("script")]),s._v(">")]),s._v("\n"),a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("%")])])]),a("span",{staticClass:"ruby"},[s._v(" } ")]),a("span",{staticClass:"xml"},[a("span",{staticClass:"hljs-tag"},[s._v("%>")]),s._v("\n"),a("span",{staticClass:"hljs-tag"},[s._v("</"),a("span",{staticClass:"hljs-name"},[s._v("body")]),s._v(">")]),s._v("\n"),a("span",{staticClass:"hljs-tag"},[s._v("</"),a("span",{staticClass:"hljs-name"},[s._v("html")]),s._v(">")])])])]),a("p",[s._v("上面的代码，前提是要接入一个报错监控系统。这样如果CDN资源有问题，错误信息为SRI ERROR会统计在里。你可以通过IP来判断哪个地区的CDN节点有脏数据，然后让运维帮忙清理一下对应的节点即可！\n这样就不至于某个CDN节点有问题，自己还完全不知道！直到客服反馈客户端白屏问题，通过远程协助各种倒腾一番才搞清楚！")]),s._v(" "),a("p",[s._v("总结：虽然2中的方法可以最大限度地保证系统的稳定性，但是这是以牺牲页面渲染性能为代价的。在CDN资源基本百分之99.99不出问题的情况下，不建议使用2里的办法（但也应该懂得思路）。建议使用God来做统计和预警，万一发生大规模CDN脏数据的情况，可以及时发现问题，及时解决！")]),s._v(" "),a("h3",{attrs:{id:"3-使用link-relpreload-来并发预加载资源，提高性能"}},[s._v("3. 使用"),a("code",[s._v('<link rel="preload">')]),s._v(" 来并发预加载资源，提高性能")]),s._v(" "),a("p",[s._v("2中的问题，我们可以通过preload资源来解决（会有兼容性问题），具体实现如下：")]),s._v(" "),a("pre",[a("code",[a("span",{staticClass:"hljs-meta"},[s._v("<!DOCTYPE html>")]),s._v("\n"),a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("html")]),s._v(" "),a("span",{staticClass:"hljs-attr"},[s._v("lang")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v('"en"')]),s._v(">")]),s._v("\n\n"),a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("head")]),s._v(">")]),s._v("\n  "),a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("meta")]),s._v(" "),a("span",{staticClass:"hljs-attr"},[s._v("charset")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v('"UTF-8"')]),s._v(">")]),s._v("\n  "),a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("meta")]),s._v(" "),a("span",{staticClass:"hljs-attr"},[s._v("name")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v('"viewport"')]),s._v(" "),a("span",{staticClass:"hljs-attr"},[s._v("content")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v('"width=device-width, initial-scale=1.0"')]),s._v(">")]),s._v("\n  "),a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("meta")]),s._v(" "),a("span",{staticClass:"hljs-attr"},[s._v("http-equiv")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v('"X-UA-Compatible"')]),s._v(" "),a("span",{staticClass:"hljs-attr"},[s._v("content")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v('"ie=edge"')]),s._v(">")]),s._v("\n  "),a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("title")]),s._v(">")]),s._v("Document"),a("span",{staticClass:"hljs-tag"},[s._v("</"),a("span",{staticClass:"hljs-name"},[s._v("title")]),s._v(">")]),s._v("\n"),a("span",{staticClass:"hljs-tag"},[s._v("</"),a("span",{staticClass:"hljs-name"},[s._v("head")]),s._v(">")]),s._v("\n\n"),a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("body")]),s._v(">")]),s._v("\n  "),a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("script")]),s._v(">")]),a("span",{staticClass:"javascript"},[s._v("\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" CDN_URI = "),a("span",{staticClass:"hljs-string"},[s._v("'//cdnjs.com/'")]),s._v("\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" styles = {}\n    <% "),a("span",{staticClass:"hljs-keyword"},[s._v("for")]),s._v(" ("),a("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" css "),a("span",{staticClass:"hljs-keyword"},[s._v("in")]),s._v(" htmlWebpackPlugin.files.css) { %>\n      styles["),a("span",{staticClass:"hljs-string"},[s._v('"<%= htmlWebpackPlugin.files.css[css] %>"')]),s._v("] = "),a("span",{staticClass:"hljs-string"},[s._v('"<%= htmlWebpackPlugin.files.cssIntegrity[css] %>"')]),s._v("\n    <% } %>\n\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" chunks = {}\n    <% "),a("span",{staticClass:"hljs-keyword"},[s._v("for")]),s._v(" ("),a("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" chunk "),a("span",{staticClass:"hljs-keyword"},[s._v("in")]),s._v(" htmlWebpackPlugin.files.js) { %>\n      chunks["),a("span",{staticClass:"hljs-string"},[s._v('"<%= htmlWebpackPlugin.files.js[chunk] %>"')]),s._v("] = "),a("span",{staticClass:"hljs-string"},[s._v('"<%= htmlWebpackPlugin.files.jsIntegrity[chunk] %>"')]),s._v("\n    <% } %>\n\n    "),a("span",{staticClass:"hljs-built_in"},[s._v("Object")]),s._v(".keys(styles).forEach("),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-params"},[s._v("key")]),s._v(" =>")]),s._v(" {\n      _loadStyle(CDN_URI + key, styles[key])\n        .catch("),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),a("span",{staticClass:"hljs-params"}),s._v(") ")]),s._v("{\n          "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" _loadStyle(key, styles[key])\n        })\n    })\n\n    "),a("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" preloadUrls = "),a("span",{staticClass:"hljs-built_in"},[s._v("Object")]),s._v(".keys(chunks).map("),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-params"},[s._v("key")]),s._v(" =>")]),s._v(" _wrapPreload(key))\n\n    "),a("span",{staticClass:"hljs-built_in"},[s._v("Promise")]),s._v(".all(preloadUrls).then("),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-params"},[s._v("urls")]),s._v(" =>")]),s._v(" {\n      urls.forEach("),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v("("),a("span",{staticClass:"hljs-params"},[s._v("url")]),s._v(") ")]),s._v("{\n        _loadScript(url)\n      })\n    })\n\n    "),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" "),a("span",{staticClass:"hljs-title"},[s._v("_wrapPreload")]),s._v("("),a("span",{staticClass:"hljs-params"},[s._v("key")]),s._v(") ")]),s._v("{\n      "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" _preLoad(CDN_URI + key, chunks[key])\n        .catch("),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-params"},[s._v("link")]),s._v(" =>")]),s._v(" {\n          link.href = key\n          "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" key\n        })\n    }\n\n    "),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" "),a("span",{staticClass:"hljs-title"},[s._v("_loadScript")]),s._v("("),a("span",{staticClass:"hljs-params"},[s._v("src")]),s._v(") ")]),s._v("{\n      "),a("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" script = "),a("span",{staticClass:"hljs-built_in"},[s._v("document")]),s._v(".createElement("),a("span",{staticClass:"hljs-string"},[s._v("'script'")]),s._v(")\n      script.src = src\n      script.async = "),a("span",{staticClass:"hljs-literal"},[s._v("false")]),s._v("\n      "),a("span",{staticClass:"hljs-built_in"},[s._v("document")]),s._v(".querySelector("),a("span",{staticClass:"hljs-string"},[s._v("'head'")]),s._v(").appendChild(script)\n    }\n\n    "),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" "),a("span",{staticClass:"hljs-title"},[s._v("_loadStyle")]),s._v("("),a("span",{staticClass:"hljs-params"},[s._v("href, intergrity")]),s._v(") ")]),s._v("{\n      "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" "),a("span",{staticClass:"hljs-built_in"},[s._v("Promise")]),s._v("("),a("span",{staticClass:"hljs-function"},[s._v("("),a("span",{staticClass:"hljs-params"},[s._v("resolve, reject")]),s._v(") =>")]),s._v(" {\n        "),a("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" link = "),a("span",{staticClass:"hljs-built_in"},[s._v("document")]),s._v(".createElement("),a("span",{staticClass:"hljs-string"},[s._v("'link'")]),s._v(")\n        link.rel = "),a("span",{staticClass:"hljs-string"},[s._v("'stylesheet'")]),s._v("\n        link.crossoirgin = "),a("span",{staticClass:"hljs-string"},[s._v("'anonymous'")]),s._v("\n        link.onload = resolve\n        link.onerror = reject\n        "),a("span",{staticClass:"hljs-keyword"},[s._v("if")]),s._v(" (intergrity) {\n          link.href = href\n          link.intergrity = intergrity\n        }\n        "),a("span",{staticClass:"hljs-built_in"},[s._v("document")]),s._v(".querySelector("),a("span",{staticClass:"hljs-string"},[s._v("'head'")]),s._v(").appendChild(link)\n      })\n    }\n\n    "),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" "),a("span",{staticClass:"hljs-title"},[s._v("_preLoad")]),s._v("("),a("span",{staticClass:"hljs-params"},[s._v("href, intergrity")]),s._v(") ")]),s._v("{\n      "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("new")]),s._v(" "),a("span",{staticClass:"hljs-built_in"},[s._v("Promise")]),s._v("("),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-keyword"},[s._v("function")]),s._v(" ("),a("span",{staticClass:"hljs-params"},[s._v("resolve, reject")]),s._v(") ")]),s._v("{\n        "),a("span",{staticClass:"hljs-keyword"},[s._v("var")]),s._v(" link = "),a("span",{staticClass:"hljs-built_in"},[s._v("document")]),s._v(".createElement("),a("span",{staticClass:"hljs-string"},[s._v("'link'")]),s._v(")\n        link.href = href\n        link.rel = "),a("span",{staticClass:"hljs-string"},[s._v("'preload'")]),s._v("\n        link.as = "),a("span",{staticClass:"hljs-string"},[s._v("'script'")]),s._v("\n        link.onload = resolve.bind("),a("span",{staticClass:"hljs-literal"},[s._v("undefined")]),s._v(", href)\n        link.onerror = reject.bind("),a("span",{staticClass:"hljs-literal"},[s._v("undefined")]),s._v(", link)\n        "),a("span",{staticClass:"hljs-keyword"},[s._v("if")]),s._v(" (intergrity) {\n          link.setAttribute("),a("span",{staticClass:"hljs-string"},[s._v("'intergrity'")]),s._v(", intergrity)\n          link.setAttribute("),a("span",{staticClass:"hljs-string"},[s._v("'crossoirgin'")]),s._v(", "),a("span",{staticClass:"hljs-string"},[s._v("'anoymous'")]),s._v(")\n        }\n        "),a("span",{staticClass:"hljs-built_in"},[s._v("document")]),s._v(".querySelector("),a("span",{staticClass:"hljs-string"},[s._v("'head'")]),s._v(").appendChild(link)\n      })\n    }\n  ")]),a("span",{staticClass:"hljs-tag"},[s._v("</"),a("span",{staticClass:"hljs-name"},[s._v("script")]),s._v(">")]),s._v("\n"),a("span",{staticClass:"hljs-tag"},[s._v("</"),a("span",{staticClass:"hljs-name"},[s._v("body")]),s._v(">")]),s._v("\n"),a("span",{staticClass:"hljs-tag"},[s._v("</"),a("span",{staticClass:"hljs-name"},[s._v("html")]),s._v(">")])])]),a("blockquote",[a("p",[s._v("如果没有兼容问题，3已经是我们想要的完美解决方案了")])]),s._v(" "),a("p",[s._v('补充：上面script里都加了crossorigin="anonymous"这个属性，具体原因可以自行查阅资料！\n代码参考：'),a("a",{attrs:{href:"https://github.com/rainjay/subResource-intergrity"}},[s._v("https://github.com/rainjay/subResource-intergrity")])]),s._v(" "),a("p",[s._v("参考资料：\n"),a("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/Security/Subresource_Integrity"}},[s._v("Subresource Integrity")]),s._v(" "),a("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_settings_attributes"}},[s._v("CORS settings attributes")]),s._v(" "),a("a",{attrs:{href:"https://github.com/jantimon/html-webpack-plugin"}},[s._v("html-webpack-plugin")]),s._v(" "),a("a",{attrs:{href:"https://www.npmjs.com/package/webpack-subresource-integrity"}},[s._v("webpack-subresource-integrity")]),s._v(" "),a("a",{attrs:{href:"http://caniuse.com/#search=Subresource%20Integrity"}},[s._v("http://caniuse.com/#search=Subresource%20Integrity")])])])}]},js={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"marked"},[a("p",[s._v("随着接触越来越多非常优秀的人，发现他们几乎都时间充足、精力充沛，工作、社交、生活、兴趣每样都不会落下。如何很自然地在平常生活中做到这样呢？答案是拥有很好的时间管理能力")]),s._v(" "),a("p",[s._v("时间管理是指通过事先规划和运用一定的技巧、方法与工具实现对时间的灵活以及有效运用，从而实现个人或组织的既定目标。EMBA、MBA等主流商业管理教育均将时间管理能力作为一项对企业管理者的基本要求涵括在内\n我自己的体会是：时间管理能力不是孤立的，而是建立在各种综合能力的基础之上，外加特定的训练而养成的良好生活习惯。每个人都能培养起属于自己的一套管理方法，而这些方法是有一定共性的")]),s._v(" "),a("p",[s._v("基础能力")]),s._v(" "),a("p",[s._v("自律")]),s._v(" "),a("p",[s._v("如果任由自己被激情和冲动及任性支配，那么便会成为欲望的奴隶，从而随波逐流，完全放弃了自己的自由。不能够自我控制的人，何谈时间管理")]),s._v(" "),a("p",[s._v("沟通能力")]),s._v(" "),a("p",[s._v("沟通能力最简单的判断就是：是否浪费了别人的时间。高效的沟通是节省双方时间的基础，几个简单的注意点：")]),s._v(" "),a("p",[s._v("做充足准备，要确保对要交流的内容有过深入的思考")]),s._v(" "),a("p",[s._v("列清楚要沟通的要点并确定重点，如果有可预见的冲突话，自己的核心诉求点和能做出让步的点是什么")]),s._v(" "),a("p",[s._v("提前确定沟通顺序和恰当的方式，一般情况重点优先")]),s._v(" "),a("p",[s._v("健康体魄")]),s._v(" "),a("p",[s._v("脑力劳动也是相当耗费体力的，体力是大脑与身体能够持续高效工作的基础。只有健康的体魄，才能保证精力充沛，有效避免困、乏、疲、倦等不良生理状况所导致的效率的极大降低。作息规律，保证足够的睡眠时间，坚持运动、锻炼身体，健康饮食等都是保证时间管理有效开展的基础")]),s._v(" "),a("p",[s._v("专注能力")]),s._v(" "),a("p",[s._v("在工作时是否遇到过注意力飘浮不定的情况？专注的目标会经常转移，或者心不在焉，沉浸于白曰梦而忘记眼前的事情。这会带来时间的浪费和效率的降低。大多数人在专注时会把事情完成得更快更好，可以尝试一些训练专注力的方法（或使用一些培养专注力的应用）来提升个人的专注能力。在工作的时，如果大脑中冒出其他未尽事项或一些点子，不妨先写到纸上，继续专注做你手头的事，做完后再找时间处理那些事项")]),s._v(" "),a("p",[s._v("好习惯")]),s._v(" "),a("p",[s._v("东西要摆放整齐，不要乱放而四处寻找；物尽其所，物归原处；面向未来，不要总沉迷于过去不能自拔；好记性不如烂笔头，不要考验自己的记性；做事情不要拖沓；")]),s._v(" "),a("p",[s._v("时间管理技巧")]),s._v(" "),a("p",[s._v("GTD(Getting Things Done)")]),s._v(" "),a("p",[s._v("管理时间的两个重点是“列待办事项清单”和“完成事项清单”。前者强调目标，提醒要做事情；后者重在展现成就，审视时间安排。列待办事项清单就知道什么时候该做什么事，这样做事就能有条不紊。列完成清单会看到一天做了什么事情，哪些事情有必要做，哪些事情可以推迟做。坚持回顾可以产生成就感，有助于习惯的养成")]),s._v(" "),a("p",[s._v("四象限法")]),s._v(" "),a("p",[s._v("时间管理四象限法帮助你决定做事情优先级。在GTD的基础上，将所列完成清单按照四象限进行划分。应有重点地把主要的精力和时间集中地放在处理那些重要但不紧急的工作上，这样可以做到未雨绸缪，防患于未然")]),s._v(" "),a("p",[s._v("第一象限是重要又急迫的事，像非常急迫的问题、工作危机处理、Deadline等。主要是因为第二象限工作没处理好")]),s._v(" "),a("p",[s._v("第二象限是重要但不紧急的事，包括长期的规划、持续学习、建立良好的人际关系等。该象限做不好会更多事情流入第一象限，导致疲于应付。应该把绝大部分精力放在第二象限，分解任务、明确目标、做好计划、先紧后松")]),s._v(" "),a("p",[s._v("第三象限是紧急但不重要的事，比如电话、会议、突来访客等。很多人花很多时间在这个里面打转，自以为是在第一象限，其实不过是在满足别人的期望与标准。该象限的事情应该放权交给别人去做")]),s._v(" "),a("p",[s._v("第四象限属于不紧急也不重要的事，比如上网、游戏、聊天、看小说等，简而言之就是浪费生命，尽量别做。可以偶尔调节身心，但一定不能沉溺于此")]),s._v(" "),a("p",[s._v("番茄工作法")]),s._v(" "),a("p",[s._v("当大脑疲于工作的时候，对着任务就开始犯困，于是拖拖拉拉地做着，也不一定做得了多少。这个时候反而不如放松或者稍微休息一下，可以参照番茄工作法进行调整。番茄工作法核心在于对时间的高度把控能力")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://user-images.githubusercontent.com/4401831/45104654-237ce100-b165-11e8-86de-89c4df626303.jpg",alt:"fanqie"}})]),s._v(" "),a("p",[s._v("番茄工作法有几个要点：")]),s._v(" "),a("p",[s._v("一个番茄时间不可分割，不存在半个或一个半番茄时间")]),s._v(" "),a("p",[s._v("给所有的事情设定一个期限，必须按时完成。如果一件事情所需超过5个番茄，要考虑再进行分解")]),s._v(" "),a("p",[s._v("一次只专心做一件事情，番茄时间内不得不做与任务无关的事情")]),s._v(" "),a("p",[s._v("不要在非工作时间使用番茄钟")]),s._v(" "),a("p",[s._v("番茄工作法是建立在适合自己的作息时间表之上的")]),s._v(" "),a("p",[s._v("控制干扰")]),s._v(" "),a("p",[s._v("我们日常工作中有两类时间，一类是可以被自己控制的是自由时间，另一类不由自己支配，属于对他人他事的应对，称作应对时间。只有平衡好两类时间，才能让时间利用最大化，提升效率。而如何平衡的重点就在于控制干扰")]),s._v(" "),a("p",[s._v("事情分两类，一类是需要集中时间做的，一类可以在碎片化时间来做。比如回复邮件、钉钉、电话等可以合并放在碎片化时间来处理，而日常重要的工作必须集中时间来做。所以在集中时间处理重要事情时，要关闭邮件、钉钉等的通知；忽略不重要的电话；找同事沟通提前约定好双方合适的时间，如果被同事打扰而事情又不紧急的话，学会拒绝！")]),s._v(" "),a("p",[s._v("应用推荐")]),s._v(" "),a("p",[s._v("奇妙清单 wunderlist")]),s._v(" "),a("p",[s._v("番茄土豆")]),s._v(" "),a("p",[s._v("滴答清单")]),s._v(" "),a("p",[s._v("RescueTime")]),s._v(" "),a("p",[s._v("Forest")])])}]},gs={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"marked"},[a("p",[s._v("本文翻译自 "),a("a",{attrs:{href:"https://medium.com/@markdalgleish"}},[s._v("Mark Dalgleish ")]),s._v("的文章 "),a("a",{attrs:{href:"https://medium.com/seek-blog/a-unified-styling-language-d0c208de2660"}},[s._v("A Unified Styling Language")])]),s._v(" "),a("p",[s._v("Mark Dalgleish 在CSSconf EU 2017的演讲视频地址 "),a("a",{attrs:{href:"https://www.youtube.com/watch?v=X_uTCnaRe94"}},[s._v("Mark Dalgleish: A Unified Styling Language")])]),s._v(" "),a("p",[s._v("PPT地址 "),a("a",{attrs:{href:"https://markdalgleish.github.io/presentation-a-unified-styling-language/"}},[s._v("Presentation-a-unified-styling-language")])]),s._v(" "),a("blockquote",[a("p",[s._v("Mark Dalgleish的这篇文章将作为2017年最重要的前端发展文章之一")])]),s._v(" "),a("p",[s._v("上文评论引用自 "),a("a",{attrs:{href:"https://css-tricks.com/unified-styling-language/"}},[s._v("CSS-Tricks")])]),s._v(" "),a("hr"),s._v(" "),a("p",[s._v("在过去几年我们看到了主要来自 "),a("a",{attrs:{href:"https://facebook.github.io/react/"}},[s._v("React")]),s._v(" 社区的 "),a("a",{attrs:{href:"https://github.com/MicheleBertoli/css-in-js"}},[s._v("CSS-in-JS")]),s._v(" 的兴起，但这并不是没有争议的。很多人，尤其是那些已经精通CSS的人，对此持怀疑态度")]),s._v(" "),a("blockquote",[a("p",[s._v("”为什么有人想要在JS中写CSS?“\n“这绝B是个可怕的想法”\n“这些人肯定没真正学会CSS”")])]),s._v(" "),a("p",[s._v("如果这是你的第一反应，请阅读下去。我们来看看为什么在JavaScript中写CSS并不是一个可怕的想法，以及我认为你应该长期关注这个快速发展的领域的理由")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://user-images.githubusercontent.com/4401831/29860784-c02695a0-8d99-11e7-882c-b1b613c5dde4.png"}},[a("img",{attrs:{src:"https://user-images.githubusercontent.com/4401831/29860784-c02695a0-8d99-11e7-882c-b1b613c5dde4.png",alt:"1-ipu5grtzr21supitfvgxaw"}})])]),s._v(" "),a("h2",{attrs:{id:"相互误解的社区"}},[s._v("相互误解的社区")]),s._v(" "),a("p",[s._v("React社区经常被CSS社区误解，反之亦然。这对于我来说挺有意思的，因为我同时混迹于这两个社区！")]),s._v(" "),a("p",[s._v("我在九十年代后期开始学习HTML，并从基于表格布局的黑暗时代就开始专职于CSS。受 "),a("a",{attrs:{href:"http://www.csszengarden.com/"}},[s._v("CSS禅意花园")]),s._v(" 启发，我热衷于将现有代码迁移为 "),a("a",{attrs:{href:"https://en.wikipedia.org/wiki/Semantic_HTML"}},[s._v("语义化HTML")]),s._v(" 与层叠样式表分离。不久我开始痴迷于关注分离，在服务器渲染出来的页面中使用 "),a("a",{attrs:{href:"https://www.w3.org/wiki/The_principles_of_unobtrusive_JavaScript"}},[s._v("非侵入式JavaScript")]),s._v(" 同客户端交互。我们成为第一代前端开发人员，并活跃于一个关注于这些实践的小社区，努力尊重每一个浏览器平台")]),s._v(" "),a("p",[s._v("在这种关注于web的背景下，你可能认为我会强烈反对React这种似乎违背我们所密切坚持的原则的 "),a("a",{attrs:{href:"https://facebook.github.io/react/docs/jsx-in-depth.html"}},[s._v("HTML-in-JS模型")]),s._v("。但实际上恰恰相反的是，在我的经验里，React的组件化模型及其服务端渲染的能力，终于为我们提供了一个构建大型复杂单页应用的方法。在某种程度上，React仍然可以让我们为用户提供快速、可访问且渐进增强的产品。我们甚至在旗舰产品 "),a("a",{attrs:{href:"https://www.seek.com.au/"}},[s._v("SEEK")]),s._v(" 这个单页React应用中利用这种能力，当JavaScript被禁用时，其核心搜索流依旧可以正常工作——通过在服务器端运行相同的JavaScript实现优雅降级")]),s._v(" "),a("p",[s._v("所以，请考虑将这篇文章作为两个社区之间相互示好橄榄枝。让我们一起努力理解这次CSS-in-JS运动的实质所在。也许它并未在你产品开发所计划使用的技术范围内，也许它对于你来说并不是最有说服力的——但至少它是值得你去思考的")]),s._v(" "),a("h2",{attrs:{id:"为什么要-css-in-js-"}},[s._v("为什么要 CSS-in-JS ?")]),s._v(" "),a("p",[s._v("如果你熟悉我最近所做的有关React和"),a("a",{attrs:{href:"https://github.com/css-modules/css-modules"}},[s._v("CSS Modules")]),s._v(" 的工作，你会惊讶地发现我是捍卫CSS-in-JS的\n"),a("a",{attrs:{href:"https://raw.githubusercontent.com/css-modules/logos/master/css-modules-logo.png"}},[a("img",{attrs:{src:"https://raw.githubusercontent.com/css-modules/logos/master/css-modules-logo.png",alt:"img"}})])]),s._v(" "),a("p",[s._v("终究，CSS Modules通常被那些需要局部作用域样式，但不希望为CSS-in-JS买单的开发者所选择使用。事实上，我甚至在自己的工作中都不使用CSS-in-JS")]),s._v(" "),a("p",[s._v("尽管如此，我依然时刻敏锐地注意着CSS-in-JS社区，对他们不断产出的创新保持密切关注。不仅如此，我认为这些应该同样被更多CSS社区所关注")]),s._v(" "),a("p",[s._v("但是为什么呢？")]),s._v(" "),a("p",[s._v("为了更清楚地了解人们选择将CSS写在JavaScript中的原因，我们将重点关注这种方式所带来的实际性的好处")]),s._v(" "),a("p",[s._v("我把这些好处分为五个主要方面：")]),s._v(" "),a("ol",[a("li",[s._v("拥有作用域的样式 (Scoped Styles)")]),s._v(" "),a("li",[s._v("抽取关键CSS (Critical CSS)")]),s._v(" "),a("li",[s._v("更智能的优化 (Smarter optimisations)")]),s._v(" "),a("li",[s._v("打包管理 (Package management)")]),s._v(" "),a("li",[s._v("非浏览器样式 (Non-browser styling)")])]),s._v(" "),a("p",[s._v("让我们做进一步的了解，仔细地看看CSS-in-JS在这些方面到底带来了什么")]),s._v(" "),a("h2",{attrs:{id:"1-拥有作用域的样式（scoped-styles）"}},[s._v("1. 拥有作用域的样式（Scoped Styles）")]),s._v(" "),a("p",[s._v("众所周知，在大规模项目中高效地构建CSS是极其困难的。当加入一个需要长期维护的项目时，你通常会发现CSS是项目中最难弄清楚的部分")]),s._v(" "),a("p",[s._v("为了解决这个问题，CSS社区已经投入了巨大努力。通过采用一些诸如"),a("a",{attrs:{href:"https://twitter.com/stubbornella"}},[s._v("Nicole Sullivan")]),s._v("所提出的"),a("a",{attrs:{href:"https://github.com/stubbornella/oocss/wiki"}},[s._v("OOCSS")]),s._v("，或"),a("a",{attrs:{href:"https://twitter.com/snookca"}},[s._v("Jonathan Snook")]),s._v("所提出的"),a("a",{attrs:{href:"https://smacss.com/"}},[s._v("SMACSS")]),s._v("等方法论来提高样式的可维护性。但是目前就流行程度而言，最佳的选择毫无争辩是"),a("a",{attrs:{href:"https://github.com/yandex"}},[s._v("Yandex")]),s._v("所提出的"),a("a",{attrs:{href:"http://getbem.com/"}},[s._v("BEM")]),s._v("，或者称为"),a("code",[s._v("Block Element Modifier")])]),s._v(" "),a("p",[s._v("从根本上来说，BEM（纯粹应用于CSS）只是一个命名规范，选择将样式限制在"),a("code",[s._v(".Block_emelent--modifier")]),s._v("模式的class之后。在任何给定的BEM风格的代码库中，开发人员必须始终遵守BEM的规则。当被严格遵循的时候，BEM的工作效果很好。可是，为什么要将作用域这种基础的东西留给纯粹的命名规范呢？")]),s._v(" "),a("p",[s._v("无论是否明确表示过，大多数CSS-in-JS库都与BEM努力将样式独立作用于单个UI元素的思路相符，只不过是以完全不同的方式实现而已")]),s._v(" "),a("p",[s._v("那么在实际代码中是什么样子呢？当使用 "),a("a",{attrs:{href:"https://twitter.com/threepointone"}},[s._v("Sunil Pai")]),s._v(" 的 "),a("a",{attrs:{href:"https://github.com/threepointone/glamor"}},[s._v("glamor")]),s._v(" 时大概长这样：")]),s._v(" "),a("pre",[a("code",[s._v("import { css } "),a("span",{staticClass:"hljs-meta"},[s._v("from")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("'glamor'")]),s._v("\nconst "),a("span",{staticClass:"hljs-meta"},[s._v("title")]),s._v(" ="),a("span",{staticClass:"hljs-meta"},[s._v(" css(")]),s._v("{\n  fontSize: "),a("span",{staticClass:"hljs-string"},[s._v("'1.8em'")]),s._v(",\n  fontFamily: "),a("span",{staticClass:"hljs-string"},[s._v("'Comic Sans MS'")]),s._v(",\n  color: "),a("span",{staticClass:"hljs-string"},[s._v("'blue'")]),s._v("\n})\nconsole"),a("span",{staticClass:"hljs-meta"},[s._v(".log(")]),a("span",{staticClass:"hljs-meta"},[s._v("title")]),s._v(")\n// → "),a("span",{staticClass:"hljs-string"},[s._v("'css-1pyvz'")])])]),a("p",[s._v("你会发现在这段代码中找不到CSS类，样式不再是对系统其他地方定义的class的硬编码引用。取而代之的是，class及样式是由工具库自动生成的。我们不必再担心选择器会在全局作用域里发生冲突，这意味着我们无需再手动为class添加前缀")]),s._v(" "),a("p",[s._v("此选择器的作用域与周围代码的作用域规则一致。如果你想将此规则适用于应用的其他部分，你需要将其转换为JavaScript模块，并在任何需要使用的地方引入。就长期保持代码可维护性而言，这是及其强大的，因为你可以确保任何给定的样式源代码可以轻松地像JS代码一样被追踪到(译注：原文是can be easily traced like any other code，对于前端来说就是JS)")]),s._v(" "),a("p",[a("strong",[s._v("从仅仅靠约定的方式向默认强制局部作用域样式转变，我们已经提升了样式的基础能力。BEM是默认被具备的能力，而不是被选择性使用的（原文：BEM is baked in, not opt-in.）")])]),s._v(" "),a("p",[s._v("——")]),s._v(" "),a("p",[s._v("在我继续之前，我想澄清至关重要的一点")]),s._v(" "),a("p",[a("strong",[s._v("这是生成真正的CSS，而不是生成内联样式")])]),s._v(" "),a("p",[s._v("大多数早期的CSS-in-JS库将样式直接内联到每个元素中。但这种设计最致命的缺陷是："),a("code",[s._v("style")]),s._v("属性并不能胜任所有CSS的功能。取而代之的是，绝大多数新的CSS-in-JS库关注于动态样式表，在运行时从一个全局的样式集中插入和删除样式规则")]),s._v(" "),a("p",[s._v("举个例子，让我们看一看由"),a("a",{attrs:{href:"https://twitter.com/oleg008"}},[s._v("Oleg Slobodskoi")]),s._v("提供的"),a("a",{attrs:{href:"https://github.com/cssinjs/jss"}},[s._v("JSS")]),s._v("，它是最早生成真正CSS的CSS-in-JS库之一\n"),a("a",{attrs:{href:"https://user-images.githubusercontent.com/4401831/29881462-27635b66-8ddd-11e7-8849-891797439c29.png"}},[a("img",{attrs:{src:"https://user-images.githubusercontent.com/4401831/29881462-27635b66-8ddd-11e7-8849-891797439c29.png",alt:"img"}})])]),s._v(" "),a("p",[s._v("使用JSS时，你可以使用标准的CSS特性，比如hover和媒体查询，它们会直接映射成为等效的CSS规则")]),s._v(" "),a("pre",[a("code",[s._v("const styles = {\n  "),a("span",{staticClass:"hljs-selector-tag"},[s._v("button")]),s._v(": {\n    "),a("span",{staticClass:"hljs-attribute"},[s._v("padding")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("'10px'")]),s._v(",\n    "),a("span",{staticClass:"hljs-string"},[s._v("'&:hover'")]),s._v(": {\n      "),a("span",{staticClass:"hljs-attribute"},[s._v("background")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("'blue'")]),s._v("\n    }\n  },\n  "),a("span",{staticClass:"hljs-string"},[s._v("'@media (min-width: 1024px)'")]),s._v(": {\n    "),a("span",{staticClass:"hljs-selector-tag"},[s._v("button")]),s._v(": {\n      "),a("span",{staticClass:"hljs-attribute"},[s._v("padding")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("'20px'")]),s._v("\n    }\n  }\n}")])]),a("p",[s._v("将这些样式插入document后，会自动生成可用的class")]),s._v(" "),a("pre",[a("code",[a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" { classes } = jss.createStyleSheet(styles)."),a("span",{staticClass:"hljs-built_in"},[s._v("attach")]),s._v("()")])]),a("p",[s._v("不管你是使用一个完整的框架，还是简单粗暴地使用innerHTML，当用JavaScript生成HTML时，都可以使用这些生成的class代替硬编码的类名。")]),s._v(" "),a("pre",[a("code",[s._v("document"),a("span",{staticClass:"hljs-selector-class"},[s._v(".body")]),a("span",{staticClass:"hljs-selector-class"},[s._v(".innerHTML")]),s._v(" = `\n  <"),a("span",{staticClass:"hljs-selector-tag"},[s._v("h1")]),s._v(" class="),a("span",{staticClass:"hljs-string"},[s._v('"${classes.heading}"')]),s._v(">Hello World!</h1>\n`")])]),a("p",[s._v("但用单独用这种方式管理样式所带来的好处有限 —— 它通常要与某种组件库搭配使用。因此，可以很容易找到适用于目前最流行的库的绑定方案。例如，在"),a("a",{attrs:{href:"https://github.com/cssinjs/react-jss"}},[s._v("react-jss")]),s._v("的帮助下JSS可以轻松绑定到React组件。在为每个组件注入一小套样式集的同时，还为你管理全局生命周期")]),s._v(" "),a("pre",[a("code",[a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" injectSheet "),a("span",{staticClass:"hljs-keyword"},[s._v("from")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("'react-jss'")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" Button = "),a("span",{staticClass:"hljs-function"},[s._v("("),a("span",{staticClass:"hljs-params"},[s._v("{ classes, children }")]),s._v(") =>")]),s._v(" (\n  "),a("span",{staticClass:"xml"},[a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("button")]),s._v(" "),a("span",{staticClass:"hljs-attr"},[s._v("className")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v("{classes.button}")]),s._v(">")]),s._v("\n    "),a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("span")]),s._v(" "),a("span",{staticClass:"hljs-attr"},[s._v("className")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v("{classes.label}")]),s._v(">")]),s._v("\n      {children}\n    "),a("span",{staticClass:"hljs-tag"},[s._v("</"),a("span",{staticClass:"hljs-name"},[s._v("span")]),s._v(">")]),s._v("\n  "),a("span",{staticClass:"hljs-tag"},[s._v("</"),a("span",{staticClass:"hljs-name"},[s._v("button")]),s._v(">")])]),s._v("\n)\n"),a("span",{staticClass:"hljs-keyword"},[s._v("export")]),s._v(" "),a("span",{staticClass:"hljs-keyword"},[s._v("default")]),s._v(" injectSheet(styles)(Button)")])]),a("p",[s._v("通过将样式集中在组件周围，并在代码层面上将它们紧密地结合在一起，我们有效地得到了合乎BEM逻辑的结果。但如此也以至CSS-in-JS社区许多人觉得提取，命名和重用组件的重要性在所有绑定样式的样板中都被丢失了")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://twitter.com/glenmaddern"}},[s._v("Glen Maddern")]),s._v(" 和 "),a("a",{attrs:{href:"https://twitter.com/mxstbr"}},[s._v("Max Stoiber")]),s._v(" 的 "),a("a",{attrs:{href:"https://github.com/styled-components/styled-components"}},[s._v("styled-components")]),s._v(" 提出了一个全新的解决问题的思路")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://user-images.githubusercontent.com/4401831/29886502-da90dbfa-8dec-11e7-8bcf-4813287be66c.png"}},[a("img",{attrs:{src:"https://user-images.githubusercontent.com/4401831/29886502-da90dbfa-8dec-11e7-8bcf-4813287be66c.png",alt:"img"}})])]),s._v(" "),a("p",[s._v("我们不在创建样式然后再手动地绑定到组件，而是被强制直接创建组件：")]),s._v(" "),a("pre",[a("code",[a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" styled "),a("span",{staticClass:"hljs-keyword"},[s._v("from")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("'styled-components'")]),s._v("\n\n"),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" Title = styled.h1"),a("span",{staticClass:"hljs-string"},[s._v("`\n  font-family: Comic Sans MS;\n  color: blue;\n`")])])]),a("p",[s._v("在应用这些样式的时候，我们并不将class添加在一个现有的元素上，而是简单地渲染这些被生成的组件")]),s._v(" "),a("pre",[a("code",[a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("Title")]),s._v(">")]),s._v("Hello World!"),a("span",{staticClass:"hljs-tag"},[s._v("</"),a("span",{staticClass:"hljs-name"},[s._v("Title")]),s._v(">")])])]),a("p",[a("code",[s._v("styled-components")]),s._v("通过标记模版字符串来使用传统的CSS语法，但有人更喜欢通过数据结构。一个值得注意的选择是来自 "),a("a",{attrs:{href:"https://github.com/paypal"}},[s._v("PayPal")]),s._v(" 的 "),a("a",{attrs:{href:"https://twitter.com/kentcdodds"}},[s._v("Kent C. Dodds")]),s._v(" 所提供的 "),a("a",{attrs:{href:"https://github.com/paypal/glamorous"}},[s._v("glamorous")])]),s._v(" "),a("p",[a("a",{attrs:{href:"https://user-images.githubusercontent.com/4401831/29903564-170f7d44-8e37-11e7-88c4-fe839d79917f.png"}},[a("img",{attrs:{src:"https://user-images.githubusercontent.com/4401831/29903564-170f7d44-8e37-11e7-88c4-fe839d79917f.png",alt:"img"}})])]),s._v(" "),a("p",[a("code",[s._v("Glamorous")]),s._v("提供了同"),a("code",[s._v("styled-components")]),s._v("类似的component-first API，但选择使用对象来代替字符串。这样就无需在库中引入一个CSS解析器，从而减少的库大小并提升性能。")]),s._v(" "),a("pre",[a("code",[a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" glamorous "),a("span",{staticClass:"hljs-keyword"},[s._v("from")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("'glamorous'")]),s._v("\n\n"),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" Title = glamorous.h1({\n  "),a("span",{staticClass:"hljs-attr"},[s._v("fontFamily")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("'Comic Sans MS'")]),s._v(",\n  "),a("span",{staticClass:"hljs-attr"},[s._v("color")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("'blue'")]),s._v("\n})")])]),a("p",[s._v("不管你使用哪种语法来描述样式，样式不再仅仅作用域于某个组件，它已经成为组件不可分割的一部分。\n当使用像 React 这样的库时，组件是基本的构建块，而现在我们的样式也成为了其架构的核心构建者之一。既然我们将应用程序中的所有内容都描述为组件，那么样式也可以")]),s._v(" "),a("p",[s._v("——")]),s._v(" "),a("p",[s._v("对于BEM的经验丰富的开发者来说，我们给系统所带来的改变就其意义性而言，似乎是相对较小的改进。 而事实上，CSS Modules可以让你在不丢失所熟悉的CSS工具生态的前提下获得这些提升，这也是很多项目坚持使用CSS Modules的原因。人们可以在其所熟悉的编写常规CSS方式下，解决编写大规模CSS所遇到的问题。")]),s._v(" "),a("p",[s._v("然而，当我们开始在这些基本概念之上进行构建时，事情开始变得更有趣。")]),s._v(" "),a("h2",{attrs:{id:"2-抽取关键css-critical-css"}},[s._v("2. 抽取关键CSS (Critical CSS)")]),s._v(" "),a("p",[s._v("最近在document的头部添加内联关键样式成为一种最佳实践，只提供当前页面渲染所需要的样式，从而可以降低首屏渲染时间。这与我们通常的加载样式的方式形成鲜明的对比，之前我们会强制浏览器在开始渲染之前下载应用的所有视觉样式")]),s._v(" "),a("p",[s._v("虽然像 "),a("a",{attrs:{href:"https://twitter.com/addyosmani"}},[s._v("Addy Osmani")]),s._v(" 所提供的 "),a("a",{attrs:{href:"https://github.com/addyosmani/critical"}},[s._v("critical")]),s._v(" 这类工具可以帮助用于提取关键CSS，但它们并没有解决关键CSS难以维护和自动化的事实。这只是一个可选择用来做性能优化的奇技淫巧，所以大多数项目似乎放弃了这一步。")]),s._v(" "),a("p",[s._v("相比之下，CSS-in-JS 讲诉了一个完全不同的故事")]),s._v(" "),a("p",[s._v("在开发服务器端渲染的应用时，提取关键CSS将不仅仅是优化，而是服务器端CSS-in-JS的首要工作")]),s._v(" "),a("p",[s._v("例如，当使用 "),a("a",{attrs:{href:"https://github.com/Khan"}},[s._v("Khan Academy")]),s._v(" 开发的 "),a("a",{attrs:{href:"https://github.com/Khan/aphrodite"}},[s._v("Aphrodite")]),s._v(" 时，可以在某个渲染中将生成的class内联到元素中，同时通过使用其CSS函数追踪这次渲染中使用了哪些样式")]),s._v(" "),a("pre",[a("code",[a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" { StyleSheet, css } "),a("span",{staticClass:"hljs-keyword"},[s._v("from")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("'aphrodite'")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" styles = StyleSheet.create({\n  "),a("span",{staticClass:"hljs-attr"},[s._v("title")]),s._v(": { ... }\n})\n"),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" Heading = "),a("span",{staticClass:"hljs-function"},[s._v("("),a("span",{staticClass:"hljs-params"},[s._v("{ children }")]),s._v(") =>")]),s._v(" (\n  "),a("span",{staticClass:"xml"},[a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("h1")]),s._v(" "),a("span",{staticClass:"hljs-attr"},[s._v("className")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v("{css(styles.heading)}")]),s._v(">")]),s._v("{ children }"),a("span",{staticClass:"hljs-tag"},[s._v("</"),a("span",{staticClass:"hljs-name"},[s._v("h1")]),s._v(">")])]),s._v("\n)\n")])]),a("p",[s._v("即使所有的样式都定义在JavaScript里，你也可以轻松地将当前页所需要的所有样式提取出来并生成一个静态的CSS字符串，在服务端渲染的时候插入到document的头部")]),s._v(" "),a("pre",[a("code",[a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" { StyleSheetServer } "),a("span",{staticClass:"hljs-keyword"},[s._v("from")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("'aphrodite'")]),s._v(";\n\n"),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" { html, css } = StyleSheetServer.renderStatic("),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-params"},[s._v("()")]),s._v(" =>")]),s._v(" {\n  "),a("span",{staticClass:"hljs-keyword"},[s._v("return")]),s._v(" ReactDOMServer.renderToString("),a("span",{staticClass:"xml"},[a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("App")]),s._v("/>")])]),s._v(");\n});\n")])]),a("p",[s._v("现在你可以这样子渲染关键CSS块：")]),s._v(" "),a("pre",[a("code",[a("span",{staticClass:"xml"},[s._v("const criticalCSS = `\n  "),a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("style")]),s._v(" "),a("span",{staticClass:"hljs-attr"},[s._v("data-aphrodite")]),s._v(">")]),a("span",{staticClass:"undefined"},[s._v("\n    $")])]),a("span",{staticClass:"hljs-template-variable"},[s._v("{css.content}")]),a("span",{staticClass:"xml"},[a("span",{staticClass:"undefined"},[s._v("\n  ")]),a("span",{staticClass:"hljs-tag"},[s._v("</"),a("span",{staticClass:"hljs-name"},[s._v("style")]),s._v(">")]),s._v("\n`;\n")])])]),a("p",[s._v("如果你研究过React的服务端渲染模型，你可能会发现这是你非常熟悉的一种模式。在React中，你的组件是在JavaScript中定义‘模版标签’的，但却可以在服务端渲染成为常规的HTML字符串")]),s._v(" "),a("p",[a("strong",[s._v("如果你时刻使用渐进增强的方式构建应用，尽管整个项目可能全部是用JavaScript写的，客户端也可能不需要JavaScript")])]),s._v(" "),a("p",[s._v("不管怎样，对于客户端运行的代码而言，其打包后都包含启动单页应用所需要的代码。这些代码可以让页面瞬间活起来，浏览器中的渲染也是从这里开始")]),s._v(" "),a("p",[s._v("由于服务器端渲染HTML和CSS是同时进行的，正如我们在前面例子例看到的一样，诸如Aphrodite这样的库常常会帮助我们将生成关键CSS和服务器端渲染生成HTML的过程简化为一个简单的调用。现在，我们可以以类似的方式将React组件渲染成静态HTML")]),s._v(" "),a("pre",[a("code",[s._v("const appHtml = `\n  <"),a("span",{staticClass:"hljs-keyword"},[s._v("div")]),s._v(" "),a("span",{staticClass:"hljs-built_in"},[s._v("id")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v('"root"')]),s._v(">\n    ${html}\n  </"),a("span",{staticClass:"hljs-keyword"},[s._v("div")]),s._v(">\n`\n")])]),a("p",[s._v("通过在服务器端使用CSS-in-JS，我们的单页应用不仅可以在没有JavaScript的情况下继续工作，还有可能渲染的更快")]),s._v(" "),a("p",[a("strong",[s._v("正如有作用域的CSS选择器一样，渲染关键CSS这个最佳实践现在也是被默认具备的能力了，而不是被选择性使用的")])]),s._v(" "),a("h2",{attrs:{id:"3-更智能的优化"}},[s._v("3. 更智能的优化")]),s._v(" "),a("p",[s._v("我们最近看到了构建CSS新的方式的出现，比如来自于"),a("a",{attrs:{href:"https://github.com/yahoo"}},[s._v("yahoo")]),s._v(" 团队的"),a("a",{attrs:{href:"https://acss.io/"}},[s._v("Atomic CSS")]),s._v(" 和 "),a("a",{attrs:{href:"https://twitter.com/mrmrs_"}},[s._v("Adam Morse")]),s._v(" 的 "),a("a",{attrs:{href:"http://tachyons.io/"}},[s._v("Tachyons")]),s._v("。它们更推荐使用一些短小而又功能单一的class来代替平时被使用的语义化class。\n比如，当你使用Atomic CSS时，你会使用像调用函数一样来运用class。这些‘函数’将来会被用于生成合适的样式")]),s._v(" "),a("pre",[a("code",[s._v("<"),a("span",{staticClass:"hljs-keyword"},[s._v("div")]),s._v(" "),a("span",{staticClass:"hljs-built_in"},[s._v("class")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v('"Bgc(#0280ae.5) C(#fff) P(20px)"')]),s._v(">\n  Atomic CSS\n</"),a("span",{staticClass:"hljs-keyword"},[s._v("div")]),s._v(">\n")])]),a("p",[s._v("这种做法的目标是通过最大化地提高class的复用性，以及有效地将class像内联样式一样对待，来保证打包出来的CSS尽可能地精简。这么做能使文件大小减少，这很容易理解。但其带来的影响对于你的代码库和团队成员来说似乎是微乎其微的。不过这些包含了对CSS和HTML的更改的优化，由于其自身性质，成就了一个更具意义的架构")]),s._v(" "),a("p",[s._v("正如我们已经介绍过的那样，当使用CSS-in-JS或CSS Modules时，你不需要在HTML中使用硬编码编写的class，而是使用一些库或者构建工具自动生成的JavaScript值的动态引用")]),s._v(" "),a("p",[s._v("我们不再这样写样式:")]),s._v(" "),a("pre",[a("code",[s._v("<"),a("span",{staticClass:"hljs-selector-tag"},[s._v("aside")]),s._v(" className="),a("span",{staticClass:"hljs-string"},[s._v('"sidebar"')]),s._v(" />\n")])]),a("p",[s._v("而是这样")]),s._v(" "),a("pre",[a("code",[a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("aside")]),s._v(" "),a("span",{staticClass:"hljs-attr"},[s._v("className")]),s._v("="),a("span",{staticClass:"hljs-string"},[s._v("{styles.sidebar}")]),s._v(" />")]),s._v("\n")])]),a("p",[s._v("这个变化看起来也许没什么，但这却是我们在如何管理HTML标签与样式之间关系上的具有纪念意义的改变。通过给予CSS工具修改样式和最终应用到元素上的class的能力，我们为CSS解锁了一个全新的用于优化的class")]),s._v(" "),a("p",[s._v("我们可以看一下上面的例子，‘styles.sidebar’ 可以被估认为是一个字符串，但是没有什么限制它只能是一个单独的class。 我们都知道，它可以轻松地成为一个包含了十几个class的字符串")]),s._v(" "),a("pre",[a("code",[s._v("<"),a("span",{staticClass:"hljs-selector-tag"},[s._v("aside")]),s._v(" className={styles.sidebar} />\n"),a("span",{staticClass:"hljs-comment"},[s._v("// Could easily resolve to this:")]),s._v("\n<"),a("span",{staticClass:"hljs-selector-tag"},[s._v("aside")]),s._v(" className={"),a("span",{staticClass:"hljs-string"},[s._v("'class1 class2 class3 class4'")]),s._v("} />\n")])]),a("p",[s._v("如果我们能够优化样式，为每一套样式生成多个class，我们就做一些真正有趣的事情")]),s._v(" "),a("p",[s._v("关于这种方式我最喜欢的例子是 "),a("a",{attrs:{href:"https://twitter.com/rtsao"}},[s._v("Ryan Tsao")]),s._v(" 的 "),a("a",{attrs:{href:"https://github.com/rtsao/styletron"}},[s._v("Styletron")]),s._v(" "),a("a",{attrs:{href:"https://camo.githubusercontent.com/12ff38603f3a65f358d3d79806fca96cfa3fcc7b/68747470733a2f2f63646e2d696d616765732d312e6d656469756d2e636f6d2f6d61782f313630302f312a3778786236464f6d636d50436e514e72467935706a672e706e67"}},[a("img",{attrs:{src:"https://camo.githubusercontent.com/12ff38603f3a65f358d3d79806fca96cfa3fcc7b/68747470733a2f2f63646e2d696d616765732d312e6d656469756d2e636f6d2f6d61782f313630302f312a3778786236464f6d636d50436e514e72467935706a672e706e67",alt:"img"}})])]),s._v(" "),a("p",[s._v("就像CSS-in-JS和CSS Modules 自动添加BEM风格的类名前缀一样，StyleTron 对Atomic CSS做了同样的事情")]),s._v(" "),a("p",[s._v("StyleTron的核心API集中在一个单独的任务上——为每个由属性，值和媒介查询组成的样式定义单独的CSS规则，然后返回一个自动生成的class")]),s._v(" "),a("pre",[a("code",[a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" styletron "),a("span",{staticClass:"hljs-keyword"},[s._v("from")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("'styletron'")]),s._v(";\nstyletron.injectDeclaration({\n  prop: "),a("span",{staticClass:"hljs-string"},[s._v("'color'")]),s._v(",\n  val: "),a("span",{staticClass:"hljs-string"},[s._v("'red'")]),s._v(",\n  media: "),a("span",{staticClass:"hljs-string"},[s._v("'(min-width: 800px)'")]),s._v("\n});\n"),a("span",{staticClass:"hljs-comment"},[s._v("// → 'a'")]),s._v("\n")])]),a("p",[s._v("当然，Styletron提供了更高级的API，比如它的injectStyle函数可以允许同时定义多个规则")]),s._v(" "),a("pre",[a("code",[a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" { injectStyle } from "),a("span",{staticClass:"hljs-string"},[s._v("'styletron-utils'")]),s._v(";\ninjectStyle(styletron, {\n  "),a("span",{staticClass:"hljs-built_in"},[s._v("color")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("'red'")]),s._v(",\n  display: "),a("span",{staticClass:"hljs-string"},[s._v("'inline-block'")]),s._v("\n});\n"),a("span",{staticClass:"hljs-comment"},[s._v("// → 'a d'")]),s._v("\ninjectStyle(styletron, {\n  "),a("span",{staticClass:"hljs-built_in"},[s._v("color")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("'red'")]),s._v(",\n  fontSize: "),a("span",{staticClass:"hljs-string"},[s._v("'1.6em'")]),s._v("\n});\n"),a("span",{staticClass:"hljs-comment"},[s._v("// → 'a e'")])])]),a("p",[s._v("请注意一下上面生成的两组类名之间的共性")]),s._v(" "),a("p",[a("strong",[s._v("通过放弃对class本身的低级控制，只定义所需要的样式，就可以让工具库帮我们生成最佳的原子class集")])]),s._v(" "),a("p",[a("a",{attrs:{href:"https://camo.githubusercontent.com/a529f2bb2c3ea2630f2bd10f98ac7b6236f221eb/68747470733a2f2f63646e2d696d616765732d312e6d656469756d2e636f6d2f6d61782f313630302f312a705758723141367568694f6b5948717766424d7457672e706e67"}},[a("img",{attrs:{src:"https://camo.githubusercontent.com/a529f2bb2c3ea2630f2bd10f98ac7b6236f221eb/68747470733a2f2f63646e2d696d616765732d312e6d656469756d2e636f6d2f6d61782f313630302f312a705758723141367568694f6b5948717766424d7457672e706e67",alt:"img"}})])]),s._v(" "),a("p",[s._v("像找出最高效的办法将样式拆分为可重复利用的class这种优化，在以前通常需要手动来完成，而现在已经可以被完全自动完成。在这里你可能开始注意到这种趋势了。原子CSS是默认被具备的能力，而不是被选择性使用的")]),s._v(" "),a("h2",{attrs:{id:"4-打包管理"}},[s._v("4. 打包管理")]),s._v(" "),a("p",[s._v("在我们深入专研这一点之前，先停下来思考一个看似简单的问题")]),s._v(" "),a("p",[s._v("我们如何相互分享CSS?")]),s._v(" "),a("p",[s._v("我们已经从手动下载CSS文件转变为通过像 "),a("a",{attrs:{href:"https://bower.io/"}},[s._v("Bower")]),s._v(" 这种专门的包管理工具。而现在幸亏有 "),a("a",{attrs:{href:"http://browserify.org/"}},[s._v("Browserify")]),s._v(" 和 "),a("a",{attrs:{href:"https://webpack.js.org/"}},[s._v("webpack")]),s._v(" 这类工具，我们也可以通过npm。尽管一些工具已经可以自动地引入外部依赖包里的CSS，前端社区大多数还是习惯于手动处理依赖关系")]),s._v(" "),a("p",[s._v("不管使用哪种方式，你得清楚一件事情：CSS的依赖并不擅长于依赖其他CSS")]),s._v(" "),a("p",[s._v("正如很多人已经想到的，我们已经见证了Bower和npm对JavaScript模块产生的相似效果")]),s._v(" "),a("p",[s._v("Bower并未要求任何特别的模块格式，而发布到npm中的的模块都使用CommonJS格式。这对发布到每个平台上的包数量产生了巨大的影响")]),s._v(" "),a("p",[s._v("npm更合适小型而复杂的嵌套树依赖，而Bower则吸引了大型而独立的依赖，其中可能只有两三个，当然，也可能外加一些插件。因为使用Bower时你的依赖没有一个模块系统做支撑，每个包都不能轻松地利用自己的依赖关系，所以到整合这一步基本上都是开发者的手动操作了。")]),s._v(" "),a("p",[s._v("因此，随着时间的推移，npm上的包数量呈指数型增长，而Bower的却仅相当于线性增长。虽然这个差距可能是由各种各样的原因导致的，但很公平地说，这些原因都与每个平台是否允许包在运行时相互依赖的方式有关")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://camo.githubusercontent.com/a239e64360a5c6d40803c7fcdf023b2d116ea082/68747470733a2f2f63646e2d696d616765732d312e6d656469756d2e636f6d2f6d61782f313630302f312a4c547273494953505635714b2d7141514b6165494e412e706e67"}},[a("img",{attrs:{src:"https://camo.githubusercontent.com/a239e64360a5c6d40803c7fcdf023b2d116ea082/68747470733a2f2f63646e2d696d616765732d312e6d656469756d2e636f6d2f6d61782f313630302f312a4c547273494953505635714b2d7141514b6165494e412e706e67",alt:"img"}})])]),s._v(" "),a("p",[s._v("不幸的是，对于CSS社区来说这一切看起来都太像了。相比于npm上JavaScript包的激增，我们只看到了CSS独立包相对缓慢的增长")]),s._v(" "),a("p",[s._v("如果我们也想实现 npm 的指数增长呢？如果我们想要能够依赖于拥有不同大小的层次结构的复杂包，而不是专注于大型而全面的框架呢？为了做到这些，我们不仅需要一个包管理器来完成任务，还需要一个合适的模块格式")]),s._v(" "),a("p",[s._v("这意味着我们需要一个为CSS专门设计的包管理器么？为Sass或Less这样的预处理器？")]),s._v(" "),a("p",[s._v("真正有意思的是，我们已经通过HTML进行了类似的实现。如果你就如何相互共享HTML提出类似的问题，你会马上发现我们几乎没有共享过纯HTML——我们共享的是HTML-in-JS")]),s._v(" "),a("p",[s._v("我们通过"),a("a",{attrs:{href:"https://plugins.jquery.com/"}},[s._v("jQuery插件")]),s._v("，"),a("a",{attrs:{href:"http://ngmodules.org/"}},[s._v("Angular指令")]),s._v("和"),a("a",{attrs:{href:"https://react.parts/web"}},[s._v("React组件")]),s._v("来实现。我们的大组件是由一些独立发布在npm上，包含自己HTML的小组件组成的。原生HTML格式也许没有这种能力，但是当原生HTML被嵌入在一个功能齐全的编程语言里后，我们就能够轻易地突破这个限制")]),s._v(" "),a("p",[s._v("假如像HTML一样，我们分享CSS的同时，也分享其通过JavaScript产生的逻辑？假如我们不再使用\n"),a("a",{attrs:{href:"http://sass-lang.com/documentation/file.SASS_REFERENCE.html#mixins"}},[s._v("mixins")]),s._v("，而是使用返回对象或者字符串的函数？假如我们不再"),a("a",{attrs:{href:"http://sass-lang.com/documentation/file.SASS_REFERENCE.html#extend"}},[s._v("扩展")]),s._v("class，而是简单地通过"),a("a",{attrs:{href:"https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/assign"}},[s._v("Object.assign")]),s._v("来合并对象，或者使用新的对象"),a("a",{attrs:{href:"https://github.com/tc39/proposal-object-rest-spread"}},[s._v("展开")]),s._v("操作符呢？")]),s._v(" "),a("pre",[a("code",[s._v("const styles = {\n  .."),a("span",{staticClass:"hljs-selector-class"},[s._v(".rules")]),s._v(",\n  .."),a("span",{staticClass:"hljs-selector-class"},[s._v(".moreRules")]),s._v(",\n  fontFamily: "),a("span",{staticClass:"hljs-string"},[s._v("'Comic Sans MS'")]),s._v(",\n  "),a("span",{staticClass:"hljs-attribute"},[s._v("color")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("'blue'")]),s._v("\n}\n")])]),a("p",[s._v("一旦我们开始通过这种方式编写样式代码，我们可以像应用中的任何其他代码一样撰写和分享样式，使用相同的模式工具、基础设施和生态系统。")]),s._v(" "),a("p",[s._v("一个可以说明你如何从中受益的极好例子是用诸如 "),a("a",{attrs:{href:"https://twitter.com/mxstbr"}},[s._v("Max Stoiber")]),s._v("、"),a("a",{attrs:{href:"https://twitter.com/nikgraf"}},[s._v("Nik Graf")]),s._v("和"),a("a",{attrs:{href:"https://twitter.com/b_hough"}},[s._v("Brian Hough")]),s._v("所提供的"),a("a",{attrs:{href:"https://github.com/styled-components/polished"}},[s._v("Polished")]),s._v("一类的库")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://camo.githubusercontent.com/f336c798f2f3484de9427221e12a6ac2f858331d/68747470733a2f2f63646e2d696d616765732d312e6d656469756d2e636f6d2f6d61782f313630302f312a66637a66334f576d6d4b426b46677455715a6e7132672e706e67"}},[a("img",{attrs:{src:"https://camo.githubusercontent.com/f336c798f2f3484de9427221e12a6ac2f858331d/68747470733a2f2f63646e2d696d616765732d312e6d656469756d2e636f6d2f6d61782f313630302f312a66637a66334f576d6d4b426b46677455715a6e7132672e706e67",alt:"img"}})])]),s._v(" "),a("p",[s._v("Polished其实就是CSS-in-JS中的"),a("a",{attrs:{href:"https://lodash.com/"}},[s._v("lodash")]),s._v("。它提供了一套完整的mixins，颜色函数，一些速写方法等，可以让那些来自"),a("a",{attrs:{href:"http://sass-lang.com/"}},[s._v("Sass")]),s._v("一类语言的开发者熟练地在JavaScript中编写样式。而现在关键区别在于，这种代码可以复用，测试和共享，也能够使用完整的JavaScript包生态系统")]),s._v(" "),a("p",[s._v("那么当开始考虑CSS如何实现与整个npm相同级别的开源活动和用一些小的可复用的开源包组合大型样式集合时？令人感到奇怪的是，我们最终可能通过将CSS嵌入到JavaScript中，并完全拥抱JavaScript模块来实现一切")]),s._v(" "),a("h2",{attrs:{id:"5-非浏览器样式-non-browser-styling"}},[s._v("5. 非浏览器样式 (Non-browser styling)")]),s._v(" "),a("p",[s._v("到目前为止本文已经覆盖了所有要点，虽然在 JavaScript 中编写 CSS 会更方便，但是常规的 CSS 也可以实现这些功能。这就是我把最有意思和面向未来的一点留到现在的原因。虽然这一点并未在如今的CSS-in-JS 社区中发挥巨大的作用，但它可能会成为未来设计领域发展的基石。它不仅会影响开发人员，也会影响设计师，并从根本上改变这两个领域相互沟通的方式。")]),s._v(" "),a("p",[s._v("为了帮助理解，我们先来了解一下React")]),s._v(" "),a("p",[s._v("React模型是用组件作为渲染最终输出的中间层，在浏览器中工作时，React构建复杂的虚拟DOM树，而不是直接改变DOM元素")]),s._v(" "),a("p",[s._v("有趣的是，渲染为真实DOM并不是 React 库的核心部分，而是由 react-dom 提供的")]),s._v(" "),a("p",[s._v("虽然 React 起初是为 DOM 设计的，并且大部分情况下还是在DOM环境中使用，但是这种模式也允许 React 通过引入新的渲染方式来轻松地应对不同环境")]),s._v(" "),a("p",[s._v("JSX 不仅适用于虚拟 DOM，也适用于任何其他虚拟视图")]),s._v(" "),a("p",[s._v("这就是 "),a("a",{attrs:{href:"https://facebook.github.io/react-native"}},[s._v("React Native")]),s._v(" 的工作原理，通过编写与native应用对应的渲染虚拟组件来构写真实的native应用。比如"),a("strong",[s._v("div")]),s._v(" 和 "),a("strong",[s._v("span")]),s._v("会被替代为"),a("strong",[s._v("View")]),s._v(" 和 "),a("strong",[s._v("Text")])]),s._v(" "),a("p",[s._v("从 CSS 的角度来看，React Native 最有趣的莫过于它拥有自己特有的 "),a("a",{attrs:{href:"https://facebook.github.io/react-native/docs/stylesheet.html"}},[s._v("StyleSheet API")]),s._v("：")]),s._v(" "),a("pre",[a("code",[s._v(" "),a("span",{staticClass:"hljs-attr"},[s._v("var")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("styles = StyleSheet.create({")]),s._v("\n   "),a("span",{staticClass:"hljs-attr"},[s._v("container")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("{")]),s._v("\n     "),a("span",{staticClass:"hljs-attr"},[s._v("borderRadius")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("4,")]),s._v("\n     "),a("span",{staticClass:"hljs-attr"},[s._v("borderWidth")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("0.5,")]),s._v("\n     "),a("span",{staticClass:"hljs-attr"},[s._v("borderColor")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("'#d6d7da',")]),s._v("\n   "),a("span",{staticClass:"hljs-attr"},[s._v("},")]),s._v("\n   "),a("span",{staticClass:"hljs-attr"},[s._v("title")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("{")]),s._v("\n     "),a("span",{staticClass:"hljs-attr"},[s._v("fontSize")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("19,")]),s._v("\n     "),a("span",{staticClass:"hljs-attr"},[s._v("fontWeight")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("'bold',")]),s._v("\n   "),a("span",{staticClass:"hljs-attr"},[s._v("},")]),s._v("\n   "),a("span",{staticClass:"hljs-attr"},[s._v("activeTitle")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("{")]),s._v("\n     "),a("span",{staticClass:"hljs-attr"},[s._v("color")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("'red',")]),s._v("\n  "),a("span",{staticClass:"hljs-attr"},[s._v("}")]),s._v("\n"),a("span",{staticClass:"hljs-attr"},[s._v("})")])])]),a("p",[s._v("这里你能看到一组熟悉的样式集，包括颜色，字体以及边框的样式")]),s._v(" "),a("p",[s._v("这些规则相当简单，而且很容易就能映射到其他UI环境里。但是更有意思的是native的布局")]),s._v(" "),a("pre",[a("code",[a("span",{staticClass:"hljs-selector-tag"},[s._v("var")]),s._v(" styles = StyleSheet.create({\n  container: {\n    "),a("span",{staticClass:"hljs-attribute"},[s._v("display")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("'flex'")]),s._v("\n  }\n})")])]),a("p",[s._v("尽管在浏览器环境之外，"),a("strong",[s._v("React Native 有自己 native 版 flexbox 的实现")])]),s._v(" "),a("p",[s._v("这个实现最初是以一个名为 "),a("a",{attrs:{href:"https://www.npmjs.com/package/css-layout"}},[s._v("css-layout")]),s._v(" 的 JavaScript 模块发布的，用 JavaScript 重新实现了 flexbox（支持一套全面而又适当的测试）。为了更好的可移植性，这个模块现在已经迁移到 C 语言。")]),s._v(" "),a("p",[s._v("鉴于该项目的适用范围和重要性，它被赋予了更重要的自主品牌 "),a("a",{attrs:{href:"https://facebook.github.io/yoga"}},[s._v("Yoga")])]),s._v(" "),a("p",[a("a",{attrs:{href:"https://camo.githubusercontent.com/3dab16f72dee4a8a643777bce15bfc89644cc351/68747470733a2f2f63646e2d696d616765732d312e6d656469756d2e636f6d2f6d61782f313630302f312a6d765f68486d624f675537534f643574324a325132672e706e67"}},[a("img",{attrs:{src:"https://camo.githubusercontent.com/3dab16f72dee4a8a643777bce15bfc89644cc351/68747470733a2f2f63646e2d696d616765732d312e6d656469756d2e636f6d2f6d61782f313630302f312a6d765f68486d624f675537534f643574324a325132672e706e67",alt:"img"}})])]),s._v(" "),a("p",[s._v("尽管 Yoga 是为了把 CSS 概念移植到非浏览器环境，但仅通过专注于一些 CSS 特性的子集，它已经统治了一些潜在的无法管理的领域")]),s._v(" "),a("blockquote",[a("p",[s._v('"Yoga 专注于创建一个富有表现力的布局库，而不是去实现完整的 CSS"')])]),s._v(" "),a("p",[s._v("这些权衡可能看起来有些限制，但是当您查看CSS架构的历史时会明显地发现，"),a("strong",[s._v("工作中大规模地使用CSS其实就是合理地采用其语言子集")])]),s._v(" "),a("p",[s._v("在 Yoga 的情况里他们避免了级联，这么做有利于样式的作用域，并将他们的布局引擎完全集中在flexbox上。虽然这样会去掉很多功能，但它也为嵌入式样式的跨平台组件解锁了一个惊人的机会，我们已经看到了一些试图利用这个特性且引人注目的开源项目")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://twitter.com/necolas"}},[s._v("Nicolas Gallagher")]),s._v(" 开发的 "),a("a",{attrs:{href:"https://github.com/necolas/react-native-web"}},[s._v("React Native for Web")]),s._v(" 旨在成为 react-native 的一个替代品。当使用 webpack 这类打包工具时，可以利用 alias 轻松地替换第三方库")]),s._v(" "),a("pre",[a("code",[a("span",{staticClass:"hljs-selector-tag"},[s._v("module")]),s._v(": {\n  "),a("span",{staticClass:"hljs-attribute"},[s._v("alias")]),s._v(": {\n    "),a("span",{staticClass:"hljs-string"},[s._v("'react-native'")]),s._v(": "),a("span",{staticClass:"hljs-string"},[s._v("'react-native-web'")]),s._v("\n  }\n}\n")])]),a("p",[s._v("使用 React Native for Web 可以使 React Native 组件在浏览器环境中使用，包括 "),a("a",{attrs:{href:"https://facebook.github.io/react-native/docs/stylesheet.html"}},[s._v("React Native StyleSheet API")]),s._v(" 的浏览器端口")]),s._v(" "),a("p",[s._v("类似的，"),a("a",{attrs:{href:"https://twitter.com/intelligibabble"}},[s._v("Leland Richardson")]),s._v(" 开发的 "),a("a",{attrs:{href:"https://github.com/lelandrichardson/react-primitives"}},[s._v("react-primitives")]),s._v(" 也提供了一套跨平台的基础组件集合，它可以抽象出目标平台的实现细节，为跨平台组件创建可行的基础标准")]),s._v(" "),a("p",[s._v("甚至 "),a("a",{attrs:{href:"https://github.com/Microsoft"}},[s._v("微软")]),s._v(" 也着手推出了 "),a("a",{attrs:{href:"https://microsoft.github.io/reactxp"}},[s._v("ReactXP")]),s._v("，它旨在简化跨 web 和 native 的工作流，同时也有自己的"),a("a",{attrs:{href:"https://microsoft.github.io/reactxp/docs/styles.html"}},[s._v("跨平台样式实现")]),s._v("。")]),s._v(" "),a("p",[s._v("—")]),s._v(" "),a("p",[s._v("即使你不编写 native 应用程序，你也需要注意很重要的一点：拥有一个真正的跨平台的组件抽象，能够让我们适应几乎无限制的环境，甚至有时会以你从未预想过的方式")]),s._v(" "),a("p",[s._v("最令我感到震撼的例子是 "),a("a",{attrs:{href:"https://github.com/airbnb"}},[s._v("Airbnb")]),s._v(" 的 "),a("a",{attrs:{href:"https://twitter.com/jongold"}},[s._v("Jon Gold")]),s._v(" 开发的 "),a("a",{attrs:{href:"http://airbnb.io/react-sketchapp"}},[s._v("react-sketchapp")]),s._v("。")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://camo.githubusercontent.com/0c98b2e64e916078716f65756cd54e83810a50f8/68747470733a2f2f63646e2d696d616765732d312e6d656469756d2e636f6d2f6d61782f313630302f312a7166736b49684841577059776652354c7a305f6349412e706e67"}},[a("img",{attrs:{src:"https://camo.githubusercontent.com/0c98b2e64e916078716f65756cd54e83810a50f8/68747470733a2f2f63646e2d696d616765732d312e6d656469756d2e636f6d2f6d61782f313630302f312a7166736b49684841577059776652354c7a305f6349412e706e67",alt:"img"}})])]),s._v(" "),a("p",[s._v("我们当中很多人都花费了许多时间去尝试标准化设计语言，尽可能的限制系统中的重复数量。不幸的是，\n不管我们如何希望遵循单一来源这个真理，我们似乎只能期待将来源减少为两个 —— "),a("strong",[s._v("开发者的动态样式和设计师的静态样式")]),s._v("。虽然这已经确定比我们历史上使用的好了很多，但是它仍然需要我们手工的将样式从 "),a("a",{attrs:{href:"https://www.sketchapp.com/"}},[s._v("Sketch")]),s._v(" 这样的设计工具同步到代码里。这也是 react-sketchapp 要解决的问题")]),s._v(" "),a("p",[s._v("感谢 Sketch 的 "),a("a",{attrs:{href:"http://developer.sketchapp.com/reference/api"}},[s._v("JavaScript API")]),s._v("，以及 React 可以连接到不同渲染引擎能力，react-sketchapp 让我们可以利用跨平台的 React 组件并将其渲染到Sketch文档中")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://camo.githubusercontent.com/96a1a8454aa06648cb1e06ac2163fa32433e2839/68747470733a2f2f63646e2d696d616765732d312e6d656469756d2e636f6d2f6d61782f313630302f312a76324c314442384f53333847536379425246443868512e706e67"}},[a("img",{attrs:{src:"https://camo.githubusercontent.com/96a1a8454aa06648cb1e06ac2163fa32433e2839/68747470733a2f2f63646e2d696d616765732d312e6d656469756d2e636f6d2f6d61782f313630302f312a76324c314442384f53333847536379425246443868512e706e67",alt:"img"}})])]),s._v(" "),a("p",[s._v("不用说，这可能极大地撼动开发人员和设计师的合作方式。现在不管使用工具的是开发者还是设计师，在对设计进行迭代时引用相同的组件时，都可以指向相同的实现。")]),s._v(" "),a("p",[s._v("通过 "),a("a",{attrs:{href:"https://www.sketchapp.com/learn/documentation/symbols"}},[s._v("symbols in Sketch")]),s._v("和 "),a("a",{attrs:{href:"https://facebook.github.io/react/docs/components-and-props.html"}},[s._v("components in React")]),s._v("，我们的行业从本质上开始趋于融合为同一个抽象，通过分享相同的工具为我们能够更紧密地工作提供了契机")]),s._v(" "),a("hr"),s._v(" "),a("p",[s._v("这么多新的尝试都来自 React 及其周边的社区，这并不是巧合")]),s._v(" "),a("p",[s._v("在组件架构中，将一个组件的许多关注点集中在一个位置成为重中之重。这当然包括它的局部作用域样式，甚至通过 "),a("a",{attrs:{href:"https://facebook.github.io/relay"}},[s._v("Relay")]),s._v(" 和 "),a("a",{attrs:{href:"http://dev.apollodata.com/"}},[s._v("Apollo")]),s._v(" 这两个库，我们能够延伸到像数据获取这样更复杂的领域。结果是释放了巨大的潜力，而我们现在所了解的，只是冰山一角")]),s._v(" "),a("p",[s._v("这对我们在应用中如处理样式以及架构中的其他所有部分都产生了积极的影响")]),s._v(" "),a("p",[s._v("通过将我们的模型与用单一语言编写的组件统一起来，我们有可能不仅从从技术层面，而且从功能层面更好地实现关注分离。以组件为单元将一切作用域化，并使用这些组件来扩展已具备可维护性的系统，使用前所未有的方式进行优化，团队交接工作变得更加容易，还可以用小的开源构建区块来构建大型应用。最重要的是，我们能在不破坏渐进增强，不违背在对待 web 平台时大家所严格遵循的原则的基础上实现这一切")]),s._v(" "),a("p",[s._v("最重要的是，我对使用单一语言编写的组件组成了一种新的，统一的造型语言的基础的潜力而感到兴奋—— 一个前所未有的方式整合了前端社区")]),s._v(" "),a("hr"),s._v(" "),a("p",[s._v("在SEEK上，我们通过在组件模型上构建自己的动态样式指南来努力利用这些特性。在这个指南中语义化、交互和视觉风格都统一在单独的抽象里。这构成了一个被开发和设计师共享的通用的设计语言")]),s._v(" "),a("p",[s._v("构建一个页面应该尽可能的将有自己原则的组件拼装在一起一样简单，这可以确保我们的工作保持风格一致，并且允许我们在产品上线很久后能够去升级我们的设计语言。")]),s._v(" "),a("pre",[a("code",[a("span",{staticClass:"hljs-keyword"},[s._v("import")]),s._v(" {\n  PageBlock,\n  Card,\n  Text\n} "),a("span",{staticClass:"hljs-keyword"},[s._v("from")]),s._v(" "),a("span",{staticClass:"hljs-string"},[s._v("'seek-style-guide/react'")]),s._v("\n"),a("span",{staticClass:"hljs-keyword"},[s._v("const")]),s._v(" App = "),a("span",{staticClass:"hljs-function"},[a("span",{staticClass:"hljs-params"},[s._v("()")]),s._v(" =>")]),s._v(" (\n  "),a("span",{staticClass:"xml"},[a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("PageBlock")]),s._v(">")]),s._v("\n    "),a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("Card")]),s._v(">")]),s._v("\n      "),a("span",{staticClass:"hljs-tag"},[s._v("<"),a("span",{staticClass:"hljs-name"},[s._v("Text")]),s._v(" "),a("span",{staticClass:"hljs-attr"},[s._v("heading")]),s._v(">")]),s._v("Hello World!"),a("span",{staticClass:"hljs-tag"},[s._v("</"),a("span",{staticClass:"hljs-name"},[s._v("Text")]),s._v(">")]),s._v("\n    "),a("span",{staticClass:"hljs-tag"},[s._v("</"),a("span",{staticClass:"hljs-name"},[s._v("Card")]),s._v(">")]),s._v("\n  "),a("span",{staticClass:"hljs-tag"},[s._v("</"),a("span",{staticClass:"hljs-name"},[s._v("PageBlock")]),s._v(">")])]),s._v("\n)\n")])]),a("p",[s._v("but it’s quite possible that a compelling reason to switch could arise sooner than we think.")]),s._v(" "),a("p",[s._v("尽管我们的样式指南是用 React、webpack 和 CSS Modules 构建的，但该架构能恰好地反映使用 CSS-in-JS 构建的任何系统都会遇到的一切。技术选型可能有不同，但是核心理念是一样的。")]),s._v(" "),a("p",[s._v("然而，这些技术选型可能需要在未来以一种意想不到的方式进行转变，这就是为什么关注这个领域对于组件生态系统的持续发展是至关重要的。我们可能不会现在使用 CSS-in-JS，但是极有可能出现一个让我们使用的令人信服的理由的速度比我们预想的还要快")]),s._v(" "),a("hr"),s._v(" "),a("p",[s._v("CSS-in-JS 在短时间里已经有了出人意料的发展，但要注意的是，在宏观层面这只是一个开端而已。")]),s._v(" "),a("p",[s._v("仍旧有很大的改进空间，创新也从未停止。不断涌现的新库在解决目前还未解决的问题并提升开发者的体验 —— 比如性能的提升、在构建时提取静态 CSS、支持 CSS 变量以及降低了前端开发人员的入门门槛。")]),s._v(" "),a("p",[s._v("这就是CSS社区的所在之处。尽管我们的工作流程都进行了很大的改动，"),a("strong",[s._v("但这些都没有改变您仍然需要了解CSS的事实")])]),s._v(" "),a("p",[s._v("我们可能使用不同的语法来表达，也可能以不同的方式构建我们的应用，但是 CSS 的基本构建块不会改变。同样，我们行业向组件架构的转变是不可避免的，通过这种方式重新构思前端开发的意愿只会越来越强烈。我们非常需要共同合作以确保我们的解决方案可以广泛适用于各种背景的开发者，无论是专注于设计或专注于工程的，或者两者皆是的")]),s._v(" "),a("p",[s._v("虽然我们有时似乎有点不同，但是 CSS 和 JS 社区对于改进前端，更认真地对待 Web 平台以及改进我们下一代 web 开发流程都有很大的热情。社区的潜力是巨大的，虽然迄今为止我们已经解决了大量的问题，但仍然有很多工作还没有完成")]),s._v(" "),a("hr"),s._v(" "),a("p",[s._v("在这一点上，你仍然可能不确信，那完全没关系。现在发现CSS-in-JS对你的工作不合适是完全合理的，但我希望这是出于正确的原因，而不是仅仅对语法的表面反对")]),s._v(" "),a("p",[s._v("无论如何，这种编写样式的方式在未来几年可能会越来越流行，并且值得关注的是这种方法继续以如此迅速的速度发展。我衷心希望你可以加入我们，无论是通过贡献代码还是"),a("strong",[s._v("简单地积极参与我们的对话讨论")]),s._v("，都能使下一代 CSS 工具更有效地服务于所有前端开发人员。或者至少我希望我已经让你更加了解了为什么人们对这一块如此饱含激情，或者，至少了解为什么这不是一个愚蠢的点子。")]),s._v(" "),a("hr"),s._v(" "),a("p",[s._v("这篇文章是我在德国柏林参加 CSSconf EU 2017 做相同主题演讲时写的，并且现在可以在 "),a("a",{attrs:{href:"https://www.youtube.com/watch?v=X_uTCnaRe94"}},[s._v("YouTube")]),s._v(" 上看到相关视频。")])])}]},fs={Agent:a("VU/8")(null,os,!1,null,null,null).exports,Aop:a("VU/8")(null,ps,!1,null,null,null).exports,FeCommunication:a("VU/8")(null,hs,!1,null,null,null).exports,FeFramework:a("VU/8")(null,ds,!1,null,null,null).exports,PyramidPrinciple:a("VU/8")(null,us,!1,null,null,null).exports,ScriptLabel:a("VU/8")(null,ms,!1,null,null,null).exports,Sri:a("VU/8")(null,Cs,!1,null,null,null).exports,TimeManagement:a("VU/8")(null,js,!1,null,null,null).exports,UnifiedStylingLanguage:a("VU/8")(null,gs,!1,null,null,null).exports},bs=[];_.forEach(function(s){var t;bs.push({path:s.name,name:s.name,component:fs[(t=s.name,t.toLowerCase().replace(/( |^|-)[a-z]/g,function(s){return s.toUpperCase()}).replace(/-/g,""))]})});var ys=bs;n.a.use(D.a);var ws=[{path:"/",name:"home",component:Q},{path:"/blog",name:"blog",component:G},{path:"/blog/detail",name:"blog-detail",component:K,children:ys},{path:"/project",name:"project",component:Q},{path:"/team",name:"team",component:Q},{path:"/about",name:"about",component:vs},{path:"/recruit",name:"recruit",component:_s}],ks=new D.a({routes:ws,mode:"hash",scrollBehavior:function(){return{x:0,y:0}}}),Ss={render:function(){var s=this.$createElement,t=this._self._c||s;return t("div",{attrs:{id:"app"}},[this.welcomeShow?t("welcome",{staticClass:"welcome",on:{removeWelcome:this.removeWelcome}}):this._e(),this._v(" "),t("app-header"),this._v(" "),t("router-view"),this._v(" "),t("app-footer")],1)},staticRenderFns:[]},Ms=a("VU/8")({data:function(){return{welcomeShow:!0}},methods:{removeWelcome:function(){this.welcomeShow=!1}}},Ss,!1,null,null,null).exports;a("mAjJ"),a("GCZO");n.a.component("icon",v.a),n.a.component("welcome",C),n.a.component("AppHeader",g),n.a.component("AppFooter",f.default),n.a.component("Stars",y),n.a.component("Breadcrumb",k),n.a.component("BreadcrumbItem",M),n.a.component("Card",I),window.anime=l.a,new n.a({el:"#app",components:{App:Ms},template:"<App />",router:ks})},mAjJ:function(s,t){},mzkE:function(s,t,a){"use strict";var e=a("ce18"),n=a.n(e),i=a("dD3h");var l=function(s){a("6ulf")},v=a("VU/8")(n.a,i.a,!1,l,"data-v-20c8c5a0",null);t.default=v.exports},pRNm:function(s,t){s.exports=VueRouter},uGex:function(s,t){},wsse:function(s,t){},zANk:function(s,t){}},["lVK7"]);
//# sourceMappingURL=app.b3d8ae8f261e9f2e548d.js.map
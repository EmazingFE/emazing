<template>
  <div class="welcome-container">
    <div class="emazing-container">
      <div class="emazing-wrapper">
        <div class="emazing">
          <svg viewBox="0 0 7505.6 1992.9">
            <g fill="none" fill-rule="evenodd" stroke="#1989fa">
              <path class="letter-main letter-e" stroke-width="30" d="M555.1,1137c-14.6,8.6-32.4,6-43.7-8.6l-26.5-41c-23.2-35.1-14.6-84.7,23.2-108.5c0,0,0,0,2.6,0l333.4-213.7c14.6-8.6,17.9-26.5,8.6-41c-2.6-2.6-2.6-6-6-6C715.3,613,528,598.4,379.2,691.7c-183.9,117.1-236.9,359.9-117.1,541.2s365.9,230.9,549.8,113.8l0,0l0,0c37.7-23.2,88-11.9,111.1,23.2l26.5,37.7l0,0l0,0c8.6,11.9,6,29.1-6,41l0,0c-14.6,11.9-29.1,20.5-43.7,29.1c-260,164.1-605.4,93.3-772.1-160.8S34.5,723.5,291.8,556.7c260-164.1,605.4-93.3,772.1,160.8c8.6,14.6,17.9,29.1,26.5,43.7l0,0c6,14.6,2.6,29.1-11.9,37.7L555.1,1137z"/>
              <path class="letter-e-1" stroke-width="30" d="M1064.6,1222.3c-14.6,8.6-32.4,6-43.7-8.6l-67.5-102.5c-8.6-14.6-6-32.4,8.6-41l0,0l105.2-67.5c14.6-8.6,32.4-6,43.7,8.6l35.1,52.9c26.5,41,17.9,96.6-26.5,125.7c0,0,0,0-2.6,0L1064.6,1222.3z"/>
              <path class="letter-main letter-m" stroke-width="30" d="M1362.3,487.9h43.7c49.6,0,88,37.7,88,88v78.7h14.6c49.6-117.1,154.8-187.2,298.4-187.2s245.5,76.1,295.1,187.2h14.6c58.2-111.1,178.6-187.2,324.8-187.2c216.3,0,339.4,125.7,339.4,348v646.4c0,49.6-37.7,88-88,88h-52.9c-17.9,0-29.1-11.9-29.1-29.1V853.8c0-158.1-73.4-234.2-224.9-234.2c-148.9,0-245.5,111.1-245.5,245.5v596.8c0,49.6-37.7,88-88,88h-52.9c-17.9,0-29.1-11.9-29.1-29.1V827.3c0-125.7-88-207.7-222.3-207.7c-140.3,0-245.5,119.7-245.5,269.3v572.9c0,49.6-37.7,88-88,88h-52.9c-17.9,0-29.1-11.9-29.1-29.1V515.1C1333.2,499.8,1347.7,487.9,1362.3,487.9z"/>
              <path class="letter-main letter-a" stroke-width="30" d="M2947.5,1251.4c0-189.9,140.3-301,389-315.6l307-17.9v-96.6c0-131.7-82-204.4-239.5-204.4c-105.2,0-181.3,32.4-219.6,90.6c-17.9,26.5-43.7,43.7-76.1,43.7h-78.7c-17.9,0-32.4-17.9-29.1-35.1c41-148.9,199.1-245.5,409.5-245.5c260,0,403.6,134.3,403.6,354v637.8c0,49.6-37.7,88-88,88h-43.7c-17.9,0-29.1-11.9-29.1-29.1V1393h-14.6c-70.1,113.8-183.9,175.3-327.5,175.3C3099.6,1570.3,2947.5,1447.2,2947.5,1251.4z"/>
              <path class="letter-a-1" stroke-width="30" d="M3643.5,1154.8v-96.6l-286.5,17.9c-160.8,11.9-234.2,67.5-234.2,172.7c0,108.5,90.6,172.7,216.3,172.7C3511.8,1420.8,3643.5,1307,3643.5,1154.8z"/>
              <path class="letter-main letter-z" stroke-width="30" d="M4283.9,1283.2l436-447.2L4313,415.2c-17.9-17.9-37.7-26.5-64.2-26.5H4135c-26.5,0-37.7,32.4-20.5,49.6l383.1,397.6l-436,447.2l415.5,415.5c17.9,17.9,37.7,26.5,61.5,26.5h113.8c26.5,0,37.7-32.4,20.5-49.6L4283.9,1283.2z"/>
              <path class="letter-main letter-i" stroke-width="30" d="M5114.2,487.9h52.9c17.9,0,29.1,11.9,29.1,29.1v944.8c0,49.6-37.7,88-88,88h-52.9c-17.9,0-29.1-11.9-29.1-29.1V572.6C5026.9,526.3,5067.9,487.9,5114.2,487.9z"/>
              <path class="letter-i-1" stroke-width="30" d="M5123.5,263c-14.6,8.6-32.4,6-43.7-8.6l-67.5-102.5c-8.6-14.6-6-32.4,8.6-41l0,0l105.2-67.5c14.6-8.6,32.4-6,43.7,8.6l35.1,52.9c26.5,41,17.9,96.6-26.5,125.7c0,0,0,0-2.6,0L5123.5,263z"/>
              <path class="letter-main letter-n" stroke-width="30" d="M5468.1,487.9h43.7c49.6,0,88,37.7,88,88v78.7h14.6c52.9-117.1,175.3-187.2,339.4-187.2c239.5,0,371.2,140.3,371.2,395v599.4c0,49.6-37.7,88-88,88H6184c-17.9,0-29.1-11.9-29.1-29.1V903.4c0-193.2-82-283.8-257.4-280.5c-164.1,2.6-292.4,137.6-292.4,301v537.9c0,49.6-37.7,88-88,88h-52.9c-17.9,0-29.1-11.9-29.1-29.1V515.1C5439,499.8,5453.6,487.9,5468.1,487.9z"/>
              <path class="letter-main letter-g" stroke-width="30" d="M6585.6,1666.2h84.7c32.4,0,58.2,17.9,76.1,47c37.7,61.5,123.1,96.6,248.8,96.6c189.9,0,304.3-93.3,304.3-251.4V1348h-14.6c-67.5,117.1-187.2,183.9-333.4,183.9c-274.6,0-444.6-213.7-444.6-531.9c0-318.9,172.7-535.2,444.6-535.2c148.9,0,280.5,73.4,342,187.2h14.6V511.7c0-17.9,11.9-29.1,29.1-29.1h102.5c17.9,0,29.1,11.9,29.1,29.1v1052.6c0,236.9-183.9,389-473.7,389c-236.9,0-397.6-99.2-438.6-254.7C6553.2,1686.7,6567.7,1666.2,6585.6,1666.2z"/>
              <path class="letter-g-1" stroke-width="30" d="M6989.1,622.2c-195.8,0-307,148.9-307,383.1c0,230.9,111.1,383.1,307,383.1s315.6-148.9,315.6-383.1C7304.7,771.8,7185,622.2,6989.1,622.2z"/>
            </g>
          </svg>
        </div>
      </div>
    </div>
  </div>
</template>

<script>
  import { addClass } from '@/utils/dom'

  import anime from 'animejs'
  export default {
    methods: {
      initAnimation() {
        const emazingAnimate = anime.timeline()
          .add({
            targets: '.letter-main',
            strokeDashoffset: {
              value: [anime.setDashoffset, 0],
              delay: 200,
              duration: 800,
              easing: 'easeInOutQuad'
            },
            stroke: {
              easing: 'easeInQuad'
            },
          })
          .add({
            targets: '.letter-e-1, .letter-a-1, .letter-i-1, .letter-g-1',
            strokeDashoffset: {
              value: [anime.setDashoffset, 0],
              duration: 400,
              easing: 'easeInOutQuad'
            },
            stroke: {
              easing: 'easeInQuad'
            },
          })
        
        emazingAnimate.play()
        emazingAnimate.complete = this.animateComplete
      },
      animateComplete() {
        addClass(this.$el.querySelector('.emazing-wrapper'), 'fade-logo')
        setTimeout(() => {
          addClass(this.$el, 'fade-out')
          setTimeout(() => {
            this.$emit('removeWelcome')
          }, 100)
        }, 250)
      }
    },
    mounted() {
      this.initAnimation()
    }
  }
</script>

<style lang="sass">
  .welcome-container
    position: fixed
    top: 0
    left: 0
    z-index: 5
    background: #FFF
    display: flex
    justify-content: center
    align-items: center
    width: 100%
    height: 100%
  .emazing-container
    position: relative
    margin: 0 auto
    width: $pageWidth
    height: 100%
  .emazing-wrapper
    position: absolute
    top: 50%
    left: 50%
    margin-top: -200px
    margin-left: -200px

    display: flex
    justify-content: center
    align-items: center
    width: 400px
    height: 400px
    .emazing
      width: 100%

  .fade-logo
    animation: fadeLogo .2s ease-in forwards
  @keyframes fadeLogo
    100%
      top: 59px
      left: 65px
      width: 120px
      height: 120px
      margin-top: -60px
      margin-left: -60px

  .fade-out
    animation: fadeOut .1s ease-in forwards
  @keyframes fadeOut
    100%
      opacity: 0
</style>
